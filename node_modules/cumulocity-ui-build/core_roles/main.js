/* core_roles 9.12.5 2018-08-27T16:54:32+00:00 b689bea882f7+ (release/9.12.0) tip */
!function(){"use strict";function e(e){e.init()}e.$inject=["c8yRolesUiProvider"],angular.module("c8y.roles",[]).config(e)}(),function(){"use strict";function e(e,n,t){function o(){n.when("/"+l,d),n.when("/"+l,p),n.when("/"+a,_.assign(u,g)),n.when("/"+c,_.assign(v,g))}function i(){t.addNavigation({name:e("Roles"),parent:e("Accounts"),priority:5e3,path:l,icon:m,showIfPermissions:{anyRole:b}})}function r(){o(),i()}function s(n,t,o,i,r,s,m,d,p,u,v,g){function y(){s.changeTitle({title:e("Roles")})}function b(){t.path("/"+l),t.search("duplicate",null)}function R(e){var n=p.isGlobal(e)?a:c;return S(e,n)}function S(e,n){var o=r.getId(e),i=n.replace(/:\w+/,o);return t.search("duplicate",null),t.path(i)}function x(e,n){var o="global"===e?a:c,i=o.replace(/:\w+/,"new");t.path(i),n&&t.search("duplicate",n)}function w(e){var n=p.isGlobal(e)?"global":"inventory";x(n,e.id)}function I(t){var r={title:e("Confirm delete?"),body:i.getString('Do you really want to remove role "{{name}}"?',t),labels:{ok:e("Delete")},status:"danger"},s=m(r),l=_.partial(p.remove,t),a=_.partial(p.global.remove,t),c=p.isGlobal(t)?a:l,v=_.partial(_.unary(d.success),e("Role removed.")),g=_.partial(_.unary(d.warning),e("Role cannot be deleted because it is assigned to users.")),h=function(e){var n=_.get(e,"status");return n&&(422===n?g():y(e)),o.reject(e)},y=function(e){var t=_.get(e,"data",e);n.$emit("alert",{type:"danger",text:$("<div/>").text(u.getTranslatedServerMessage(t.message)).html(),detailedData:t})};return s.then(c).then(v).catch(h)}function T(e){var n=o.when({name:i.getString("New inventory role"),permissions:[]});return e&&(n=p.detail(e).then(function(e){var n=e.data,t={};return t.name=n.name+" 2",t.permissions=_.map(n.permissions,function(e){return _.omit(e,["id"])}),t})),n}function P(n){var t=function(){return d.success(e("Inventory role saved successfully"))},i=o.when();return n.id||(i=k(n,n.name).catch(D(n.name))),i.then(_.partial(p.save,n)).then(t).then(b)}function k(e,n){return p.list().then(function(t){return A(t,e,n)})}function A(e,n,t){var i=_.filter(e,function(e){return e.id!==n.id});return _.some(i,{name:t})&&o.reject({duplicate:!0})}function E(e,n){return k(e,n).then(function(){var t;return e.id?t=p.update({id:e.id,name:n}).then(function(t){return e.name=n,t}):e.name=n,t},D(n))}function D(e){return function(n){return _.get(n,"duplicate")&&d.danger(i.getString('There is already a role with the name "{{name}}"',{name:e})),o.reject()}}function C(e){var n=o.when({name:i.getString("New global role")});return e&&(n=p.global.detail(e).then(function(e){var n=_.pick(e.data,["name","roles","applications"]);return n.name+=" 2",n})),n}function N(t,i){var r=_.reduce(i,function(e,n,t){return n&&e.push(t),e},[]),s=function(){var o=n.$new(!0);return o.role=t,m({templateUrl:"core_roles/detail/roleGlobalSaveConfirm.html",title:e("Confirm saving changes?"),scope:o})},l=function(){var e=o.when();return t.id||(e=G(t,t.name).catch(D(t.name))),e.then(_.partial(p.global.save,t))},a=function(e){return p.global.updateRoles(e,r)},c=function(){return d.success(e("Global role saved successfully"))},u=t.id?s():o.when();return u.then(l).then(a).then(c).then(b)}function G(e,n){return p.global.list().then(function(t){return A(t,e,n)})}function L(e,n){return G(e,n).then(function(){var t=o.when();return e.id?t=p.global.update({id:e.id,name:n}).then(function(t){return e.name=n,t}):e.name=n,t},D(n))}function U(){return v.listGlobal().then(function(e){return _.filter(e,function(e){return _.includes(h,e.access)})})}function O(){return v.hasAnyRole([f])}function M(e){return p.isGlobal(e)&&("admins"===_.lowerCase(e.name)||"devices"===_.lowerCase(e.name)||v.hasRole(e,"ROLE_NO_DELETE"))}return{ROUTE_LIST:l,STRINGS:g,listGlobalPermissions:U,list:b,setListTitle:y,add:x,edit:R,duplicate:w,removeAfterConfirmation:I,canCreate:O,newInventoryRole:T,saveInventoryRole:P,saveInventoryRoleName:E,newGlobalRole:C,saveGlobalRole:N,saveGlobalRoleName:L,isUndeletable:M}}s.$inject=["$rootScope","$location","$q","gettextCatalog","c8yBase","c8yTitle","c8yModal","c8yAlert","c8yRoles","c8yLocales","c8yPermissions","c8yRolesUiStrings"];var l="roles",a=l+"/global/:roleId",c=l+"/inventory/:roleId",m="c8y-users",d={priority:1e3,icon:"universal-access",template:'<c8y-roles-list roles="vm.globalRoles" help-text="vm.globalHelpText" on-remove="vm.onRemove(role, vm.globalRoles)" add-role="vm.add(\'global\')"></c8y-roles-list>',name:e("Global roles"),controller:"c8yRolesOverviewCtrl",controllerAs:"vm"},p={icon:"vcard",template:'<c8y-roles-list roles="vm.inventoryRoles" help-text="vm.inventoryHelpText" on-remove="vm.onRemove(role, vm.inventoryRoles)" add-role="vm.add(\'inventory\')"></c8y-roles-list>',name:e("Inventory roles"),controller:"c8yRolesOverviewCtrl",controllerAs:"vm"},u={template:'<c8y-role-detail-global id="vm.params.roleId" duplicate-id="vm.params.duplicate"></c8y-role-global-global>'},v={template:'<c8y-role-detail-inventory id="vm.params.roleId" duplicate-id="vm.params.duplicate" is-top-tenant="vm.isTopTenant"></c8y-role-detail-inventory>'},g={controllerAs:"vm",controller:["$routeParams","c8yTenant",function(e,n){var t=this;_.assign(t,{isTopTenant:!1,params:e}),n.isCurrentUserTopTenant().then(function(e){t.isTopTenant=e})}]},h=["READ","ADMIN","CREATE","UPDATE"],y="ROLE_USER_MANAGEMENT_READ",f="ROLE_USER_MANAGEMENT_ADMIN",b=[y,f];return{$get:s,init:r,hookViews:o}}e.$inject=["gettext","c8yViewsProvider","c8yNavigatorProvider"],angular.module("c8y.roles").provider("c8yRolesUi",e)}(),function(){"use strict";function e(e){function n(){e.canCreate().then(function(e){i.canCreate=e})}function t(n){e.removeAfterConfirmation(n).then(function(){i.onRemove({role:n})})}function o(){_.forEach(i.roles,function(e){e.name=e.name&&_.trim(e.name),e.description=e.description&&_.trim(e.description)})}var i=this;_.assign(i,{remove:t,duplicate:e.duplicate,edit:e.edit,isUndeletable:e.isUndeletable,$onChanges:o,$onInit:n})}e.$inject=["c8yRolesUi"],angular.module("c8y.roles").component("c8yRolesList",{templateUrl:"core_roles/list/rolesList.html",bindings:{roles:"<",addRole:"&",onRemove:"&",helpText:"<"},controllerAs:"vm",controller:e})}(),function(){"use strict";function e(e,n,t,o){function i(){t.setListTitle(),r()}function r(){return e.all([s(),a()])}function s(){return n.global.list().then(l)}function l(e){d.globalRoles=e}function a(){return n.list().then(c)}function c(e){d.inventoryRoles=e}function m(e,n){_.remove(n,function(n){return n.id===e.id})}var d=this,p={header:o("Grant permissions on a general level."),text:o("There are several default roles defined, but you can define your own according to your needs.")},u={header:o("Manage user permissions on a particular group and/or its children."),text:o("There are several default inventory roles defined, but you can define your own according to your needs.")};_.assign(d,{onRemove:m,listGlobal:s,listInventory:a,listAll:r,add:t.add,globalHelpText:p,inventoryHelpText:u}),i()}e.$inject=["$q","c8yRoles","c8yRolesUi","gettext"],angular.module("c8y.roles").controller("c8yRolesOverviewCtrl",e)}(),function(){"use strict";function e(e){var n=this;n.route_list=e.ROUTE_LIST}e.$inject=["c8yRolesUi"],angular.module("c8y.roles").component("c8yRoleTitle",{templateUrl:"core_roles/detail/roleTitle.html",bindings:{name:"<",subtitle:"@",onSave:"&"},controllerAs:"vm",controller:e})}(),function(){"use strict";function e(e,n,t,o,i){function r(){s()}function s(){var n=u.id,i=u.duplicateId,r="new"===n?o.newInventoryRole(i):t.detail(n).then(e.getResData);r.then(function(e){u.role=e})}function l(){var e=n.SCOPES.values();return _.reject(e,p)}function a(e){e.isTopTenant&&(u.permissionScopes=l())}function c(e){return u.saving=!0,e.finally(function(){u.saving=!1}),e}function m(){return c(o.saveInventoryRole(u.role))}function d(e){return c(o.saveInventoryRoleName(u.role,e))}function p(e){var n="SUPPORT"===e.name&&!u.isTopTenant;return n}var u=this;_.assign(u,{$onInit:r,$onChanges:a,STRINGS:o.STRINGS,helpLink:i.getUserGuideLink(o.STRINGS.LINKS.ROLES_INVENTORY),onSaveName:d,cancel:o.list,save:m})}e.$inject=["c8yBase","c8yPermissions","c8yRoles","c8yRolesUi","c8yDocs"],angular.module("c8y.roles").component("c8yRoleDetailInventory",{templateUrl:"core_roles/detail/roleDetailInventory.html",bindings:{id:"<",duplicateId:"<",isTopTenant:"<"},controllerAs:"vm",controller:e})}(),function(){"use strict";function e(e,n,t,o,i,r){function s(){l(),u()}function l(){var e=k.id,n=k.duplicateId,t="new"===e?a(n):c(e);t.then(m)}function a(e){var e=k.duplicateId,n=o.newGlobalRole(e);return n.then(function(){e&&r(f)}),n}function c(n){return t.global.detail(n).then(e.getResData)}function m(e){k.role=e,u(),d(e.roles)}function d(e){var n=(e||{}).references||[];k.selectedPermissions=_.reduce(n,p,{})}function p(e,n){return e[n.role.id]=!0,e}function u(){return o.listGlobalPermissions().then(v)}function v(e){k.permissions=e,k.groupedPermissions=_.map(_.groupBy(e,"category"),function(e,n){return{category:n,permissions:e}})}function g(e,n){return _.some(e,{access:n})}function h(e,n){var t=_.find(e,{access:n});return t&&t.id}function y(e){f();var n=k.selectedPermissions||{},t=!b(e);_(k.permissions).map("id").filter(S(e)).forEach(function(e){n[e]=t})}function f(){k.globalRoleDetailForm.$setDirty()}function b(e){return k.selectedPermissions&&k.permissions&&_(k.permissions).map("id").filter(S(e)).every(function(e){return k.selectedPermissions[e]})}function R(e){return k.permissions&&_(k.permissions).map("id").some(S(e))}function S(e){var n=new RegExp(e+"$");return function(e){return n.test(e)}}function x(e){var n=e.category,t=o.STRINGS.PERMISSIONS_GLOBAL_LABELS;return n=t[n]?t[n]:_.capitalize((n||"").toLowerCase().replace(/_/g," "))}function w(e){return T(o.saveGlobalRoleName(k.role,e))}function I(){return T(o.saveGlobalRole(k.role,k.selectedPermissions))}function T(e){return k.saving=!0,e.finally(function(){k.saving=!1}),e}function P(){var e=/^ROLE_APPLICATION/;return _.some(k.selectedPermissions,function(n,t){return n&&e.test(t)})}var k=this;_.assign(k,{$onInit:s,STRINGS:o.STRINGS,helpLink:i.getUserGuideLink(o.STRINGS.LINKS.ROLES_INVENTORY),onSaveName:w,cancel:o.list,hasPermission:g,permissionId:h,allSelected:b,selectAll:y,categoryLabel:x,save:I,hasAppPermissions:P,hasPermissionWithAccess:R})}e.$inject=["c8yBase","c8yPermissions","c8yRoles","c8yRolesUi","c8yDocs","$timeout"],angular.module("c8y.roles").component("c8yRoleDetailGlobal",{templateUrl:"core_roles/detail/roleDetailGlobal.html",bindings:{id:"<",duplicateId:"<"},controllerAs:"vm",controller:e})}(),function(){"use strict";function e(e){function n(){return t[Math.floor(Math.random()*t.length)]}var t="ABCDEFGHJKLMNPQRSTUVWXYZabcdefhijkmnoprstuvwxyz123456789",o=this;o.devicesWarning="devices"===e.role.name,o.randomString=_.map(_.range(5),n).join(""),o.canConfirm=function(){return o.confirmString===o.randomString},o.$close=e.$close,o.$dismiss=e.$dismiss}e.$inject=["$scope"],angular.module("c8y.roles").controller("GlobalRoleSaveConfirmCtrl",e)}(),function(){"use strict";function e(e,n){function t(n){n.permissions&&(c&&c(),c=e.$watchCollection(_.constant(m.permissions),o))}function o(){m.scopedPermissions=_.filter(m.permissions,{scope:m.scope})}function i(){m.permissions.push({scope:m.scope,permission:m.accessTypes.READ.value,type:"*"}),a()}function r(e){_.remove(m.permissions,e),a()}function s(e){delete e.id}function l(e){var n=m.permissions,t=m.scopedPermissions,o=["type","permission","scope"],i=function(n){return _.every(o,function(t){var o=_.matchesProperty(t,_.get(e,t)),i=_.matchesProperty(t,"*");return o(n)||i(n)})},r=_.find(_.without(n,e),i);return r&&(!_.matches(_.pick(e,o))(r)||_.indexOf(t,e)>_.indexOf(t,r))}function a(){m.permissionsListForm.$setDirty()}var c,m=this;_.assign(m,{$onChanges:t,accessTypes:n.ACCESS_TYPES,add:i,remove:r,removeId:s,isOverridden:l})}e.$inject=["$scope","c8yPermissions"],angular.module("c8y.roles").component("c8yRoleInventoryPermissionList",{templateUrl:"core_roles/detail/roleInventoryPermissionList.html",bindings:{permissions:"<",scope:"<"},controllerAs:"vm",controller:e})}(),function(){"use strict";function e(e){var n;n='<c8y-ui-title-set title="::vm.role.name"></c8y-ui-title-set>\n\n<c8y-breadcrumbs-set>\n  <c8y-breadcrumbs-item path="#roles" label="{{\'Roles\' | translate}}" icon="c8y-users"></c8y-breadcrumbs-item>\n  <c8y-breadcrumbs-item path="#roles/global_roles" label="{{\'Global roles\' | translate}}" icon="universal-access"></c8y-breadcrumbs-item>\n</c8y-breadcrumbs-set>\n\n<div class="row">\n  <form name="vm.globalRoleDetailForm">\n    <div class="col-md-6">\n      <div class="card">\n        <div class="card-block">\n          <div class="form-group">\n            <label translate>Name</label>\n            <input name="name" placeholder="{{\'e.g. My global role\' | translate}}" required class="form-control" ng-maxlength="1000" ng-model="vm.role.name">\n            <c8y-error-feedback field="vm.globalRoleDetailForm.name"></c8y-error-feedback>\n          </div>\n          <div class="form-group">\n            <label translate>Description</label>\n            <textarea name="description" class="form-control" style="height:140px" ng-maxlength="1000" ng-model="vm.role.description"></textarea>\n            <c8y-error-feedback field="vm.globalRoleDetailForm.description"></c8y-error-feedback>\n          </div>\n        </div>\n      </div>\n\n\n      <p translate>\n        Select the applications that can be accessed by this role below.\n      </p>\n      <p class="alert alert-info" ng-show="vm.hasAppPermissions()" translate>\n        To choose which applications this role should have access to please remove all "Application management" permissions.\n      </p>\n      <br>\n      <div class="card">\n        <c8y-application-access allowed-applications="vm.role.applications" disabled-edit="vm.hasAppPermissions()" c8y-check-dirty="vm.role.applications">\n        </c8y-application-access>\n      </div>\n    </div>\n    <div class="col-md-6">\n      <p class="bottom-m-sm">\n        <span translate>\n          A <strong>global role</strong> contains generally applicable permissions. Select, for example, "read" in the row "Inventory", if you want to permit a user in this role to access the whole inventory with all devices.\n        </span>\n        <br><small ng-show="::vm.helpLink">\n          <a ng-href="{{::vm.helpLink}}" target="_blank"><i c8y-icon="question-circle-o"></i><span translate>Help &amp; Documentation</span></a>\n        </small>\n      </p>\n      <div class="card">\n        <table class="table table-striped">\n          <thead>\n            <tr>\n              <th translate>Type</th>\n              <th style="max-width:100px; text-align: center">\n                <span translate>Read</span><br>\n                <input type="checkbox" ng-click="::vm.selectAll(\'READ\')" ng-checked="::vm.allSelected(\'READ\')">\n              </th>\n              <th style="max-width:100px; text-align: center">\n                <span translate>Admin</span>\n                <a href="" uib-popover="{{::vm.STRINGS.ADMIN | translate}}" popover-placement="right" popover-trigger="\'focus\'">\n                <i c8y-icon="question-circle-o"></i></a><br>\n                <input type="checkbox" ng-click="::vm.selectAll(\'ADMIN\')" ng-checked="::vm.allSelected(\'ADMIN\')">\n              </th>\n              <th style="max-width:100px; text-align: center">\n                <span translate>Create</span><br>\n                <input type="checkbox" ng-click="::vm.selectAll(\'CREATE\')" ng-checked="::vm.allSelected(\'CREATE\')">\n              </th>\n              <th style="max-width:100px; text-align: center" ng-if="::vm.hasPermissionWithAccess(\'UPDATE\')">\n                <span translate>Update</span><br>\n                <input type="checkbox" ng-click="::vm.selectAll(\'UPDATE\')" ng-checked="::vm.allSelected(\'UPDATE\')">\n              </th>\n            </tr>\n          </thead>\n\n          <tbody>\n            <tr ng-repeat="group in vm.groupedPermissions | orderBy:\'category\'">\n              <td>\n                {{::vm.categoryLabel(group) | translate}}\n                <i c8y-icon="question-circle-o" class="btn btn-link" style="font-size:0.7em;text-decoration: none," ng-show="::vm.STRINGS.PERMISSIONS_GLOBAL[category]" popover-placement="right" popover-trigger="\'focus\'" uib-popover="{{::vm.STRINGS.PERMISSIONS_GLOBAL[category] | translate}}">\n                </i>\n              </td>\n              <td style="text-align: center">\n                <input type="checkbox" ng-show="::vm.hasPermission(group.permissions, \'READ\')" ng-model="::vm.selectedPermissions[vm.permissionId(group.permissions, \'READ\')]">\n              </td>\n              <td style="text-align: center">\n                <input type="checkbox" ng-show="::vm.hasPermission(group.permissions, \'ADMIN\')" ng-model="::vm.selectedPermissions[vm.permissionId(group.permissions, \'ADMIN\')]">\n              </td>\n              <td style="text-align: center">\n                <input type="checkbox" ng-show="::vm.hasPermission(group.permissions, \'CREATE\')" ng-model="::vm.selectedPermissions[vm.permissionId(group.permissions, \'CREATE\')]">\n              </td>\n              <td style="text-align: center" ng-if="::vm.hasPermissionWithAccess(\'UPDATE\')">\n                <input type="checkbox" ng-show="::vm.hasPermission(group.permissions, \'UPDATE\')" ng-model="::vm.selectedPermissions[vm.permissionId(group.permissions, \'UPDATE\')]">\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </form>\n</div>\n\n<div class="page-footer text-center">\n  <c8y-ui-button-footer>\n    <button type="button" class="btn btn-default" ng-click="vm.cancel()" ng-disabled="vm.saving" translate>\n      Cancel\n    </button>\n    <button type="button" class="btn btn-primary" ng-click="vm.save()" ng-disabled="vm.saving || vm.globalRoleDetailForm.$invalid || (vm.role.id && vm.globalRoleDetailForm.$pristine)" translate>\n      Save\n    </button>\n  </c8y-ui-button-footer>\n</div>\n',e.put("roles/detail/roleDetailGlobal.html",n),e.put("core_roles/detail/roleDetailGlobal.html",n),e.put("/apps/core/roles/detail/roleDetailGlobal.html",n),n='<c8y-ui-title-set title="::vm.role.name"></c8y-ui-title-set>\n\n<c8y-breadcrumbs-set>\n  <c8y-breadcrumbs-item path="#roles" label="{{\'Roles\' | translate}}" icon="c8y-users"></c8y-breadcrumbs-item>\n  <c8y-breadcrumbs-item path="#roles/inventory_roles" label="{{\'Inventory roles\' | translate}}" icon="vcard"></c8y-breadcrumbs-item>\n</c8y-breadcrumbs-set>\n\n<div class="row">\n  <form name="vm.inventoryRoleDetailForm">\n    <div class="col-md-6">\n      <div class="card">\n        <div class="card-block">\n          <div class="form-group">\n            <label translate>Name</label>\n            <input name="name" placeholder="{{\'e.g. My inventory role\' | translate}}" required class="form-control" ng-maxlength="1000" ng-model="vm.role.name">\n            <c8y-error-feedback field="vm.inventoryRoleDetailForm.name">\n            </c8y-error-feedback>\n          </div>\n          <div class="form-group">\n            <label translate>Description</label>\n            <textarea name="description" class="form-control" style="height: 200px" ng-maxlength="1000" ng-model="vm.role.description"></textarea>\n            <c8y-error-feedback field="vm.inventoryRoleDetailForm.description">\n            </c8y-error-feedback>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="col-md-6 pull-right">\n      <p class="bottom-m">\n        <span translate>\n          An <strong>inventory role</strong> contains permissions that can be attached to groups of devices.<br>\n          Click <i c8y-icon="plus-circle" class="text-primary"></i> to add a new permission.\n          In the permission drop-down, you can further restrict the access to objects containing the defined type.\n        </span><br>\n        <small ng-show="::vm.helpLink">\n          <a ng-href="{{::vm.helpLink}}" target="_blank">\n            <i c8y-icon="question-circle-o"></i>\n            <span translate>Help &amp; Documentation</span>\n          </a>\n        </small>\n      </p>\n      <div ng-repeat="scope in vm.permissionScopes" style="margin-bottom:20px">\n        <h4 style="display:inline-block">\n          {{scope.label | translate}}\n        </h4>\n        <a href="" ng-show="::vm.STRINGS.PERMISSIONS_SCOPES[scope.value]" popover-placement="right auto" popover-trigger="\'focus\'" uib-popover="{{::vm.STRINGS.PERMISSIONS_SCOPES[scope.value] | translate}}">\n        <i c8y-icon="question-circle-o"></i>\n        </a>\n        <c8y-role-inventory-permission-list scope="::scope.value" permissions="vm.role.permissions">\n        </c8y-role-inventory-permission-list>\n      </div>\n    </div>\n  </form>\n</div>\n\n<div class="page-footer text-center">\n  <c8y-ui-button-footer>\n    <button type="button" class="btn btn-default" ng-click="vm.cancel()" ng-disabled="vm.saving" translate>\n      Cancel\n    </button>\n    <button type="button" class="btn btn-primary" ng-click="vm.save()" ng-disabled="vm.saving || vm.inventoryRoleDetailForm.$invalid || (vm.role.id && vm.inventoryRoleDetailForm.$pristine)" translate>\n    Save\n    </button>\n  </c8y-ui-button-footer>\n</div>\n',e.put("roles/detail/roleDetailInventory.html",n),e.put("core_roles/detail/roleDetailInventory.html",n),e.put("/apps/core/roles/detail/roleDetailInventory.html",n),n='<div ng-controller="GlobalRoleSaveConfirmCtrl as vm">\n  <div class="modal-header" data-ng-show="title">\n    <h3>{{title | translate}}</h3>\n  </div>\n  <div class="modal-body">\n    <p translate>\n      Are you sure you want to edit the global role?\n      Please enter "{{vm.randomString}}" to confirm:\n    </p>\n    <p ng-if="vm.devicesWarning" class="help-block bg-warning" style="padding:10px, 0, 10px, 0" translate>\n      Changing the global role "devices" can lead to security hole. E.g. if a device is compromised, attackers might\n      have extended access to the platform.\n    </p>\n    <form class="form-inline" style="margin-top:20px" ng-submit="vm.canConfirm() && vm.$close()">\n      <div class="form-group">\n        <label for="confirmString">{{\'Confirm\' | translate}}:&nbsp;</label>\n        <input type="text" class="form-control" id="confirmString" placeholder="{{\'Type here\' | translate}}" ng-model="vm.confirmString" c8y-autofocus>\n      </div>\n    </form>\n  </div>\n  <div class="modal-footer">\n    <button data-ng-disabled="!vm.canConfirm()" class="btn btn-primary" ng-click="vm.$close()" translate>Confirm</button>\n    <button class="btn btn-default" ng-click="vm.$dismiss()" translate>Cancel</button>\n  </div>\n</div>\n',e.put("roles/detail/roleGlobalSaveConfirm.html",n),e.put("core_roles/detail/roleGlobalSaveConfirm.html",n),e.put("/apps/core/roles/detail/roleGlobalSaveConfirm.html",n),n='<ng-form name="vm.permissionsListForm">\n  <ul class="list-unstyled">\n\n    <li class="card-row-add-remove form-inline" ng-repeat="permission in vm.scopedPermissions">\n      <div style="float:right;margin-top:6px" ng-show="vm.isOverridden(permission)">\n        <a href="" class="text-warning" uib-popover="{{\'This permission is overridden by a more generic one in this role.\' | translate}}" popover-append-to-body="true" popover-trigger="\'focus\'" popover-placement="auto left">\n          <i c8y-icon="exclamation-circle"></i>\n        </a>\n      </div>\n      <div class="form-group">\n        <label>{{\'Type\' | translate}}\n        </label>\n        <input type="text" class="form-control" style="font-weight:normal" ng-model="permission.type" ng-change="vm.removeId(permission)" placeholder="{{\'e.g. * or specific fragment type\' | translate}}" required>\n      </div>\n      <div class="form-group">\n        <label>{{\'Permission\' | translate}}\n        </label>\n        <div class="c8y-select-wrapper">\n          <select class="form-control" name="permission" style="font-weight:normal" ng-options="access.value as (access.label | translate) for access in vm.accessTypes.values()" ng-model="permission.permission" ng-change="vm.removeId(permission)">\n          </select>\n          <span></span>\n        </div>\n      </div>\n      <div class="add-remove-btns">\n        <button type="button" class="btn btn-link btn-remove" ng-click="vm.remove(permission)">\n          <i class="text-muted" c8y-icon="minus-circle"></i>\n        </button>\n        <button type="button" ng-click="vm.add()" class="btn btn-link btn-add">\n         <i c8y-icon="plus-circle"></i>\n        </button>\n      </div>\n    </li>\n\n    <li ng-if="vm.scopedPermissions.length === 0" class="card-row-add-remove">\n      <span style="display:block; padding-top: 7px" translate>No permissions for this scope.</span>\n      <div class="add-remove-btns">\n        <button type="button" ng-click="vm.add()" class="btn btn-link btn-add">\n      <i c8y-icon="plus-circle"></i>\n      </button>\n      </div>\n    </li>\n\n  </ul>\n</ng-form>',e.put("roles/detail/roleInventoryPermissionList.html",n),e.put("core_roles/detail/roleInventoryPermissionList.html",n),e.put("/apps/core/roles/detail/roleInventoryPermissionList.html",n),n='<!-- <div class="pull-right">\n  <a ng-href="#/{{vm.route_list}}" class="btn btn-link pull-right" style="text-transform: none">\n    <i c8y-icon="group"></i> <span translate>All roles</span>\n  </a>\n</div> -->\n<div>\n  <h1 class="title" style="display: block">\n    <c8y-inplace-input value="vm.name" on-save="vm.onSave({value: value})" maxlength="50" data-required="true">\n    </c8y-inplace-input>\n  </h1>\n  <!-- <small class="text-muted" style="text-transform:none">{{vm.subtitle | translate}}</small> -->\n</div>',e.put("roles/detail/roleTitle.html",n),e.put("core_roles/detail/roleTitle.html",n),e.put("/apps/core/roles/detail/roleTitle.html",n),n='<p style="margin: 15px 0 20px">\n  <span class="lead">{{vm.helpText.header | translate}}</span><br>\n  {{vm.helpText.text | translate}}\n</p>\n<div class="card-group interact-grid">\n\n  <div class="col-xs-12 col-sm-6 col-md-4" ng-show="vm.canCreate">\n    <a href="" class="card add-card" ng-click="::vm.addRole()" style="min-height: 90px">\n      <i c8y-icon="plus-square" class="text-muted"></i> <span translate>Add role</span>\n    </a>\n  </div>\n\n  <div ng-repeat="role in vm.roles | orderBy:\'name\'" class="col-xs-12 col-sm-6 col-md-4" ng-click="::vm.edit(role)">\n\n    <div class="card" ng-click="vm.edit(role)">\n\n      <div class="card-actions" ng-click="$event.stopPropagation()">\n        <div class="dropdown settings" uib-dropdown>\n          <a class="dropdown-toggle c8y-dropdown" uib-dropdown-toggle ng-click="::$event.stopPropagation()">\n            <span><i c8y-icon="ellipsis-v"></i></span>\n          </a>\n          <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n            <li>\n              <a href="" ng-click="::$event.stopPropagation();vm.edit(role)">\n                <i c8y-icon="edit"></i> <translate>Edit</translate>\n              </a>\n            </li>\n            <li>\n              <a href="" ng-click="::$event.stopPropagation();vm.duplicate(role)">\n                <i c8y-icon="clone"></i> <translate>Duplicate</translate>\n               </a>\n            </li>\n            <li>\n              <a href="" ng-click="::$event.stopPropagation();vm.remove(role)" ng-hide="::vm.isUndeletable(role)">\n                <i c8y-icon="trash"></i> <translate>Remove</translate>\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <div class="card-header">\n        <div class="card-title text-truncate" title="{{::role.name}}">\n           <span>{{::role.name | translate}}</span>\n        </div>\n      </div>\n      <!-- <hr> -->\n      <div class="card-block">\n        <p ng-show="role.description">{{::role.description | translate}}</p>\n        <small class="text-muted" ng-hide="role.description" translate><em>No description available</em></small>\n        <div style="margin-top: 5px" ng-show="::role.permissions">\n          <span class="badge bg-primary" ng-bind="::role.permissions.length"></span>\n          <small class="text-muted" translate translate-n="::role.permissions.length" translate-plural="permissions">permission</small>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',e.put("roles/list/rolesList.html",n),e.put("core_roles/list/rolesList.html",n),e.put("/apps/core/roles/list/rolesList.html",n)}angular.module("c8y.roles").run(["$templateCache",e])}();