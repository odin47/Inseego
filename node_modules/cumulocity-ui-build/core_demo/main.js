/* core_demo 9.12.5 2018-08-27T16:53:58+00:00 b689bea882f7+ (release/9.12.0) tip */
!function(){"use strict";function e(e,t,n){e.addNavigation({priority:1e4,name:n("Demo"),icon:"c8y-rocket",path:""}),t.when("/",{template:"<c8y-demo></c8y-demo>"})}e.$inject=["c8yNavigatorProvider","c8yViewsProvider","gettext"],angular.module("c8y.demo",[]).config(e)}(),function(){"use strict";function e(e,t,n,r,a){function i(){o(),s()}function o(){n.checkPermissions().then(function(e){h.allowed=e,e||t.warning(y)})}function s(){n.getDemoStatus().then(function(e){h.demoStatus=e})}function c(){return e.open({component:"c8yDemoSetupWizard",backdrop:"static",keyboard:!1}).result.then(s)}function u(){n.replaceMeasurementValues(h.demoStatus.simulators[0],"c8y_Temperature","T","errorValuesRange").then(function(e){return h.demoStatus.errorConditionsEnabled=!0,n.saveDemoStatus(h.demoStatus).then(function(){t.success(a.getString('Error conditions triggered on "{{deviceName}}" in "{{groupName}}"!',g(e)))})})}function l(){n.replaceMeasurementValues(h.demoStatus.simulators[0],"c8y_Temperature","T","normalValuesRange").then(function(e){return h.demoStatus.errorConditionsEnabled=!1,n.saveDemoStatus(h.demoStatus).then(function(){t.success(a.getString('Error conditions cleared on "{{deviceName}}" in "{{groupName}}"!',g(e)))})})}function m(){var e=25;n.increaseMeasurementValues(h.demoStatus.simulators[1],"c8y_Temperature","T",e).then(function(n){t.success(a.getString('Temperature increased by {{value}}°C on "{{deviceName}}" in "{{groupName}}"!',_.assign({},g(n),{value:e})))})}function d(){var e=25;n.increaseMeasurementValues(h.demoStatus.simulators[1],"c8y_Temperature","T",-e).then(function(n){t.success(a.getString('Temperature decreased by {{value}}°C on "{{deviceName}}" in "{{groupName}}"!',_.assign({},g(n),{value:e})))})}function p(){return e.open({component:"c8yDemoCleanUpWizard",backdrop:"static",keyboard:!1}).result.then(s)}function g(e){return{deviceName:_.get(e,"name"),groupName:_.get(e,"assetParents.references[0].managedObject.name")}}var h=this,y=r("You need these roles to manage demo: Inventory Read / Admin, Simulator Admin, Smart Rule Read / Admin");_.assign(h,{$onInit:i,setupDemo:c,triggerErrorConditions:u,clearErrorConditions:l,increaseTemperature:m,decreaseTemperature:d,cleanUpDemo:p})}e.$inject=["c8yWizardModal","c8yAlert","c8yDemo","gettext","gettextCatalog"],angular.module("c8y.demo").component("c8yDemo",{templateUrl:"core_demo/demo.html",controller:e,controllerAs:"vm"})}(),function(){"use strict";angular.module("c8y.demo").component("c8yDemoSetupWizard",{bindings:{modalInstance:"<",resolve:"<"},templateUrl:"core_demo/demo-setup-wizard/demo-setup-wizard.html",controllerAs:"vm"})}(),function(){"use strict";function e(e,t){function n(){e.current().then(function(e){_.assign(a.wizardCtrl.data,{email:e.email,phone:e.phone})})}function r(){a.wizardCtrl.data.progressSummary=t.setup(a.wizardCtrl.data),a.wizardCtrl.goTo("progress-summary")}var a=this;_.assign(a,{$onInit:n,setup:r})}e.$inject=["c8yUser","c8yDemo"],angular.module("c8y.demo").component("c8yDemoSetupPrepare",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"core_demo/demo-setup-wizard/demo-setup-prepare.html",controller:e,controllerAs:"vm"})}(),function(){"use strict";function e(){function e(e){return e.completed?"check":"circle-o-notch"}var t=this;_.assign(t,{getStepStatusIcon:e})}angular.module("c8y.demo").component("c8yDemoSetupProgressSummary",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"core_demo/demo-setup-wizard/demo-setup-progress-summary.html",controller:e,controllerAs:"vm"})}(),function(){"use strict";angular.module("c8y.demo").component("c8yDemoCleanUpWizard",{bindings:{modalInstance:"<",resolve:"<"},templateUrl:"core_demo/demo-clean-up-wizard/demo-clean-up-wizard.html",controllerAs:"vm"})}(),function(){"use strict";function e(e,t){function n(){e.getDemoObjectsList().then(function(e){o.demoObjectsList=e,o.wizardCtrl.forceResize()})}function r(e){var t;return e.c8y_IsDeviceGroup?t="c8y-icon c8y-icon-group":e.commandQueue?t="c8y-icon c8y-icon-simulator":e.c8y_IsDevice?t="c8y-icon c8y-icon-device":e.c8y_Dashboard?t="th":e.c8y_Kpi?t="c8y-icon c8y-icon-data-points":"c8y_PrivateSmartRule"===e.type?t="cogs":_.isUndefined(e.c8y_IsBinary)?"c8y_DemoStatus"===e.type&&(t="cog"):t="c8y-icon c8y-icon-archive",t}function a(e){var n;return"c8y_DeviceGroup"===e.type?n=t.getString('"{{name}}" - device group',e):"c8y_DeviceSubgroup"===e.type?n=t.getString('"{{name}}" - device subgroup',e):e.commandQueue?n=t.getString('"{{name}}" - simulator',e):e.c8y_IsDevice?n=t.getString('"{{name}}" - device',e):e.c8y_Dashboard?n=t.getString('"{{c8y_Dashboard.name}}" - dashboard',e):_.isUndefined(e.c8y_IsBinary)?e.c8y_Kpi?n=t.getString('"{{c8y_Kpi.label}}" - data point',e):"c8y_PrivateSmartRule"===e.type?n=t.getString('"{{name}}" - smart rule',e):"c8y_DemoStatus"===e.type&&(n=t.getString("Stored demo configuration")):n=t.getString('"{{name}}" - file',e),n}function i(){o.inProgress=!0,o.wizardCtrl.setAllowUserInteraction(!1),e.cleanUp().then(function(){o.wizardCtrl.goTo("result")}).finally(function(){o.inProgress=!1,o.wizardCtrl.setAllowUserInteraction(!0)})}var o=this;_.assign(o,{$onInit:n,getIcon:r,getLabel:a,cleanUp:i})}e.$inject=["c8yDemo","gettextCatalog"],angular.module("c8y.demo").component("c8yDemoCleanUpConfirmationStep",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"core_demo/demo-clean-up-wizard/demo-clean-up-confirmation-step.html",controller:e,controllerAs:"vm"})}(),function(){"use strict";angular.module("c8y.demo").component("c8yDemoCleanUpResultStep",{require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"core_demo/demo-clean-up-wizard/demo-clean-up-result-step.html",controllerAs:"vm"})}(),function(){"use strict";function e(e,t,n,r,a,i,o,s,c,u,l,m,d,p,g,h){function y(){return r.mustHaveAllRoles(xe).then(_.constant(!0),_.constant(!1))}function v(){return i.list({type:De}).then(_.first)}function f(e){return i.create(b(e))}function b(e){return{type:De,siteGroups:_.map(e.siteGroups,"id"),buildingGroups:_.map(e.buildingGroups,"id"),simulators:_.map(e.simulators,"id"),devices:_.map(e.devices,"id"),dashboards:_.map(e.dashboards,"id"),binaries:_.map(e.binaries,"id"),kpis:_.map(e.kpis,"id"),smartRules:_.map(e.smartRules,"id")}}function S(e){return i.save(e)}function w(){return v().then(function(t){return e.all(_.flatten([_.map(t.siteGroups,T),_.map(t.buildingGroups,T),_.map(t.simulators,C),_.map(t.devices,x),_.map(t.dashboards,z),_.map(t.binaries,R),_.map(t.kpis,A),_.map(t.smartRules,D),t])).then(_.flatten).then(_.compact).catch(console.error)})}function T(e){return o.detail(e,{},{silentError:!0}).then(n.getResData,_.constant())}function C(e){return s.detail(e)}function x(e){return c.detail(e).then(n.getResData)}function z(e){return i.detail(e).then(n.getResData)}function R(e){return u.detail(e).then(n.getResData)}function A(e){return m.detail(e).then(n.getResData)}function D(e){return d.detail(e)}function k(t){var n=!0,r={siteGroups:[],buildingGroups:[],simulators:[],devices:[],dashboards:[],binaries:[],kpis:[],smartRules:[]},a=[I(r),L(r),$(r),j(r),oe(r),ne(r,t)],i=_.reduce(a,function(e,t){return e.then(function(){return t.execute.apply(t)}).then(function(){t.completed=!0})},e.resolve()).then(function(){return f(r)}).then(function(){o.success=!0}).catch(function(e){o.failed=!0,o.errorMessage=e,we(b(r))}).finally(function(){o.inProgress=!1}),o={inProgress:n,success:!1,failed:!1,demoObjects:r,steps:a,completed:i};return o}function I(e){return{label:h.getPlural(ze,"Create top level Site group","Create top level Site groups",{}),execute:function(){return M().then(function(t){e.siteGroups=t})}}}function M(){var t=[];return _.reduce(N(),function(e,n){return e.then(function(){return P(n).then(function(e){t.push(e)})})},e.resolve()).then(_.constant(t))}function N(){return _.range(ze).map(function(e){return h.getString("Site {{number}}",{number:e+1})})}function P(e){return o.create({name:e}).then(n.getResData)}function L(e){return{label:h.getPlural(Re,"Create Building subgroup","Create Building subgroups",{}),execute:function(){return E(e.siteGroups).then(function(t){e.buildingGroups=t})}}}function E(t){var n=[];return _.reduce(t,function(e,t){return e.then(function(){return O(t).then(function(e){n.push(e)})})},e.resolve()).then(function(){return _.flatten(n)})}function O(t){var n=[];return _.reduce(G(),function(e,r){return e.then(function(){return U(r).then(function(e){return n.push(e),i.addChildAsset(t,e)})})},e.resolve()).then(_.constant(n))}function G(){return _.range(Re).map(function(e){return h.getString("Building {{number}}",{number:e+1})})}function U(e){return o.createSubgroup({name:e}).then(n.getResData)}function j(e){return{label:h.getString("Add Overview dashboards for buildings"),execute:function(){return V().then(function(t){return e.binaries.push(t),F(e,t)}).then(function(t){e.dashboards.push.apply(e.dashboards,t)}).catch(console.error)}}}function V(){return ce("building-test.svg").then(u.upload).then(n.getResData)}function F(t,n){var r=[];return _.reduce(t.buildingGroups,function(e,t){return e.then(function(){return H(t,n).then(function(e){r.push(e)})})},e.resolve()).then(_.constant(r))}function H(e,t){var n,r={},a={name:g("Overview"),icon:"bookmark",global:!0,priority:1e4,creationContext:e,children:r};return B(e,t).then(function(t){return r[t.id]=t,l.save(a).then(function(t){return n=t,l.groupAdd(e,t)}).then(function(){return n})})}function B(e,t){return i.childAssets(e).then(function(n){return{id:"scada",name:"SCADA",title:"SCADA",config:{device:{name:e.name,id:e.id},deviceIds:{device1Id:n[0].id,device1Name:n[0].id,device1AlarmStatus:n[0].id,device1Measurement:n[0].id,device2Id:n[1].id,device2Name:n[1].id,device2AlarmStatus:n[1].id,device2Measurement:n[1].id,device3Id:n[2].id,device3Name:n[2].id,device3AlarmStatus:n[2].id,device3Measurement:n[2].id},binaryId:t.id,mapping:{device1Id:{id:"c8ySchema!!id",label:"Id",type:"string",keyPath:["id"]},device1Name:{id:"c8ySchema!!name",label:"Name",type:"string",keyPath:["name"]},device1AlarmStatus:{id:"c8ySchema!!c8y_ActiveAlarmsStatus",label:"Active alarms status",type:"object",printFormat:"hidden",keyPath:["c8y_ActiveAlarmsStatus"]},device1Measurement:{id:"c8ySchema!!lastMeasurement",label:"Last measurement",type:"string",computed:!0,configSchema:!0,keyPath:["lastMeasurement_14130876143351778"],config:{_id:"14130876143351778",dp:[{_id:"26840184072968243",label:"c8y_Temperature => T",fragment:"c8y_Temperature",series:"T",unit:"°C",color:"#124257",lineType:"line",renderType:"min",__active:!0,__target:{name:"demoName",id:"demoId"}}],resultType:2}},device2Id:{id:"c8ySchema!!id",label:"Id",type:"string",keyPath:["id"]},device2Name:{id:"c8ySchema!!name",label:"Name",type:"string",keyPath:["name"]},device2AlarmStatus:{id:"c8ySchema!!c8y_ActiveAlarmsStatus",label:"Active alarms status",type:"object",printFormat:"hidden",keyPath:["c8y_ActiveAlarmsStatus"]},device2Measurement:{id:"c8ySchema!!lastMeasurement",label:"Last measurement",type:"string",computed:!0,configSchema:!0,keyPath:["lastMeasurement_14130876143351778"],config:{_id:"14130876143351778",dp:[{_id:"26840184072968243",label:"c8y_Temperature => T",fragment:"c8y_Temperature",series:"T",unit:"°C",color:"#124257",lineType:"line",renderType:"min",__active:!0,__target:{name:"demoName",id:"demoId"}}],resultType:2}},device3Id:{id:"c8ySchema!!id",label:"Id",type:"string",keyPath:["id"]},device3Name:{id:"c8ySchema!!name",label:"Name",type:"string",keyPath:["name"]},device3AlarmStatus:{id:"c8ySchema!!c8y_ActiveAlarmsStatus",label:"Active alarms status",type:"object",printFormat:"hidden",keyPath:["c8y_ActiveAlarmsStatus"]},device3Measurement:{id:"c8ySchema!!lastMeasurement",label:"Last measurement",type:"string",computed:!0,configSchema:!0,keyPath:["lastMeasurement_14130876143351778"],config:{_id:"14130876143351778",dp:[{_id:"26840184072968243",label:"c8y_Temperature => T",fragment:"c8y_Temperature",series:"T",unit:"°C",color:"#124257",lineType:"line",renderType:"min",__active:!0,__target:{name:"demoName",id:"demoId"}}],resultType:2}}}},_x:0,_y:0,_width:12,_height:10}})}function $(e){return{label:g("Create simulated devices"),execute:function(){return W(e.buildingGroups).then(function(t){e.simulators=t.simulators,e.devices=t.devices})}}}function W(t){var n=[],r=[];return _.reduce(t,function(e,t){return e.then(function(){return q(t).then(function(e){n.push(e.simulators),r.push(e.devices)})})},e.resolve()).then(function(){return{simulators:_.flatten(n),devices:_.flatten(r)}})}function q(n){var r=[],a=[];return _.reduce(K(),function(e,t){return e.then(function(){return s.create(Q(t)).then(function(e){return r.push(e),e}).then(s.run)})},e.resolve()).then(function(){var n=e.defer();return t(n.resolve,5e3),n.promise}).then(function(){var e={__filter:{"c8y_Hardware.model":{__eq:"c8y_DemoDevice"}}},t={withParents:!0};return c.listQuery(e,t)}).then(function(e){return _.filter(e,function(e){return 0===e.assetParents.references.length})}).then(function(e){a=e}).then(function(){return _.reduce(a,function(e,t){return e.then(function(){return i.addChildAsset(n,t)}).then(function(){return i.save({id:t.id,type:t.c8y_Hardware.model,name:h.getString("Pump {{number}}",{number:t.c8y_Hardware.revision.match(/\d+/)[0]})})})},e.resolve())}).then(function(){return{simulators:_.flatten(r),devices:_.flatten(a)}})}function K(){return _.range(Ae).map(function(e){return h.getString("Simulator {{number}}",{number:e+1})})}function Q(e){return{name:e,instances:1,state:"PAUSED",commandQueue:Z(e)}}function Z(e){var t=[],n=Y(e),r=J();t.push(n);for(var a=0;a<_.max(_.map(r,"length"));a++)t.push(_.map(r,_.property(a))),t.push(te());return _.compact(_.flattenDeep(t))}function Y(e){var t="",n="c8y_DemoDevice",r=e;return{type:"builtin",messageId:"110",values:[t,n,r]}}function J(){return _.map(ke,X)}function X(e){return ee(e,e.normalValuesRange)}function ee(e,t){var n=_.random(0,2*Math.PI),r=.1,a=_.range(n,2*Math.PI+n,r).map(function(e){return(Math.sin(e)+1)/2}).map(function(e){return Math.floor(e*(t.max-t.min)+t.min)});return _.map(a,function(t){return{type:"builtin",messageId:"200",values:[e.type,e.series,t,e.unit]}})}function te(){return{type:"sleep",seconds:5}}function ne(e,t){return{label:g("Configure smart rules"),execute:function(){return re(e.buildingGroups,t).then(function(t){e.kpis=t.kpis,e.smartRules=t.rules})}}}function re(t,r){var a=[],i=[];return _.reduce(t,function(t,o){return t.then(function(){return e.all(_.map(Ie,function(t){var s=t.ruleTemplateName,c=ie(o),u=d.getEmpty({context:"group",id:o.id});u.name=t.name,u.config=t.config,"onAlarmSendEmail"===s&&(u.config.to=r.email),"onAlarmSendSms"===s&&(u.config.to=r.phone);var l=e.resolve(u);if("thresholdSmartRule"===s){var p={c8y_Kpi:{label:h.getString("Data point: {{config.fragment}} => {{config.series}}",t),fragment:t.config.fragment,series:t.config.series,yellowRangeMin:t.kpi.yellowRangeMin,yellowRangeMax:t.kpi.yellowRangeMax,redRangeMin:t.kpi.redRangeMin,redRangeMax:t.kpi.redRangeMax}};l=l.then(function(){return m.save(p)}).then(n.getResData).then(function(e){return u.config.kpiId=e.id,a.push(e),u})}return l.then(_.partial(ae,t)).then(function(e){return d.save(u,e,c)}).then(function(e){i.push(e)})}))})},e.resolve()).then(function(){return{kpis:a,rules:i}})}function ae(e){return p.getTemplateByName(e.ruleTemplateName)}function ie(e){return{mo:e,withChildren:{assets:!0,devices:!1}}}function oe(e){return{label:h.getString("Add Overview dashboards for simulated devices"),execute:function(){return se().then(function(t){return e.binaries.push(t),ue(t)}).then(i.create).then(n.getResData).then(function(t){e.dashboards.push(t)})}}}function se(){return ce("pump-test.svg").then(u.upload).then(n.getResData)}function ce(t,n){var r=e.defer(),a=new XMLHttpRequest,i="core_demo/resources/"+t,o=n||"image/svg";return a.open("GET",i,!0),_.assign(a,{responseType:"arraybuffer",onload:function(){if(200===a.status){var e=new Blob([a.response],{type:o});e.name=t,r.resolve(e)}else r.reject(a)}}),a.send(),r.promise}function ue(e){var t={},n={c8y_Global:{},"c8y_Dashboard!type!c8y_DemoDevice":{},c8y_Dashboard:{global:!0,deviceType:!0,deviceTypeValue:"c8y_DemoDevice",icon:"bookmark",name:g("Overview"),priority:1e4,children:t}},r=[le(e),ye(),ve(),fe()];return _.each(r,function(e){t[e.id]=e}),n}function le(e){return{id:"scada",name:"SCADA",title:"SCADA",config:{binaryId:e.id,mapping:{name:me(),alarmStatus:de(),measurementIn:pe("c8y_Temperature","T","°C"),measurementOut:pe("c8y_Temperature","T","°C"),measurementBelow:pe("c8y_Temperature","T","°C")}},_x:0,_y:0,_width:5,_height:5}}function me(){return{id:"c8ySchema!!name",label:"Name",type:"string",keyPath:["name"]}}function de(){return{id:"c8ySchema!!c8y_ActiveAlarmsStatus",label:"Active alarms status",type:"object",printFormat:"hidden",keyPath:["c8y_ActiveAlarmsStatus"]}}function pe(e,t,n){var r=ge();return{id:"c8ySchema!!lastMeasurement",label:"Last measurement",type:"string",computed:!0,configSchema:!0,keyPath:["lastMeasurement_"+r],config:{_id:r,dp:[{_id:ge(),label:e+" => "+t,fragment:e,series:t,unit:n,color:he(),lineType:"line",renderType:"min",__active:!0,__target:{name:"demoName",id:"demoId"}}],resultType:2}}}function ge(){return String(Math.random()).substr(2)}function he(){return"#"+Math.random().toString(16).substr(-6)}function ye(){return{id:"alarmsList",name:"Alarm list",title:g("Active alarms"),translateTitle:!0,config:{options:{orderMode:"ACTIVE_FIRST",severity:{CRITICAL:!0,MAJOR:!0,MINOR:!0,WARNING:!0},status:{ACTIVE:!0,ACKNOWLEDGED:!1,CLEARED:!1},types:[]}},_x:9,_y:0,_width:3,_height:5}}function ve(){return{id:"dataPointsGraph",name:"Data points graph",title:g("Measurements"),translateTitle:!0,config:{interval:"hours",aggregation:"NONE",realtime:!0,datapoints:[{fragment:"c8y_Temperature",series:"T",label:h.getString("Temperature"),unit:"°C",renderType:"min",lineType:"line",color:"#5e07b3",__active:!0}],alarmsEventsConfigs:[{label:"c8y_VeryHighTemperature",timelineType:"ALARM",color:"#6f6cd0",filters:{type:"c8y_VeryHighTemperature"},__active:!0},{label:"c8y_HighTemperature",timelineType:"ALARM",color:"#375bf2",filters:{type:"c8y_HighTemperature"},__active:!0}]},_x:0,_y:5,_width:12,_height:5}}function fe(){return{id:"radialGauge",name:"KPI Radial Gauge",title:g("Radial gauge"),translateTitle:!0,config:{kpi:{label:"Temperature",fragment:"c8y_Temperature",series:"T",min:0,max:125,yellowRangeMin:80,yellowRangeMax:100,redRangeMin:100,redRangeMax:125}},_x:5,_y:0,_width:4,_height:5}}function be(e,t,n,r){var a=_.find(ke,{type:t,series:n}),i=ee(a,a[r]);return s.detail(e).then(function(e){var r=0;return _.each(e.commandQueue,function(e){var a=200===_.toNumber(_.get(e,"messageId")),o=_.get(e,"values[0]")===t,s=_.get(e,"values[1]")===n;a&&o&&s&&(_.assign(e,i[r%i.length]),r++)}),s.save(e)}).then(s.pause).then(s.run).then(function(){return Ce(e)}).catch(console.error)}function _e(e,t,n,r){return s.detail(e).then(function(e){return _.each(e.commandQueue,function(e){var a=200===_.toNumber(_.get(e,"messageId")),i=_.get(e,"values[0]")===t,o=_.get(e,"values[1]")===n;a&&i&&o&&(e.values[2]=_.toNumber(e.values[2])+r)}),s.save(e)}).then(s.pause).then(s.run).then(function(){return Ce(e)}).catch(console.error)}function Se(){return v().then(we).then(i.remove)}function we(t){return e.when(t).then(function(e){return Te(e,e.kpis,m.remove)}).then(function(e){return Te(e,e.smartRules,function(e){return d.detail(e).then(function(e){return _.unset(e,"c8y_Context"),e}).then(d.remove)})}).then(function(e){return Te(e,e.binaries,u.removeBinary)}).then(function(e){return Te(e,e.dashboards,i.remove)}).then(function(e){return Te(e,e.devices,c.remove)}).then(function(e){return Te(e,e.simulators,s.remove)}).then(function(e){return Te(e,e.buildingGroups,i.remove)}).then(function(e){return Te(e,e.siteGroups,i.remove)})}function Te(t,n,r){return _.reduce(n,function(e,t){return e.then(function(){return r(t)})},e.resolve()).then(_.constant(t))}function Ce(e){return a.getExternalId({type:"c8y_Serial",externalId:"simulator_"+e+"_0"}).then(n.getResData).then(_.property("managedObject")).then(c.detail).then(n.getResData)}var xe=["ROLE_INVENTORY_READ","ROLE_INVENTORY_ADMIN","ROLE_SIMULATOR_ADMIN","ROLE_SMARTRULE_READ","ROLE_SMARTRULE_ADMIN"],ze=1,Re=3,Ae=3,De="c8y_DemoStatus",ke=[{type:"c8y_Temperature",series:"T",unit:"°C",normalValuesRange:{min:0,max:100},errorValuesRange:{min:100,max:125}}],Ie=[{name:h.getString("On high temperature raise alarms"),ruleTemplateName:"thresholdSmartRule",kpi:{yellowRangeMin:80,yellowRangeMax:100,redRangeMin:100,redRangeMax:125},config:{fragment:"c8y_Temperature",series:"T",alarmType:"c8y_HighTemperature",alarmText:h.getString("Temperature is higher than expected.")}},{name:h.getString("On very high temperature raise alarms"),ruleTemplateName:"explicitThresholdSmartRule",config:{fragment:"c8y_Temperature",series:"T",alarmType:"c8y_VeryHighTemperature",alarmText:h.getString("Temperature is much higher than expected."),explicitVariant:!0,redRangeMin:100,redRangeMax:125}},{name:h.getString("On very high temperature send e-mail"),ruleTemplateName:"onAlarmSendEmail",config:{alarmType:"c8y_VeryHighTemperature",subject:h.getString("Very high temperature detected!"),text:h.getString("Temperature on device #{source.name} (id: #{source.id}) is much higher than expected.")}},{name:h.getString("On very high temperature send SMS"),ruleTemplateName:"onAlarmSendSms",config:{alarmType:"c8y_VeryHighTemperature",text:h.getString("Caution! Temperature on device #{source.name} (id: #{source.id}) is much higher than expected.")}}];return{checkPermissions:y,getDemoStatus:v,saveDemoStatus:S,getDemoObjectsList:w,setup:k,replaceMeasurementValues:be,increaseMeasurementValues:_e,cleanUp:Se}}e.$inject=["$q","$timeout","c8yBase","c8yPermissions","c8yIdentity","c8yInventory","c8yDeviceGroup","c8ySimulators","c8yDevices","c8yBinary","dashboardSvc","c8yKpi","smartRulesSvc","smartRuleTemplatesSvc","gettext","gettextCatalog"],angular.module("c8y.demo").factory("c8yDemo",e)}(),function(){"use strict";function e(e){var t;t='<div>\r\n  <div class="modal-body text-center" style="position:relative; height: 85px">\r\n    <div ng-show="!vm.inProgress">\r\n      <p class="lead" style="margin:0" translate>\r\n        Do you really want to remove demo data?\r\n      </p>\r\n      <p>\r\n        <small class="text-muted" translate>\r\n          The following items will be permanently removed:\r\n        </small>\r\n      </p>\r\n    </div>\r\n        <c8y-rectangle-spinner ng-show="vm.inProgress" message="\'Removing items&hellip;\' | translate">\r\n        </c8y-rectangle-spinner>\r\n  </div>\r\n  <hr style="margin-top:0; margin-bottom:0">\r\n\r\n  <div class="modal-inner-scroll" style="min-height: 215px; max-height: calc(100vh - 425px)">\r\n    <c8y-rectangle-spinner class="top-m" ng-show="!vm.demoObjectsList" message="\'Loading the list of items to remove&hellip;\' | translate">\r\n    </c8y-rectangle-spinner>\r\n\r\n    <div class="list-group">\r\n      <div class="list-group-item flex-row" ng-repeat="demoObject in vm.demoObjectsList">\r\n        <div class="list-item-icon">\r\n          <i c8y-icon="{{::vm.getIcon(demoObject)}}"></i>\r\n        </div>\r\n        <div class="list-item-body">\r\n          {{::vm.getLabel(demoObject)}}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="c8y-wizard-footer modal-footer">\r\n    <button class="btn btn-default" ng-disabled="vm.inProgress" ng-click="vm.wizardCtrl.dismiss()" translate>\r\n      Cancel\r\n    </button>\r\n    <button class="btn btn-primary" ng-disabled="!vm.demoObjectsList || vm.inProgress" ng-click="vm.cleanUp()" translate>\r\n      Clean up\r\n    </button>\r\n  </div>\r\n</div>\r\n',e.put("demo/demo-clean-up-wizard/demo-clean-up-confirmation-step.html",t),e.put("core_demo/demo-clean-up-wizard/demo-clean-up-confirmation-step.html",t),e.put("/apps/core/demo/demo-clean-up-wizard/demo-clean-up-confirmation-step.html",t),t='<div class="modal-inner-scroll bg-complementary" style="min-height: 215px">\r\n  <div class="modal-body">\r\n    <div class="text-center">\r\n      <h1 class="text-white" style="font-size:4em; margin-top: 30px">\r\n        <i c8y-icon="check-circle"></i>\r\n      </h1>\r\n      <p class="lead text-white" style="margin-bottom:0">\r\n        <strong translate>\r\n          Demo data removed successfully!\r\n        </strong>\r\n      </p>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="c8y-wizard-footer">\r\n  <button class="btn btn-default" ng-click="vm.wizardCtrl.close()" translate>\r\n    Close\r\n  </button>\r\n</div>\r\n',e.put("demo/demo-clean-up-wizard/demo-clean-up-result-step.html",t),e.put("core_demo/demo-clean-up-wizard/demo-clean-up-result-step.html",t),e.put("/apps/core/demo/demo-clean-up-wizard/demo-clean-up-result-step.html",t),t='<c8y-wizard on-dismiss="vm.modalInstance.dismiss()" on-close="vm.modalInstance.close()">\r\n  <header>\r\n    <div style="font-size: 62px">\r\n      <span class="c8y-icon c8y-icon-rocket"></span>\r\n    </div>\r\n    <h4 class="text-uppercase" style="margin:0; letter-spacing: 0.15em" translate>\r\n      Clean up IIoT demo\r\n    </h4>\r\n  </header>\r\n  <steps>\r\n    <c8y-wizard-step step-id="confirmation">\r\n      <c8y-demo-clean-up-confirmation-step></c8y-demo-clean-up-confirmation-step>\r\n    </c8y-wizard-step>\r\n    <c8y-wizard-step step-id="result">\r\n      <c8y-demo-clean-up-result-step></c8y-demo-clean-up-result-step>\r\n    </c8y-wizard-step>\r\n  </steps>\r\n</c8y-wizard>\r\n',e.put("demo/demo-clean-up-wizard/demo-clean-up-wizard.html",t),e.put("core_demo/demo-clean-up-wizard/demo-clean-up-wizard.html",t),e.put("/apps/core/demo/demo-clean-up-wizard/demo-clean-up-wizard.html",t),t='<div>\n  <div class="modal-body text-center">\n    <p class="lead" style="margin:0" translate>\n      This wizard will set up groups hierarchy, create simulated devices, configure dashboards and smart rules.\n    </p>\n  </div>\n\n  <div class="modal-inner-scroll">\n    <form name="demoForm" class="modal-body bg-gray-lighter">\n      <p class="bottom-m-sm text-center" translate>\n        The following contact information will be used.\n      </p>\n      <div class="form-group">\n        <label translate>E-mail</label>\n        <input type="email" name="email" class="form-control" ng-model="vm.wizardCtrl.data.email" placeholder="{{\'e.g. demo@example.com\' | translate}}" ng-maxlength="254" c8y-autocomplete="off" autofocus placeholder="{{\'e.g. joe.doe@example.com\' | translate}}" required>\n        <c8y-error-feedback field="demoForm.email"></c8y-error-feedback>\n      </div>\n      <div class="form-group">\n        <label translate>Mobile phone number</label>\n        <input type="text" name="phone" class="form-control" ng-model="vm.wizardCtrl.data.phone" placeholder="{{\'e.g. +49 9 876 543 210\' | translate}}" ng-maxlength="254" c8y-phone-number c8y-autocomplete="off" required>\n        <c8y-error-feedback field="demoForm.phone"></c8y-error-feedback>\n      </div>\n    </form>\n  </div>\n\n  <div class="c8y-wizard-footer modal-footer">\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.dismiss()" translate>\n      Cancel\n    </button>\n    <button class="btn btn-primary" ng-disabled="demoForm.$invalid" ng-click="vm.setup()" translate>\n      Set up\n    </button>\n  </div>\n</div>\n',e.put("demo/demo-setup-wizard/demo-setup-prepare.html",t),e.put("core_demo/demo-setup-wizard/demo-setup-prepare.html",t),e.put("/apps/core/demo/demo-setup-wizard/demo-setup-prepare.html",t),t='<div class="modal-inner-scroll" style="min-height: 215px">\n  <div class="result-message" ng-show="vm.wizardCtrl.data.progressSummary.failed">\n    <div class="bg-dark-danger text-center" style="height: 215px">\n      <br>\n      <span style="font-size: 46px">\n        <i c8y-icon="exclamation-triangle"></i>\n      </span>\n      <span class="lead" style="vertical-align: text-bottom" translate>\n        Error has occurred!\n      </span>\n      <p translate>The following error has occurred:</p>\n      <p><em>{{vm.wizardCtrl.data.progressSummary.errorMessage | translate}}</em></p>\n    </div>\n  </div>\n  <div ng-show="!vm.wizardCtrl.data.progressSummary.failed" class="modal-body text-center" ng-class="{\'bg-complementary\': vm.wizardCtrl.data.progressSummary.success}">\n    <div class="text-white" style="font-size:4em; position: relative; height: 63px; margin-top: -9px">\n      <i c8y-icon="check-circle" ng-show="vm.wizardCtrl.data.progressSummary.success"></i>\n      <c8y-rectangle-spinner ng-show="vm.wizardCtrl.data.progressSummary.inProgress" message="\'Processing…\' | translate">\n      </c8y-rectangle-spinner>\n    </div>\n\n    <p class="lead text-white" ng-show="vm.wizardCtrl.data.progressSummary.success" style="margin-bottom:0">\n      <strong translate>\n        Demo data created!\n      </strong>\n    </p>\n  </div>\n\n  <div class="list-group" ng-show="!vm.wizardCtrl.data.progressSummary.failed">\n    <div class="list-group-item flex-row" ng-repeat="step in vm.wizardCtrl.data.progressSummary.steps" ng-class="{\'text-complementary\': vm.getStepStatusIcon(step) === \'check\'}">\n      <div class="list-item-icon">\n        <i c8y-icon="{{vm.getStepStatusIcon(step)}}" ng-class="{\'fa-spin text-muted\': vm.getStepStatusIcon(step) === \'circle-o-notch\'}"></i>\n      </div>\n      <div class="list-item-body">\n        {{::step.label | translate}}\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="c8y-wizard-footer">\n  <button class="btn btn-default" ng-disabled="vm.wizardCtrl.data.progressSummary.inProgress" ng-click="vm.wizardCtrl.close()" translate>\n    Close\n  </button>\n  <button class="btn btn-primary" ng-show="vm.wizardCtrl.data.progressSummary.failed" ng-click="vm.wizardCtrl.goTo(\'prepare\')" translate>\n    Retry\n  </button>\n</div>\n',e.put("demo/demo-setup-wizard/demo-setup-progress-summary.html",t),e.put("core_demo/demo-setup-wizard/demo-setup-progress-summary.html",t),e.put("/apps/core/demo/demo-setup-wizard/demo-setup-progress-summary.html",t),t='<c8y-wizard on-dismiss="vm.modalInstance.dismiss()" on-close="vm.modalInstance.close()">\n  <header>\n    <div style="font-size: 62px">\n      <span class="c8y-icon c8y-icon-rocket"></span>\n    </div>\n    <h4 class="text-uppercase" style="margin:0; letter-spacing: 0.15em" translate>\n      Create IIoT demo\n    </h4>\n  </header>\n  <steps>\n    <c8y-wizard-step step-id="prepare">\n      <c8y-demo-setup-prepare></c8y-demo-setup-prepare>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="progress-summary">\n      <c8y-demo-setup-progress-summary></c8y-demo-setup-progress-summary>\n    </c8y-wizard-step>\n  </steps>\n</c8y-wizard>\n',e.put("demo/demo-setup-wizard/demo-setup-wizard.html",t),e.put("core_demo/demo-setup-wizard/demo-setup-wizard.html",t),e.put("/apps/core/demo/demo-setup-wizard/demo-setup-wizard.html",t),t='<div class="card-group-block">\n  <div class="col-md-8 col-xs-12 bg-primary edition-promo" style="padding-top: 40px">\n    <div class="row">\n\n      <div class="col-sm-2 col-xs-12">\n        <div class="edition-icon">\n          <i c8y-icon="c8y-rocket"></i>\n        </div>\n      </div>\n\n      <div class="col-sm-8 col-xs-12" style="min-height: 164px">\n        <h1 class="edition-name" style="padding-top: 30px" translate>\n          Set up demo\n        </h1>\n        <p class="lead" translate>\n          Allows user to setup groups hierarchy, simulators, dashboards and smart rules\n          in a tenant and simulate both normal and error conditions.\n        </p>\n      </div>\n\n      <div class="col-xs-12" style="padding:0">\n        <svg class="img-responsive" viewBox="0 0 800 73" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n          <g id="clouds" transform="translate(0.000000, -8.000000)" fill-rule="nonzero" fill="#FFFFFF">\n            <path d="M150,29.5010406 C150,29.5010406 241.723942,-4.83292734 337.05605,15.363583 C502.3092,50.3710004 579.247784,13.4189478 650.500513,10.6524254 C754.500342,6.61172864 800,26.8092352 800,26.8092352 L800,81 L150,81 L150,29.5010406 Z" id="Shape" opacity="0.6"></path>\n            <path d="M0,23.0191205 C0,23.0191205 54.9127085,10.0740109 85.8483671,8.8815833 C138.217109,6.86300867 160.06201,35.8114919 209.096484,29.0659678 C225.550207,26.8024789 261.108016,16.8919326 280.464078,17.2980031 C329.186903,18.3201582 349.76158,42.8900856 400,40.5 C450.23842,38.1099144 480.881822,11.8815833 550.528908,11.8815833 C620.175993,11.8815833 641.450101,36.6673122 693.671858,40.5 C772.846687,46.3108425 749.423524,15.8736904 800,40.7671534 L800,77.5183701 L0,74.5183701 L0,23.0191205 Z" id="Shape" opacity="0.6"></path>\n            <path d="M152.16802,78.2830378 C152.16802,78.2830378 255.401264,9 385.503844,9 C526.373829,9 595,77.2648052 595,77.2648052 L595,81 L150,81 L152.16802,78.2830378 Z" id="Shape" opacity="0.7"></path>\n            <path d="M0,40.3029137 C7.94920217e-13,40.3029137 58.5546218,24.8045817 129.298917,24.8045817 C200.043213,24.8045817 227.524978,44.9014568 263.130219,44.9014568 C298.735459,44.9014568 354.013237,23.6582044 388.528971,24.8045817 C423.044704,25.950959 474.684141,49.6927067 531.261582,49.6927067 C587.839022,49.6927067 645.956957,24.4399269 677.430058,24.8045817 C766.681365,25.8386683 800,53.3213433 800,53.3213433 L800,80.8029137 L1.05119385e-12,80.8029137 L0,40.3029137 Z" id="Shape"></path>\n          </g>\n        </svg>\n        <div class="clearfix" style="background-color: white; color:#333; margin-top: -10px; padding-bottom: 15px">\n          <div class="col-sm-6">\n            <button type="button" class="btn btn-success btn-lg bottom-m-sm" ng-disabled="!vm.allowed || vm.demoStatus" ng-click="vm.setupDemo()" style="min-width: 140px" translate>\n              Create IIoT demo\n            </button>\n          </div>\n          <div class="col-sm-6">\n            <button type="button" class="btn btn-default" ng-disabled="!vm.allowed || !vm.demoStatus" ng-click="vm.cleanUpDemo()" style="min-width: 140px" translate>\n              Clean up\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="col-md-4 col-xs-12 text-center card-total card">\n      <div class="card-block">\n        <h1 style="font-size: 62px"><i c8y-icon="c8y-simulator" class="c8y-icon-duocolor"></i></h1>\n        <h3 class="card-title top-m bottom-m" translate>Control demo</h3>\n        <button type="button" class="btn btn-default btn-block" ng-disabled="!vm.allowed || !vm.demoStatus || vm.demoStatus.errorConditionsEnabled" ng-click="vm.triggerErrorConditions()" translate>\n          Create error situation\n        </button>\n        <button type="button" class="btn btn-default btn-block" ng-disabled="!vm.allowed || !vm.demoStatus || !vm.demoStatus.errorConditionsEnabled" ng-click="vm.clearErrorConditions()" translate>\n          Clear error situation\n        </button>\n        <button type="button" class="btn btn-default btn-block" ng-disabled="!vm.allowed || !vm.demoStatus" ng-click="vm.increaseTemperature()" translate>\n          Increase temperature\n        </button>\n        <button type="button" class="btn btn-default btn-block" ng-disabled="!vm.allowed || !vm.demoStatus" ng-click="vm.decreaseTemperature()" translate>\n          Decrease temperature\n        </button>\n      </div>\n    </div>\n</div>\n',
e.put("demo/demo.html",t),e.put("core_demo/demo.html",t),e.put("/apps/core/demo/demo.html",t)}angular.module("c8y.demo").run(["$templateCache",e])}();