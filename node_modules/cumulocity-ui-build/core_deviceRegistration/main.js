/* core_deviceRegistration 9.12.5 2018-08-27T16:54:02+00:00 b689bea882f7+ (release/9.12.0) tip */
!function(){"use strict";function e(e,t,i){e.addNavigation({parent:i("Devices"),name:i("Registration"),priority:3e3,path:"deviceregistration",icon:"c8y-device-connect",showIfPermissions:{anyRole:["ROLE_DEVICE_CONTROL_ADMIN","ROLE_DEVICE_CONTROL_READ"]}}),t.when("/deviceregistration",{template:"<c8y-device-registration></c8y-device-registration>"})}e.$inject=["c8yNavigatorProvider","c8yViewsProvider","gettext"],angular.module("c8y.deviceRegistration",[]).config(e)}(),function(){"use strict";function e(e,t,i,n,s,a,r,o,c,l,d,g){function u(){e.refresh=w,e.loadNext=b,T(!1),e.$watch("vm.newDeviceRequests.length",A),v(),p(),S(),m(),z(),A()}function v(){i.isCurrentUserTopTenant().then(function(e){U.isTopTenant=e})}function p(){r.getLimitStatus().then(function(e){U.limitStatus=e})}function m(e){return r.list(e).then(f)}function f(t){h(),R(t,y()),e.paging=t.paging}function h(){U.newDeviceRequests||(U.newDeviceRequests=[])}function y(){return _.map(U.newDeviceRequests,"id")}function R(e,t){e.forEach(function(e){_.includes(t,e.id)||"c8y_DataBroker"===e.type||U.newDeviceRequests.push(e)})}function b(){e.paging.loading=!0,e.paging.next().then(f).finally(function(){e.paging.loading=!1})}function w(){U.newDeviceRequests=null,U.refreshLoading=!0,e.paging.refresh().then(f).then(p).finally(function(){U.refreshLoading=!1}),e.paging=null}function z(){o.addListener(e.$id,"/bootstrap",o.realtimeActions().UPDATE,D),o.start(e.$id,"/bootstrap"),e.$on("$destroy",function(){o.stop(e.$id,"/bootstrap")})}function D(e,t){U.newDeviceRequests.forEach(function(e){e.id===t.id&&(e.status=t.status,c.success(d("New device has been connected!")))})}function S(){U.newDevice?U.newDevice.id=null:U.newDevice={id:null}}function C(e){r.accept(e).then(function(){k(e),c.success(d("Device has been accepted!"))}).then(p)}function k(e){_.set(e,"status",r.status.ACCEPTED)}function x(e){s({title:d("Confirm delete"),size:"sm",labels:{ok:d("Remove"),cancel:d("Cancel")},body:g.getString("Do you really want to remove registration request for device ID {{id}}?",e),status:"danger"}).then(function(){return r.cancel(e)}).then(function(){I(e),c.success(d("Device registration request has been removed!"))}).then(p)}function I(e){_.remove(U.newDeviceRequests,e)}function A(e){l.changeTitle({title:d("Device registration"),subtitle:g.getPlural(e,"1 new device","{{$count}} new devices",{})})}function T(e){U.isBulk=e,U.registerType=e?"Bulk":"Single"}function E(){return a.open({component:"deviceRegistrationWizard",backdrop:"static",keyboard:!1}).result.then(w)}function F(){return _.some(U.newDeviceRequests,W)}function W(e){var t=e.status;return t===r.status.PENDING_ACCEPTANCE}function $(){var e=d("Accepting all pending device registrations"),t=_.filter(U.newDeviceRequests,W),i=_.map(t,function(e){return function(){return r.accept(e).then(function(){return k(e)})}});return n.run(i,e)}var U=this;_.assign(U,{$onInit:u,setBulk:T,statusIcon:r.statusIcon,statusClass:r.statusClass,newDeviceRequestsStatus:r.status,onClickAccept:C,onClickCancel:x,addWithWizard:E,canAcceptAll:F,acceptAll:$})}e.$inject=["$scope","$timeout","c8yTenant","c8yBatchOp","c8yModal","c8yWizardModal","c8yDeviceRegistration","c8yRealtime","c8yAlert","c8yTitle","gettext","gettextCatalog"],angular.module("c8y.deviceRegistration").component("c8yDeviceRegistration",{templateUrl:"core_deviceRegistration/deviceRegistration.html",controller:e,controllerAs:"vm"})}(),function(){"use strict";angular.module("c8y.deviceRegistration").component("deviceRegistrationWizard",{templateUrl:"core_deviceRegistration/deviceRegistrationWizard/deviceRegistrationWizard.html",bindings:{modalInstance:"<",resolve:"<"},controllerAs:"vm"})}(),function(){"use strict";function e(e,t){function i(){o=e(function(){var e=_.get(r,"wizardCtrl.data.providers",[]);e.length&&(r.providers=e,_.assign(r.wizardCtrl.data,{providersAvailable:e}),n())},100)}function n(){o&&e.cancel(o)}function s(){i()}function a(e){r.wizardCtrl.goTo(e),r.wizardCtrl.setFlowFromStepIds(t.getRegisteredFlow(e))}var r=this,o=void 0;_.assign(r,{providers:[],$onInit:s,$onDestroy:n,goTo:a})}e.$inject=["$interval","deviceRegistrationFlows"],angular.module("c8y.deviceRegistration").component("providersListSelectionStep",{templateUrl:"core_deviceRegistration/deviceRegistrationWizard/providersListSelectionStep.html",controllerAs:"vm",require:{wizardCtrl:"^c8yWizardStep"},bindings:{backStep:"@?"},controller:e})}(),function(){"use strict";function e(e,t,i,n,s,a){function r(){t.listAvailable().then(function(t){var s=_.map(t,function(e){return e.registrationCfg=e.registrationCfg||{},n.configureVisibility(e.registrationCfg,"allowed")});e.all(s).then(function(){_.assign(c,{providers:_.filter(t,"registrationCfg.allowed")}),1===c.providers.length&&(c.isSingleProvider=!0,c.provider=c.providers[0]),_.assign(c.wizardCtrl.data,{providers:c.providers}),_.each(t,function(e){var t=_.get(e,c.isSingleProvider?"flow.single":"flow.multiple");i.registerFlow(e.name,t)})})}),s.list().then(function(e){_.assign(c.wizardCtrl.data,{groups:e})}).then(a.doResize)}function o(e){c.wizardCtrl.goTo(e),c.wizardCtrl.setFlowFromStepIds(i.getRegisteredFlow(e))}var c=this;_.assign(c,{$onInit:r,goTo:o})}e.$inject=["$q","c8yDeviceProviders","deviceRegistrationFlows","c8yUiUtil","c8yDeviceGroup","deviceRegistrationWizardUtils"],angular.module("c8y.deviceRegistration").component("deviceRegistrationMainStep",{controllerAs:"vm",require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"core_deviceRegistration/deviceRegistrationWizard/deviceRegistrationMainStep.html",controller:e})}(),function(){"use strict";function e(e,t,i,n,s,a,r,o,c){function l(){m(),y()}function d(){var e={};a.isTopTenant(C)&&_.set(e,"tenantId",C),k.newDeviceRegistrations.length>0&&_.set(e,"groupId",_.get(_.last(k.newDeviceRegistrations),"groupId")),k.newDeviceRegistrations.push(e),c.doResize()}function g(e){k.newDeviceRegistrations.splice(e,1),c.doResize()}function u(t){return c.setFormData(k.wizardCtrl.data,{devices:t}),c.disableInteractionWhenRequestInProgress(k,!0),e.all(_.map(t,function(e){return i.create(e,{silentError:!0}).then(function(t){return{device:e,status:"SUCCESS",details:o.getResData(t)}}).catch(function(t){return{device:e,status:"FAILED",details:o.getResData(t)}})})).then(v).finally(p)}function v(e){_.assign(k.wizardCtrl.data,{multipleResults:e})}function p(){c.disableInteractionWhenRequestInProgress(k,!1),k.wizardCtrl.goTo("multiple-finish"),c.doResize()}function m(){e.all({user:t.current(),topTenant:a.isCurrentUserTopTenant(),tenantsRead:r.hasAnyRole(["ROLE_TENANT_MANAGEMENT_READ"])}).then(function(e){e.topTenant&&e.tenantsRead&&(C=e.user.tenant,k.showTenantField=!0,k.newDeviceRegistrations[0].tenantId=C,f())})}function f(){a.list().then(function(e){k.tenants=e})}function h(e){var t=_.get(e,"tenantId");return t&&a.isTopTenant(t)}function y(){r.hasAnyRole(["ROLE_INVENTORY_READ"]).then(function(e){k.canReadInventory=e})}function R(e,t){var i=_.clone(k.newDeviceRegistrations),n=_.uniqBy(i,"id"),s=n.length!==k.newDeviceRegistrations.length,a=k["newDeviceRegistrationForm"+t].id;a.$setTouched(!0),a.$setValidity("deviceIdAlreadyUsed",!0),s&&w(i,e)&&a.$setValidity("deviceIdAlreadyUsed",!1)}function b(){for(var e=k.newDeviceRegistrations.length,t=!1,i=0;i<e;i++)t=k["newDeviceRegistrationForm"+i].$invalid||t;return t}function w(e,t){return _.filter(e,{id:t}).length>1}function z(){var e=_.get(k,"wizardCtrl.data.retry");e&&(k.newDeviceRegistrations=e.devices,_.unset(k,"wizardCtrl.data.retry"))}function D(e){return k["newDeviceRegistrationForm"+e].id}function S(e){h(e.tenantId)||_.unset(e,"groupId")}var C,k=this;_.assign(k,{newDeviceRegistrations:[{}],$onInit:l,$doCheck:z,deviceIdPattern:s.validation.deviceId.pattern,validation:s.validation,onClickRegisterDevices:u,addNewDevice:d,removeNewDevice:g,isTopTenantSelected:h,validateDeviceId:R,getIdFieldForForm:D,isAnyFormInvalid:b,resetGroup:S})}e.$inject=["$q","c8yUser","c8yDeviceRegistration","c8yAlert","c8yConfig","c8yTenant","c8yPermissions","c8yBase","deviceRegistrationWizardUtils"],angular.module("c8y.deviceRegistration").component("generalRegistrationStep",{controllerAs:"vm",controller:e,require:{wizardCtrl:"^c8yWizardStep"},bindings:{backStep:"@?"},templateUrl:"core_deviceRegistration/deviceRegistrationWizard/generalRegistrationStep.html"})}();var _slicedToArray=function(){function e(e,t){var i=[],n=!0,s=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){s=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(s)throw a}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){"use strict";function e(e,t,i,n,s){function a(e){v.wizardCtrl.goTo(e)}function r(t){var i=_slicedToArray(t,1),n=i[0];v.csvUpload={inProgress:!0},v.wizardCtrl.setAllowUserInteraction(!1),e.bulkCreate(n,{silentError:!0}).then(o,d).finally(g)}function o(e){e.data.numberOfSuccessful===e.data.numberOfAll?c(e):l(e),_.assign(v.wizardCtrl.data,{bulkRegistrationReloadMessage:{body:n("In order to see changes in application you need to reload page. Do you want to reload now?")}})}function c(e){t.setSuccessData(v.wizardCtrl.data,_.assign({},e,{message:s.getString("All devices have been successfully processed.")}))}function l(e){var i=_.assign(e.data,{numberOfFailures:e.data.numberOfAll-e.data.numberOfSuccessful}),n=s.getPlural(i.numberOfFailures,'Failed to process one of the devices.\n Click "Show details" to get more information.','Failed to process {{numberOfFailures}} devices.\n Click "Show details" to get more information.',i);t.setErrorData(v.wizardCtrl.data,_.assign({},{data:{details:e.data}},{message:n}))}function d(e){var s=e.data.message||n("Error occurred while processing uploaded file!");t.setErrorData(v.wizardCtrl.data,_.assign({},e,{message:i.getTranslatedServerMessage(s)}))}function g(){v.csvUpload={},v.wizardCtrl.setAllowUserInteraction(!0),v.wizardCtrl.goTo("finish"),t.doResize()}function u(){return n('Refer to "Bulk-registering devices" section in Device management\'s documentation to learn about proper file format.')}var v=this;_.assign(v,{goTo:a,onCSVUpload:r,getCsvUploadTooltip:u})}e.$inject=["c8yDeviceRegistration","deviceRegistrationWizardUtils","c8yLocales","gettext","gettextCatalog"],angular.module("c8y.deviceRegistration").component("bulkRegistrationStep",{require:{wizardCtrl:"^c8yWizardStep"},bindings:{backStep:"@?"},templateUrl:"core_deviceRegistration/deviceRegistrationWizard/bulkRegistrationStep.html",controller:e,controllerAs:"vm"})}(),function(){"use strict";function e(e,t){function i(){e.doPageReload()}function n(){return _.get(l.wizardCtrl.data,"userData.submitStatus.error")}function s(){return _.get(l.wizardCtrl.data,"userData.submitStatus.successResponse")}function a(){return _.get(l.wizardCtrl.data,"userData.form")}function r(){var e=l.getError();return _.get(e,"message")||_.get(e,"data.message")||t("Failed to register new device!")}function o(){l.showErrorDetails=!0,e.doResize()}function c(){l.showErrorDetails=!1,e.doResize()}var l=this;_.assign(l,{reload:i,getError:n,getSuccessResponse:s,getFormData:a,errorGetMessage:r,errorShowMore:o,errorHideMore:c,doResize:e.doResize})}e.$inject=["deviceRegistrationWizardUtils","gettext"],angular.module("c8y.deviceRegistration").component("deviceRegistrationFinishStep",{controllerAs:"vm",require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"core_deviceRegistration/deviceRegistrationWizard/deviceRegistrationFinishStep.html",controller:e})}(),function(){"use strict";function e(){function e(){t("general-registration",["general-registration","multiple-finish"]),t("bulk-device-registration",["bulk-device-registration","finish"]),t("providers-list",["providers-list","undetermined","finish"])}function t(e,t){_.set(n,e,t)}function i(e){return n[e]}var n={};return e(),{registerFlow:t,getRegisteredFlow:i}}angular.module("c8y.deviceRegistration").factory("deviceRegistrationFlows",e)}(),function(){"use strict";function e(e,t,i){function n(){t(function(){i.emitWindowResize()},500)}function s(){e.location.reload()}function a(e,t){_.set(e,"userData.submitStatus.successResponse",t),_.unset(e,"userData.submitStatus.error")}function r(e,t){_.set(e,"userData.submitStatus.error",t),_.unset(e,"userData.submitStatus.successResponse")}function o(e,t){_.set(e,"userData.form.device",t)}function c(e,t){e.inProgress=!!t,_.isUndefined(e.wizardCtrl)||e.wizardCtrl.setAllowUserInteraction(!t)}return{doResize:n,doPageReload:s,setSuccessData:a,setErrorData:r,setFormData:o,disableInteractionWhenRequestInProgress:c}}e.$inject=["$window","$timeout","c8yUiUtil"],angular.module("c8y.deviceRegistration").factory("deviceRegistrationWizardUtils",e)}(),function(){"use strict";function e(e,t){function i(){return _.get(v,"wizardCtrl.data.multipleResults")}function n(){var e=i();if(e){var t=_.filter(e,{status:"SUCCESS"}).length,n=e.length;return{total:n,successful:t,failed:n-t}}}function s(){var e,i=n();return i&&(e=1===i.total?i.failed?t.getString("Failed to register device."):t.getString("Successfully registered device."):i.failed?t.getString("Registration failed for {{failed}} devices out of total {{total}}",i):t.getString("Registration successful for all {{total}} devices",i)),e}function a(){return!!_.get(n(),"failed")}function r(){return!!_.get(n(),"successful")}function o(e){var t;switch(e){case"FAILED":t="ban";break;default:t="check-circle"}return t}function c(){var e=i(),t=_.filter(e,{status:"FAILED"}).map(function(e){return e.device});_.assign(v.wizardCtrl.data,{retry:{devices:t}}),v.wizardCtrl.goTo("general-registration")}function l(e){return p.indexOf(e)}function d(e){return l(e)>-1}function g(t){"FAILED"===t.status&&(d(t)?p.splice(l(t),1):p.push(t),e.doResize())}function u(e){if("SUCCESS"===e.status)return{cursor:"default"}}var v=this,p=[];_.assign(v,{getMultipleResults:i,getSummary:n,getSummaryMessage:s,withFailures:a,withSuccess:r,getIcon:o,fixErrors:c,toggle:g,isOpen:d,getCursor:u})}e.$inject=["deviceRegistrationWizardUtils","gettextCatalog"],angular.module("c8y.deviceRegistration").component("multipleResultFinishStep",{controllerAs:"vm",require:{wizardCtrl:"^c8yWizardStep"},templateUrl:"core_deviceRegistration/deviceRegistrationWizard/multipleResultFinishStep.html",controller:e})}(),function(){"use strict";function e(){function e(e){n.push(e)}function t(e){function t(){return n}function i(){return e.listByUser().then(function(e){return _.filter(n,function(t){var i={name:t.featureAppName||t.name+s};return _.some(e,i)})})}var s="-device-provider-agent";return{list:t,listAvailable:i}}t.$inject=["c8yApplication"];var i=this,n=[];_.assign(i,{add:e,$get:t})}angular.module("c8y.deviceRegistration").provider("c8yDeviceProviders",e)}(),function(){"use strict";function e(e){var t;t='<div>\n  <c8y-ui-action-bar-set>\n    <li class="navbar-form hidden-xs" action-bar-position="left" ng-show="vm.newDeviceRequests.length > 0">\n      <c8y-list-display-control list-length="vm.newDeviceRequests.length" on-list-class-change="vm.listClass = listClass">\n      </c8y-list-display-control>\n    </li>\n\n    <li ng-show="vm.canAcceptAll()">\n      <button type="button" class="btn btn-link" ng-click="vm.acceptAll()" ng-disabled="vm.limitStatus.isReached">\n        <i c8y-icon="check"></i> {{\'Accept all\' | translate}}\n      </button>\n    </li>\n\n    <c8y-refresh-btn></c8y-refresh-btn>\n  </c8y-ui-action-bar-set>\n\n  <!-- empty state -->\n  <div ng-if="vm.newDeviceRequests.length === 0">\n    <div ng-if="!vm.limitStatus.isReached" class="c8y-empty-state text-center" style="margin-top: 40px">\n      <h1 class="c8y-icon c8y-icon-device-connect c8y-icon-duocolor"></h1>\n      <h3 translate>No pending registrations to display.</h3>\n      <p translate>Use the wizard to register a new device.</p>\n      <c8y-if-allowed any-role="[\'ROLE_DEVICE_CONTROL_ADMIN\']">\n        <button class="btn btn-primary" ng-click="vm.addWithWizard()">\n          <i c8y-icon="c8y-device-connect"></i>\n          <translate>Register device</translate>\n        </button>\n      </c8y-if-allowed>\n    </div>\n    <div ng-if="vm.limitStatus.isReached" class="c8y-empty-state text-center" style="margin-top: 40px">\n      <h1 class="c8y-icon c8y-icon-device-connect c8y-icon-duocolor"></h1>\n      <h3 translate>You have reached the limit of {{vm.limitStatus.limit}} devices. No more devices can be registered.</h3>\n      <p translate>Please contact your platform administrator.</p>\n    </div>\n  </div>\n  <!-- /.empty state -->\n\n  <div class="card-group" ng-class="vm.listClass">\n    <c8y-if-allowed any-role="[\'ROLE_DEVICE_CONTROL_ADMIN\']" ng-if="vm.newDeviceRequests.length > 0 && !vm.limitStatus.isReached" class="col-xs-12 col-sm-6 col-md-4 col-lg-3">\n      <a href="" class="card add-card" ng-click="vm.addWithWizard()">\n        <i c8y-icon="c8y-device-connect c8y-icon-duocolor"></i><br>\n        <translate>Register device</translate>\n      </a>\n    </c8y-if-allowed>\n\n    <div ng-if="vm.newDeviceRequests.length > 0 && vm.limitStatus.isReached" class="col-xs-12 col-sm-6 col-md-4 col-lg-3">\n      <p class="card add-card" translate>\n        You have reached the limit of {{vm.limitStatus.limit}} devices.<br>\n        No more devices can be registered.<br>\n        Please contact your platform administrator.\n      </p>\n    </div>\n\n    <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" ng-repeat="d in vm.newDeviceRequests">\n      <div class="card">\n        <div class="card-header separator">\n          <div class="card-icon">\n            <i c8y-icon="{{vm.statusIcon(d)}}" ng-class="vm.statusClass(d)"></i>\n          </div>\n          <p class="card-title text-truncate">{{d.id}}</p>\n        </div>\n        <div class="card-block text-center">\n          <label translate>Status</label>\n          <p>{{d.status | humanize | translate}}</p>\n        </div>\n        <div class="card-actions-group">\n          <c8y-if-allowed any-role="[\'ROLE_DEVICE_CONTROL_ADMIN\']">\n            <button class="btn btn-danger btn-xs" ng-click="vm.onClickCancel(d)">\n              {{\'Remove\' | translate}}\n            </button>\n            <button class="btn btn-primary btn-xs" ng-click="vm.onClickAccept(d)" ng-show="d.status===vm.newDeviceRequestsStatus.PENDING_ACCEPTANCE" ng-disabled="vm.limitStatus.isReached">\n              {{\'Accept\' | translate}}\n            </button>\n          </c8y-if-allowed>\n        </div>\n        <div class="card-footer separator text-center text-muted">\n          <span ng-if="vm.isTopTenant">\n            <span ng-if="d.creationTime && d.owner" translate>\n              <strong>Created on</strong> {{d.creationTime | absoluteDate}} <strong>by</strong> {{d.owner}} <strong>in</strong> {{d.tenantId}}\n            </span>\n            <span ng-if="!d.creationTime || !d.owner" translate>\n              <strong>Created in</strong> {{d.tenantId}}\n            </span>\n          </span>\n          <span ng-if="!vm.isTopTenant" translate>\n            <strong>Created on</strong> {{d.creationTime | absoluteDate}} <strong>by</strong> {{d.owner}}\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <c8y-load-more></c8y-load-more>\n</div>\n',e.put("deviceRegistration/deviceRegistration.html",t),e.put("core_deviceRegistration/deviceRegistration.html",t),e.put("/apps/core/deviceRegistration/deviceRegistration.html",t),t='<div class="modal-body">\n\n  <p class="lead text-center" style="margin:0" translate>\n    Bulk registering devices\n  </p>\n  <p class="text-muted">{{vm.getCsvUploadTooltip() | translate}}</p>\n</div>\n\n<div class="modal-inner-scroll" style="min-height: 148px">\n  <div class="c8y-wizard-body">\n    <button class="btn btn-primary btn-block" ng-file-select="vm.onCSVUpload($files)" data-accept="text/*" ng-disabled="vm.csvUpload.inProgress">\n      <span ng-hide="vm.csvUpload.inProgress">\n        <i c8y-icon="upload"></i>\n        <translate>Select file to upload</translate></span>\n      <span ng-show="vm.csvUpload.inProgress">\n        <i c8y-icon="circle-o-notch" class="fa-spin"></i>\n      </span>\n    </button>\n    <br>\n    <p class="text-center">\n      <small>\n        <translate>Download a template .csv file: </translate>\n        <a target="_self" href="core_deviceRegistration/resources/bulkRegistrationTemplate.csv" download="{{\'Bulk device registration - template.csv\' | translate}}">\n          <span>\n            <i c8y-icon="download"></i>\n            <translate>Download template</translate>\n          </span>\n        </a>\n      </small>\n    </p>\n  </div>\n</div>\n<div class="c8y-wizard-footer">\n  <button class="btn btn-default" ng-click="vm.wizardCtrl.goTo(vm.backStep)" ng-disabled="vm.csvUpload.inProgress" translate>\n    Back\n  </button>\n</div>\n',e.put("deviceRegistration/deviceRegistrationWizard/bulkRegistrationStep.html",t),e.put("core_deviceRegistration/deviceRegistrationWizard/bulkRegistrationStep.html",t),e.put("/apps/core/deviceRegistration/deviceRegistrationWizard/bulkRegistrationStep.html",t),t='<div class="modal-inner-scroll" style="min-height: 215px">\n  <div class="modal-body">\n\n    <!-- success message content -->\n    <div ng-if="vm.getSuccessResponse()" class="text-center">\n      <h1 class="text-success" style="font-size:4em"><i c8y-icon="check-circle"></i></h1>\n      <p class="lead text-success" style="margin-bottom:0"><strong translate>Device registration request submitted</strong></p>\n      <p class="text-muted" style="white-space: pre-wrap">\n        {{(vm.getSuccessResponse().message | translate) || (\'Device successfully created\' | translate)}}\n      </p>\n    </div>\n    <!-- end of success message content -->\n\n    <!-- fail message content -->\n    <div ng-if="vm.getError()" class="text-center" ng-show="!vm.showErrorDetails">\n      <h1 class="text-danger" style="font-size:4em"><i c8y-icon="exclamation-circle"></i></h1>\n      <p class="text-danger" style="margin-bottom: 10px">\n        <strong style="white-space: pre-wrap" ng-bind="vm.errorGetMessage() | translateServerMessage">\n        </strong>\n      </p>\n      <button ng-if="vm.getError().data.details && !vm.showErrorDetails" class="btn btn-default btn-xs" ng-click="vm.errorShowMore()" translate>Show details</button>\n    </div>\n\n    <div ng-if="vm.getError().data.details && vm.showErrorDetails">\n      <button class="btn btn-default btn-xs pull-right" ng-click="vm.errorHideMore()" translate>Hide details</button>\n      <label>\n        <translate>Error message details</translate>\n      </label>\n      <pre style="white-space: pre-wrap; overflow-y: auto; max-height: 35vh" ng-bind="vm.getError().data.details | json">\n      </pre>\n    </div>\n    <!-- end of fail message content -->\n\n    <div ng-if="vm.wizardCtrl.data.bulkRegistrationReloadMessage">\n      <p class="text text-center" style="margin-top:20px">\n        {{vm.wizardCtrl.data.bulkRegistrationReloadMessage.body | translate}}\n      </p>\n      <button class="btn btn-primary btn-block" ng-click="vm.reload()" translate>\n        Reload now\n      </button>\n    </div>\n  </div>\n</div>\n\n<div class="c8y-wizard-footer">\n  <button class="btn btn-default" ng-click="vm.wizardCtrl.close()" translate>\n    Close\n  </button>\n</div>\n',e.put("deviceRegistration/deviceRegistrationWizard/deviceRegistrationFinishStep.html",t),e.put("core_deviceRegistration/deviceRegistrationWizard/deviceRegistrationFinishStep.html",t),e.put("/apps/core/deviceRegistration/deviceRegistrationWizard/deviceRegistrationFinishStep.html",t),t='<div class="modal-body">\n  <p class="lead text-center" style="margin:0" translate>\n    Select one of the available options\n  </p>\n  <p c8y-guide-docs>\n    <small class="text-muted" translate>\n      Find your device type in the\n      <a c8y-guide-href="">Device Guides</a>\n      to get more information.\n    </small>\n  </p>\n</div>\n\n<div class="modal-inner-scroll" style="min-height: 148px">\n  <!-- general registration section -->\n  <div class="c8y-wizard-list-nav">\n    <a href="" class="list-group-item" ng-click="vm.goTo(\'general-registration\')">\n      <i c8y-icon="c8y-device-connect"></i>\n      <span translate>General device registration</span>\n    </a>\n  </div>\n\n  <!-- lpwan dynamic option section  -->\n  <div class="c8y-wizard-list-nav" ng-if="vm.providers.length">\n    <a href="" ng-if="!vm.isSingleProvider" class="list-group-item" ng-click="vm.goTo(\'providers-list\')">\n      <i c8y-icon="c8y-device-connect"></i>\n      <span translate>Custom device registration</span>\n    </a>\n    <a href="" ng-if="vm.isSingleProvider" class="list-group-item" ng-click="vm.goTo(vm.provider.name)">\n      <i c8y-icon="c8y-device-connect"></i>\n      <span>{{vm.provider.label | translate}}</span>\n    </a>\n  </div>\n\n  <!-- bulk registration section -->\n  <div class="c8y-wizard-list-nav">\n    <a href="" class="list-group-item" ng-click="vm.goTo(\'bulk-device-registration\')">\n      <i c8y-icon="upload"></i>\n      <span translate>Bulk device registration</span>\n    </a>\n  </div>\n</div>\n\n<div class="c8y-wizard-footer modal-footer">\n  <button class="btn btn-default" ng-click="vm.wizardCtrl.dismiss()" translate>\n    Cancel\n  </button>\n</div>\n',e.put("deviceRegistration/deviceRegistrationWizard/deviceRegistrationMainStep.html",t),e.put("core_deviceRegistration/deviceRegistrationWizard/deviceRegistrationMainStep.html",t),e.put("/apps/core/deviceRegistration/deviceRegistrationWizard/deviceRegistrationMainStep.html",t),t='<c8y-wizard class="register-devices" on-dismiss="vm.modalInstance.dismiss()" on-close="vm.modalInstance.close()" initial-flow="[\'device-registration-selection\']" is-dynamic-flow="false">\n  <header>\n    <div style="font-size: 62px">\n      <span class="c8y-icon c8y-icon-device-connect"></span>\n    </div>\n    <h4 class="text-uppercase" style="margin:0; letter-spacing: 0.15em" translate>\n      Register devices\n    </h4>\n  </header>\n  <steps>\n    <!-- main page with device registration type selection -->\n    <c8y-wizard-step step-id="device-registration-selection">\n      <device-registration-main-step></device-registration-main-step>\n    </c8y-wizard-step>\n\n    <!-- device registration types steps definition -->\n    <c8y-wizard-step step-id="general-registration" label="\'Device info\' | translate">\n      <general-registration-step back-step="device-registration-selection"></general-registration-step>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="providers-list" label="\'Custom registration\' | translate">\n      <providers-list-selection-step back-step="device-registration-selection"></providers-list-selection-step>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="bulk-device-registration" label="\'Bulk registration\' | translate">\n      <bulk-registration-step back-step="device-registration-selection"></bulk-registration-step>\n    </c8y-wizard-step>\n\n    <!-- empty step for unspecified state -->\n    <c8y-wizard-step step-id="undetermined" label="\'...\'"></c8y-wizard-step>\n\n    <!-- custom device registrations -->\n    <c8y-wizard-step step-id="actility" label="\'LoRa\'">\n      <device-registration-actility back-step="{{$parent.wizardCtrl.data.providersAvailable.length > 1 ? \'providers-list\' : \'device-registration-selection\'}}">\n      </device-registration-actility>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="impact" label="\'Nokia IMPACT\'">\n      <device-registration-impact back-step="{{$parent.wizardCtrl.data.providersAvailable.length > 1 ? \'providers-list\' : \'device-registration-selection\'}}">\n      </device-registration-impact>\n    </c8y-wizard-step>\n    <c8y-wizard-step step-id="sigfox" label="\'Sigfox\'">\n      <device-registration-sigfox back-step="{{$parent.wizardCtrl.data.providersAvailable.length > 1 ? \'providers-list\' : \'device-registration-selection\'}}">\n      </device-registration-sigfox>\n    </c8y-wizard-step>\n\n    <!-- success fail message -->\n    <c8y-wizard-step step-id="finish" label="\'Registration\' | translate">\n      <device-registration-finish-step></device-registration-finish-step>\n    </c8y-wizard-step>\n    <!-- success fail message for multiple result -->\n    <c8y-wizard-step step-id="multiple-finish" label="\'Registration\' | translate">\n      <multiple-result-finish-step></multiple-result-finish-step>\n    </c8y-wizard-step>\n  </steps>\n</c8y-wizard>\n',e.put("deviceRegistration/deviceRegistrationWizard/deviceRegistrationWizard.html",t),e.put("core_deviceRegistration/deviceRegistrationWizard/deviceRegistrationWizard.html",t),e.put("/apps/core/deviceRegistration/deviceRegistrationWizard/deviceRegistrationWizard.html",t),t='<div>\n  <div class="modal-inner-scroll" style="min-height: 215px">\n    <div ng-repeat="newDeviceRegistration in vm.newDeviceRegistrations track by $index">\n      <ng-form name="vm.newDeviceRegistrationForm{{$index}}">\n        <div class="flex-row top-m">\n          <div class="col-xs-11">\n            <div class="form-group">\n              <label translate>Device ID</label>\n              <input type="text" class="form-control" name="id" ng-model="newDeviceRegistration.id" ng-maxlength="150" placeholder="{{\'e.g.\' | translate}} 0123ab32fcd" ng-required="true" ng-change="vm.validateDeviceId(newDeviceRegistration.id, $index)" c8y-validate-url-segment c8y-autocomplete="off" autocorrect="off" autocapitalize="off" autofocus>\n              <c8y-error-feedback field="vm.getIdFieldForForm($index)">\n                <span ng-message="required" translate>Device ID is required.</span>\n                <span ng-message="deviceIdAlreadyUsed" translate>Device ID duplicates are not allowed.</span>\n              </c8y-error-feedback>\n            </div>\n            <div class="form-group" ng-if="vm.showTenantField">\n              <label translate>Add to tenant</label>\n              <ui-select ng-model="newDeviceRegistration.tenantId" ng-change="vm.resetGroup(newDeviceRegistration)" uib-tooltip="{{\'You can add device to specific group for management tenant only.\' | translate}}">\n                <ui-select-match placeholder="{{\'Select tenant\' | translate}}">{{newDeviceRegistration.tenantId}}</ui-select-match>\n                <ui-select-choices repeat="t.id as t in vm.tenants | filter: {id: $select.search} | orderBy:\'id\'" position="down">\n                  <div ng-bind-html="t.id | highlight: $select.search" title="{{t.id}}"></div>\n                </ui-select-choices>\n              </ui-select>\n            </div>\n            <input type="hidden" name="groupId" ng-model="newDeviceRegistration.groupId" ng-required="!vm.canReadInventory">\n            <div class="text-center" ng-if="!vm.wizardCtrl.data.groups">\n              <i c8y-icon="circle-o-notch" class="fa-spin"></i>\n              <span translate>Wait while groups for current tenant are loaded&hellip;</span>\n            </div>\n            <div class="form-group" ng-if="(vm.isTopTenantSelected(newDeviceRegistration) || !vm.showTenantField) && vm.wizardCtrl.data.groups" style="margin-bottom:0">\n              <label translate>Add to group</label>\n              <c8y-device-group-selector uib-tooltip="{{vm.getErrorGroupFeedback() | translate}}" group="newDeviceRegistration.groupId" group-as-id="true" placeholder="{{\'Select group\' | translate}}" name="groupId" groups="vm.wizardCtrl.data.groups">\n              </c8y-device-group-selector>\n              <c8y-error-feedback field="vm.newDeviceRegistrationForm.groupId">\n                <span ng-message="required" translate>Group is required</span>\n              </c8y-error-feedback>\n            </div>\n          </div>\n          <div>\n            <button type="button" class="btn btn-link" style="padding-right:0;padding-left:0" ng-click="vm.removeNewDevice($index)" uib-tooltip="{{\'Remove\' | translate}}" ng-show="vm.newDeviceRegistrations.length > 1">\n              <i class="text-danger" c8y-icon="minus-circle" style="font-size: 18px"></i>\n            </button>\n          </div>\n        </div>\n      </ng-form>\n      <hr>\n    </div>\n    <div class="modal-body">\n      <button class="btn-add-block" ng-click="vm.addNewDevice()">\n        <i c8y-icon="plus-square"></i> {{\'Add another device\' | translate}}\n      </button>\n    </div>\n  </div>\n  <div class="c8y-wizard-footer modal-footer">\n    <button class="btn btn-default" ng-click="vm.wizardCtrl.goTo(vm.backStep)" ng-disabled="vm.inProgress" translate>\n      Back\n    </button>\n    <button class="btn btn-primary" ng-disabled="vm.isAnyFormInvalid() || vm.inProgress" ng-click="vm.onClickRegisterDevices(vm.newDeviceRegistrations)">\n      <span ng-show="!vm.inProgress" translate>Next</span>\n      <span ng-show="vm.inProgress">\n        <i c8y-icon="circle-o-notch" class="fa-spin"></i>\n      </span>\n    </button>\n  </div>\n</div>\n',
e.put("deviceRegistration/deviceRegistrationWizard/generalRegistrationStep.html",t),e.put("core_deviceRegistration/deviceRegistrationWizard/generalRegistrationStep.html",t),e.put("/apps/core/deviceRegistration/deviceRegistrationWizard/generalRegistrationStep.html",t),t='<div class="modal-inner-scroll" style="min-height: 215px">\n  <div class="modal-body">\n\n    <div class="text-center" ng-class="{\'text-danger\': vm.withFailures(), \'text-success\': !vm.withFailures()}">\n      {{vm.getSummaryMessage()}}\n    </div>\n\n    <div class="text-center bottom-m" ng-if="vm.withSuccess()" translate>\n      Turn on the registered device(s) and wait for connection(s) to be established.\n      Once a device is connected, its status will change to "Pending acceptance".\n      You will need to approve it by clicking on the "accept" button.\n    </div>\n\n    <ul class="list-group">\n      <li class="list-group-item flex-row" ng-repeat="registrationDetail in vm.getMultipleResults()" ng-class="{\'text-danger\': registrationDetail.status === \'FAILED\', \'text-success\': registrationDetail.status === \'SUCCESS\', \'expanded\': vm.isOpen(registrationDetail)}" ng-click="vm.toggle(registrationDetail);" ng-style="vm.getCursor(registrationDetail)">\n        <div class="list-item-actions" ng-if="registrationDetail.status === \'FAILED\'">\n          <button type="button" title="{{\'Expand\' | translate}}" class="collapse-btn">\n            <i c8y-icon="chevron-down"></i>\n          </button>\n        </div>\n        <div class="list-item-icon">\n          <i c8y-icon="{{vm.getIcon(registrationDetail.status)}}"></i>\n        </div>\n        <div class="list-item-body">\n          <p>{{registrationDetail.device.id}}</p>\n          <small>{{registrationDetail.details.message | translateServerMessage}}</small>\n        </div>\n        <div class="collapse" uib-collapse="!vm.isOpen(registrationDetail)" ng-click="$event.stopPropagation()">\n          <div class="text-left" ng-if="vm.isOpen(registrationDetail) && registrationDetail.status === \'FAILED\'">\n            <pre><code>{{registrationDetail.details | json:2}}</code></pre>\n          </div>\n        </div>\n      </li>\n    </ul>\n\n  </div>\n</div>\n<div class="c8y-wizard-footer modal-footer">\n  <button class="btn btn-default" ng-if="vm.withFailures()" ng-click="vm.fixErrors()" translate>\n    Fix errors\n  </button>\n  <button class="btn btn-primary" ng-click="vm.wizardCtrl.close()" translate>\n    Complete\n  </button>\n</div>\n',e.put("deviceRegistration/deviceRegistrationWizard/multipleResultFinishStep.html",t),e.put("core_deviceRegistration/deviceRegistrationWizard/multipleResultFinishStep.html",t),e.put("/apps/core/deviceRegistration/deviceRegistrationWizard/multipleResultFinishStep.html",t),t='<div class="modal-body">\n  <p class="lead text-center" style="margin:0" translate>\n    Select one of the device providers\n  </p>\n  <p c8y-guide-docs>\n    <small class="text-muted" translate>\n      Find your device type in the\n      <a c8y-guide-href="">Device Guides</a>\n      to get more information.\n    </small>\n  </p>\n</div>\n\n<div class="modal-inner-scroll" style="min-height: 148px">\n  <div class="c8y-wizard-list-nav" ng-if="vm.providers.length">\n    <a href="" class="list-group-item" ng-repeat="p in vm.providers" ng-click="vm.goTo(p.name)">\n      <i c8y-icon="microchip"></i>\n      <span class="">{{p.label | translate}}</span>\n    </a>\n  </div>\n  <div class="text-center" ng-if="!vm.providers.length" style="margin: 100px 0 50px 0">\n    <i c8y-icon="refresh" class="fa-spin"></i>\n    <span translate>Wait while providers are loaded</span>\n  </div>\n</div>\n<div class="c8y-wizard-footer">\n  <button class="btn btn-default" ng-click="vm.wizardCtrl.goTo(vm.backStep)" translate>\n    Back\n  </button>\n</div>\n',e.put("deviceRegistration/deviceRegistrationWizard/providersListSelectionStep.html",t),e.put("core_deviceRegistration/deviceRegistrationWizard/providersListSelectionStep.html",t),e.put("/apps/core/deviceRegistration/deviceRegistrationWizard/providersListSelectionStep.html",t)}angular.module("c8y.deviceRegistration").run(["$templateCache",e])}();