/* core_binary-file-download 9.12.5 2018-08-27T16:53:24+00:00 b689bea882f7+ (release/9.12.0) tip */
!function(){"use strict";function n(n,a,o,e,t,l){function i(n,a){f.resolve(a.hasAuth)}function d(n){l({component:"binaryFileDownload",size:"sm",resolve:{binaryId:function(){return n}}})}function r(n){var a=o.location.search.substring(1),e=a.split("&"),t=void 0;return e.forEach(function(a){var o=a.split("=");o[0]===n&&(t=decodeURIComponent(o[1]))}),t}var c="download",s=r(c),u=_.get(a.search(),c),f=n.defer(),b=f.promise,v=!1;t.$on("authStateChange",i),t.$on("$routeChangeSuccess",function(n,a){u=_.get(a.params,c);var o=u||s;v&&!u||!o||b.then(function(){return d(o)}),s&&(v=!0)})}n.$inject=["$q","$location","$window","$interval","$rootScope","c8yModal"],angular.module("c8y.binaryFileDownload",[]).run(n)}(),function(){"use strict";function n(n,a){function o(){_.assign(l,{binaryId:_.get(l.resolve,i),downloadBtnEnabled:!1,download:t,cancel:function(){l.dismiss({$value:"cancel"})}}),e(l.binaryId).then(function(n){l.details=n})}function e(a){return n.detail(a,void 0,{silentError:!0}).then(function(n){return n.data}).then(function(n){return l.downloadBtnEnabled=!0,n}).catch(function(n){l.downloadBtnEnabled=!1,l.errorData=_.get(n,"data")})}function t(){a.downloadAndSaveAs({id:l.binaryId},l.details.length).then(function(){l.close({$value:"close"})})}var l=this,i="binaryId";_.assign(l,{$onInit:o})}n.$inject=["c8yInventory","c8yBinary"],angular.module("c8y.binaryFileDownload").component("binaryFileDownload",{controller:n,controllerAs:"vm",templateUrl:"core_binary-file-download/binary-file-download.html",bindings:{resolve:"<",close:"&",dismiss:"&"}})}(),function(){"use strict";function n(n){var a;a='<div class="modal-header">\n  <h3 translate> File download </h3>\n</div>\n<div class="modal-body">\n  <div ng-if="vm.errorData.message" class="alert alert-danger">\n      {{vm.errorData.message | translateServerMessage}}\n  </div>\n  <p translate ng-hide="!vm.downloadBtnEnabled">File "{{vm.details.name}}" is ready for download.</p>\n</div>\n<div class="modal-footer">\n  <button class="btn btn-default" ng-click="vm.cancel()" translate>Cancel</button>\n  <button class="btn btn-primary" ng-click="vm.download()" ng-disabled="!vm.downloadBtnEnabled">\n    <i c8y-icon="download"></i> {{\'Download\' | translate}}\n  </button>\n</div>\n',n.put("binary-file-download/binary-file-download.html",a),n.put("core_binary-file-download/binary-file-download.html",a),n.put("/apps/core/binary-file-download/binary-file-download.html",a)}angular.module("c8y.binaryFileDownload").run(["$templateCache",n])}();