/* administration_retentionRules 9.12.5 2018-08-27T16:53:22+00:00 b689bea882f7+ (release/9.12.0) tip */
!function(){"use strict";function e(e,t,n){e.addNavigation({parent:{name:n("Management"),icon:"c8y-management"},name:n("Retention rules"),priority:2e3,path:"retentions",icon:"briefcase"}),t.when("/retentions",{templateUrl:"administration_retentionRules/views/list.html"})}angular.module("c8y.parts.retentionRules",[]).config(["c8yNavigatorProvider","c8yViewsProvider","gettext",e])}(),function(){"use strict";function e(e,t,n,i,l,a,s,o){function r(){i.list({pageSize:1e3}).then(function(t){e.retentions=t,e.paging=t.paging},c)}function c(e){403===e.status?t.info(o("You need these roles to access retention rules: Retention Rule Read / Admin")):t.danger(s.getTranslatedServerMessage(e.data.message),e.data)}function u(e){return n({title:o("Are you sure?"),size:"sm",labels:{ok:o("Remove"),cancel:o("Cancel")},body:o("Do you want to remove this rule?"),status:"danger"}).then(_.partial(d,e))}function d(e){var n=_.partial(t.success,o("Rule is removed successfully."));return i.remove(e).then(_.partial(m,e)).then(n)}function m(t){_.remove(e.retentions,t)}function g(t){e.retentions.push(t)}function b(t){var n=_.find(e.retentions,{id:t.id});_.merge(n,t)}function v(){return l.editRetentionRule().then(g)}function p(e){if(f(e))return l.editRetentionRule(e).then(b)}function y(){a.changeTitle({title:o("Retention rules")}),r()}function f(e){return e.editable!==!1}y(),e.list=r,e.createModal=v,e.updateModal=p,e.removeWithConfirmation=u,e.isEditable=f}e.$inject=["$scope","c8yAlert","c8yModal","c8yRetentions","c8yUiUtil","c8yTitle","c8yLocales","gettext"],angular.module("c8y.parts.retentionRules").controller("c8yRetentionRulesListCtrl",e)}(),function(){"use strict";function e(e){var t;t='<div ng-controller="c8yRetentionRulesListCtrl as vm">\n  <c8y-ui-action-bar-set>\n    <li c8y-if-allowed any-role="[\'ROLE_RETENTION_RULE_ADMIN\']">\n      <button ng-click="createModal()" class="btn btn-link">\n        <i c8y-icon="plus-circle"></i> <translate>Add rule</translate>\n      </button>\n    </li>\n    <button type="button" class="btn btn-link" ng-disabled="!paging.refresh" ng-click="list()">\n      <i c8y-icon="refresh" ng-class="{\'fa-spin\': refreshLoading}"></i> <translate>Reload</translate>\n    </button>\n  </c8y-ui-action-bar-set>\n\n  <div class="c8y-empty-state text-center" ng-show="retentions.length === 0">\n    <h1 c8y-icon="briefcase"></h1>\n    <h3 translate>No retention rules to display.</h3>\n    <p translate>Add your first retention rule by clicking below.</p>\n    <button class="btn btn-primary" ng-click="createModal()" translate>Add retention rule</button>\n    <p class="top-m-xs" c8y-guide-docs><small translate>Find out more on the <a c8y-guide-href="reference/retention-rules/">Reference Guide</a>.</small></p>\n  </div>\n\n  <div class="list-group">\n    <div class="list-group-item flex-row" ng-repeat="rule in retentions" ng-click="updateModal(rule)" title="{{\'Click to edit\' | translate}}">\n      <div class="list-item-icon">\n        <i c8y-icon="{{rule.icon || \'circle\'}}"></i>\n      </div>\n      <div class="list-item-body row">\n        <div class="col-sm-4 col-xs-12 col-md-3">\n          {{rule.dataType | translate}}\n        </div>\n\n        <div class="col-sm-4 col-md-2 col-xs-12">\n          <label class="small" translate>Fragment type</label> {{rule.fragmentType}}\n        </div>\n\n        <div class="col-sm-4 col-md-2 col-xs-12">\n          <label class="small" translate>Type</label> {{rule.type}}\n        </div>\n\n        <div class="col-sm-4 col-md-2 col-xs-12">\n          <label class="small" translate>Source</label> {{rule.source}}\n        </div>\n\n        <div class="col-sm-4 col-md-2 col-xs-12">\n          <label class="small" translate>Maximum age</label> {{rule.maximumAge}} {{\'days\' | translate}}\n        </div>\n        <div class="col-sm-4 col-md-1 text-right" ng-hide="isEditable(rule)">\n          <span class="label label-info" translate>Not editable</span>\n        </div>\n\n        <div class="text-right showOnHover col-sm-4 col-md-1" ng-show="isEditable(rule)">\n          <button class="btn btn-danger btn-xs hidden-xs" data-ng-click="removeWithConfirmation(rule);$event.stopPropagation()" uib-tooltip="{{\'Delete\' | translate}}">\n            <i c8y-icon="trash"></i>\n          </button>\n        </div>\n      </div>\n      <button class="btn btn-danger btn-xs btn-block visible-xs" data-ng-click="removeWithConfirmation(rule);$event.stopPropagation()">\n      <i c8y-icon="trash"></i> {{\'Delete\' | translate}}\n    </button>\n    </div>\n  </div>\n\n\n</div>',e.put("retentionRules/views/list.html",t),e.put("administration_retentionRules/views/list.html",t),e.put("/apps/administration/retentionRules/views/list.html",t)}angular.module("c8y.parts.retentionRules").run(["$templateCache",e])}();