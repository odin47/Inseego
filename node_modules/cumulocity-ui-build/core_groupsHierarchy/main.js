/* core_groupsHierarchy 9.12.5 2018-08-27T16:54:09+00:00 b689bea882f7+ (release/9.12.0) tip */
!function(){"use strict";function e(e){e.init()}function n(e){e.loadAll()}e.$inject=["c8yGroupsHierarchyUiProvider"],n.$inject=["groupTypesHierarchyNavigator"];var t=_.identity;angular.module("c8y.groupsHierarchy",["c8y.deviceSelector"]).constant("parentNavigatorItemName",t("Groups")).constant("groupsHierarchyPluginPath","core_groupsHierarchy").config(e).run(n)}(),function(){"use strict";function e(e,n,t,i,r,a,s){function o(){g(),p(),v(),m(),h()}function c(e,n){var t=D=n.get("$q"),i=x=n.get("c8yBase"),r=A=n.get("c8yInventory");G=n.get("c8yGroups");var a=t.when([]),o=e.groupId,c=t.when(null),d=void 0,g=function(e){var n=e;return _.forEach(n,function(e){e.unshift({label:s("Groups"),icon:"c8y-group-open",path:"#/group",translate:!0})}),n=l(n),w[o]=n,n};return o&&(c=r.detail(o,{withParents:!0}).then(i.getResData),d=c.then(function(e){return u([],[],e)}).then(g),a=t.when(_.get(w,o,d))),a}function l(e){return _.sortBy(e,function(e){return-1*e.length})}function u(e,n,t){return t?(n.unshift(d(t)),D.all([A.directParentDevices(t),A.directParentAssets(t)]).then(function(t){var i=[].concat(t[0]).concat(t[1]),r=[];return 0===i.length?(e.push(n),D.when(e)):(_.forEach(i,function(t){var i=A.detail(t.id,{withParents:!0}).then(x.getResData).then(function(t){return D.when(u(e,_.cloneDeep(n),t))});r.push(i)}),D.all(r).then(function(){return e}))})):D.when(e)}function d(e){return{icon:G.getIconSpecs(e).iconOpen,groupType:e.type,label:e.name||s("Group")+" "+e.id,path:"#/group/"+e.id}}function g(){n.when(y,{templateUrl:"core_groupsHierarchy/views/groupsList.html",controller:"groupsListCtrl",controllerAs:"vm"}),n.when(f,{name:s("Sub-assets"),icon:"c8y-group-open",templateUrl:"core_groupsHierarchy/views/groupsList.html",controller:"groupsListCtrl",controllerAs:"vm",priority:990}),n.when("/assetsearch",{name:s("Search controller"),icon:"c8y-group-open",templateUrl:"core_groupsHierarchy/views/search.html",controller:"assetSearchCtrl"}),n.when(f,{template:"<div></div>",showIf:function(){return!1}}),e.when("/groups",{redirectTo:"/group"}),e.when("/groups/:path*",{redirectTo:"/group/:path"}),n.when(f,{priority:1e3,name:s("Info"),icon:"asterisk",templateUrl:"core_groupsHierarchy/views/groupDetails.html"})}function p(){i.addTitle(f,{data:["$routeParams","c8yBase","c8yInventory",function(e,n,t){var i=function(e){return{title:e.name}},r=e.groupId;return r?t.detailCached(r).then(n.getResData).then(i):{}}]})}function v(){t.addBreadcrumbs(f,{data:c}),t.addBreadcrumbs(b,{data:c})}function m(){r.addGlobalAction({text:s("New group"),action:["groupsHierarchySvc",function(e){e.addAssetUI()}],showIfPermissions:{anyRole:["ROLE_INVENTORY_ADMIN","ROLE_INVENTORY_CREATE"]}})}function h(){a.add({name:s("Search all"),path:function(e){return e&&"/assetsearch?s="+window.encodeURIComponent(e)}})}c.$inject=["$routeParams","$injector"];var y="/group",f=y+"/:groupId",b="/group/:groupId",w={},D=void 0,x=void 0,A=void 0,G=void 0;return{init:o,$get:function(){}}}e.$inject=["$routeProvider","c8yViewsProvider","c8yBreadcrumbsProvider","c8yTitleProvider","c8yActionsProvider","c8ySearchProvider","gettext"],angular.module("c8y.groupsHierarchy").provider("c8yGroupsHierarchyUi",e)}(),function(){"use strict";function e(e,n,t,i,r,a,s,o,c,l,u,d,g,p,v,m,h,y,f,b){function w(){if(!e.inSearchMode){var n=t.groupId,i=_.isUndefined(n);return s.getStaticLinkTemplate("devicemanagementDeviceDetails").then(function(e){X=e}),i?x():A(n).then(G).then(C).then(function(e){return S(e,!0)})}}function D(e){var n={deviceId:e.id};return r(X||"")(n)}function x(){return C().then(_.partialRight(S,!0))}function A(e){return a.detail(e,{withParents:!0}).then(s.getResData)}function G(n){K.currentGroup=e.currentGroup=Z=n}function C(){var e=void 0;return Z?d.isGroup(Z)&&(e=d.getGroupAssetsAndDevices(Z)):e=d.getTopLevelGroups(k()),e}function k(){return"devicemanagement"===b.getCurrentContextPath()}function S(n,t){ee=ee||[],t&&(ee.length=0),K.items=e.items=ee=ee.concat(n),e.paging=n.paging}function H(){var e=void 0;return e=Z?Z.name:y("Groups")}function T(){var e=ee?f.getPlural(ee.length,"Showing 1 item","Showing {{$count}} items",{}):void 0;return e}function $(){K.newGroup=e.newGroup={groupType:I(),name:""}}function I(){return t.groupId?u.getDeviceSubgroupType():u.getDeviceGroupType()}function N(){delete e.newGroup}function O(e){var n=M(e),t=Z?a.createChildAsset(n,Z):a.createConfirm(n);return t.then(s.getResData).then(P),t.then(function(){c.success(f.getString("Group {{name}} has been created!",{name:e.name})),C().then(_.partialRight(S,!0)),N()})}function M(e){var n=_.cloneDeep(e);return n[Q]={},n.type=n.groupType.type,delete n.groupType,n}function P(e){Z?m.updateGroupChildren(Z):m.addGroupNavigation(e)}function R(e){h.editGroup(e)}function U(n){h.deleteGroupWithConfirmation(n).then(_.partial(_.pull,e.items,n))}function F(e){n.url("/group/"+e.id)}function L(e){n.url("/device/"+e.id)}function B(e){return _.some(g.getTabsByURL("/device/"+e.id),{name:"Alarms"})?void n.url("/device/"+e.id+"/alarms"):void L(e)}function j(e){return!E(e)&&!o.isDeviceOrChildDevice(e)}function E(e){return d.isGroup(e)||p.isDynamicGroup(e)}function q(){e.refreshLoading=!0,C().then(_.partialRight(S,!0)).finally(function(){e.refreshLoading=!1})}function W(){e.paging.loading=!0,e.paging.next().then(S).finally(function(){e.paging.loading=!1})}function z(e){return h.unassignDevice(Z,e).then(function(){return _.remove(ee,{id:e.id})})}function V(n){return h.deleteDeviceWithConfirmation(n,j(n)).then(function(){return _.remove(e.items,{id:n.id})})}function Y(){h.assignDevices(Z).then(q)}function J(e){return d.getIconSpecs(e).iconOpen}var K=this,Q="c8y_IsDeviceGroup",X=void 0,Z=void 0,ee=void 0;_.assign(K,{c8yConfig:v,getTitle:H,getSubtitle:T}),_.assign(e,{addNewGroup:$,cancelNewGroup:N,refresh:q,loadNext:W,onClickEditGroup:R,onClickDeleteGroup:U,onClickUnassignDevice:z,onClickDeleteDevice:V,saveNewGroup:O,drillDown:F,getLinkToDM:D,goToDeviceDetails:L,goToDeviceAlarms:B,getIconForGroup:J,isGroupOrDynamicGroup:E,isGroup:d.isGroup,isDeviceOrChildDevice:o.isDeviceOrChildDevice,isOtherItem:j,assignDevices:Y,deviceModel:o.model,deviceSerial:o.serial,c8yConfig:v}),w(),K.inSearchMode=e.inSearchMode}e.$inject=["$scope","$location","$routeParams","$q","$interpolate","c8yInventory","c8yBase","c8yDevices","c8yAlert","c8yTitle","c8yGroupTypesConfig","c8yGroups","c8yTabs","c8yDynamicGroups","c8yConfig","groupTypesHierarchyNavigator","groupsHierarchySvc","gettext","gettextCatalog","c8yApplication"],angular.module("c8y.groupsHierarchy").controller("groupsListCtrl",e)}(),function(){"use strict";function e(e,n,t,i,r,a,s,o,c,l,u,d,g,p){function v(n){w.group=e.group=n;var t=n.type;e.iconForGroup={"c8y-icon-group-smart":"c8y_DynamicGroup"===t,"c8y-icon-group-open":("c8y_DeviceGroup"===t||"c8y_DeviceSubgroup"===t)&&!n.c8y_BrokerSource,"c8y-icon-group-remote":"c8y_DeviceGroup"===t&&n.c8y_BrokerSource}}function m(n){t.save(n).then(h).then(y).then(function(){r.success(u.getString('Group "{{name}}" saved successfully!',n))}).finally(function(){e.groupDetailsForm.editable=!1})}function h(){a.changeTitle({title:e.group.name})}function y(){c.updateGroupNavigation(e.group)}function f(){o.shouldShowLocalSmartRules().then(function(n){e.smartRules=n})}function b(){return g.getGroup(p.getContext().id).then(g.deleteGroupWithConfirmation).then(_.bind(n.path,n,"/group"))}var w=this;t.detail(l.groupId).then(i.getResData).then(v),f(),d.canAdminMOs([l.groupId]).then(function(n){e.readOnly=!n}),_.assign(w,{groupId:l.groupId}),_.assign(e,{save:m,c8yConfig:s,removeGroup:b})}e.$inject=["$scope","$location","c8yInventory","c8yBase","c8yAlert","c8yTitle","c8yConfig","c8ySmartRulesAvailability","groupTypesHierarchyNavigator","$routeParams","gettextCatalog","c8yPermissions","groupsHierarchySvc","c8yUiUtil"],angular.module("c8y.groupsHierarchy").controller("groupDetailsCtrl",e)}(),angular.module("c8y.groupsHierarchy").controller("groupDevicesCtrl",["$scope","$q","c8yInventory","c8yDevices","c8yModal","gettext","gettextCatalog",function(e,n,t,i,r,a,s){"use strict";function o(){return n.when(e.group)}function c(e){if(e.id)return l(e).then(u)}function l(e){return n.all([i.childAssets(e),i.childDevices(e)]).then(function(e){var n=[];return n.push(e[0]),n.push(e[1]),_.flattenDeep(n)})}function u(n){e.devices=n}function d(n){r({title:a("Confirm unassignment?"),body:s.getString('Do you really want to unassign device "{{name}}"?',{name:n.name}),labels:{ok:a("Unassign")},size:"sm"}).then(angular.bind(t,t.removeChildAsset,e.group,n)).then(function(){_.remove(e.devices,function(e){return e.id==n.id})})}function g(){r({templateUrl:"core_groupsHierarchy/views/groupDeviceAssignment.html",controller:"groupDeviceAssignmentCtrl",resolve:{currentGroup:function(){return e.group}}}).then(p)}function p(){return o().then(c)}function v(e){return!i.isDevice(e)}function m(e){$location.url("/device/"+e.id)}function h(e){$location.url("/device/"+e.id+"/alarms")}e.refresh=p,e.paging={refresh:_.noop},e.assignDevices=g,e.unassign=d,e.isDevice=i.isDevice,e.isOtherItem=v,e.goToDeviceDetails=m,e.goToDeviceAlarms=h,e.model=i.model,e.serial=i.serial,e.$watch("group",c)}]),angular.module("c8y.groupsHierarchy").controller("groupDeviceAssignmentCtrl",["$scope","$routeParams","$uibModalInstance","$q","c8yBase","c8yInventory","c8yDevices","currentGroup","gettext","gettextCatalog",function(e,n,t,i,r,a,s,o,c,l){"use strict";function u(){if(o.id)return i.all([s.childAssets(o),s.childDevices(o)]).then(function(n){g=[],g.push(n[0]),g.push(n[1]),e.alreadyAssignedDevices=g=_.flattenDeep(g)})}function d(e){var n=i.when();_.forEach(e,function(e){n=n.then(_.partial(a.addChildAsset,o,e)).then(function(){g.push(e)})}),n.then(function(){e.length=0}).then(t.close)}var g;e.title=c("Assign devices"),e.assign=d,e.isDevice=s.isDevice,e.dismiss=t.dismiss,u()}]),function(){function e(e,n,t,i,r,a,s,o){function c(e){return r.list({text:e,pageSize:1e3}).then(l).then(u)}function l(e){return _.filter(e,function(e){return e.c8y_IsDeviceGroup||a.isProbablyDevice(e)})}function u(n){e.items=n}function d(e){i.changeTitle({title:s("Search all"),subtitle:o.getString('searching "{{expression}}"',{expression:e})})}n.s&&(c(n.s),d(n.s)),e.hideAddAsset=!0,e.inSearchMode=!0}angular.module("c8y.groupsHierarchy").controller("assetSearchCtrl",["$scope","$routeParams","$location","c8yTitle","c8yInventory","c8yDevices","gettext","gettextCatalog",e])}(),function(){"use strict";function e(e,n,t,i,r,a,s,o,c,l,u){function d(){return{groupType:e.getDeviceGroupType()}}function g(e){return a.when(m(e)).then(t.createConfirm).then(n.getResData).then(p)}function p(e){return o.addGroupNavigation(e),e}function v(e){var n=u.getString("Group {{name}} has been created!",{name:e.name});return c.success(n)}function m(e){var n=angular.copy(e);return n[w]={},n.type=n.groupType.type,delete n.groupType,n}function h(){return n.invalid(r.forms,"newGroupForm","name")}function y(e,n){var i=a.when();return _.forEach(n,function(n){var r=_.partial(t.addChildAsset,e,n);i=i.then(r).then(function(){b.push(n)})}),i}function f(e){var n=r.newGroup,t=_.partialRight(y,e),i=a.when(g(n)).then(t);i.then(s.close),i.then(_.partial(v,n))}var b,w="c8y_IsDeviceGroup";r.title=l("Create group"),r.forms={},r.alreadyAssignedDevices=b=[],r.newGroup=d(),r.create=f,r.invalidName=h,r.dismiss=s.dismiss,r.c8yConfig=i}angular.module("c8y.groupsHierarchy").controller("groupCreateAndAssignCtrl",["c8yGroupTypesConfig","c8yBase","c8yInventory","c8yConfig","$scope","$q","$uibModalInstance","groupTypesHierarchyNavigator","c8yAlert","gettext","gettextCatalog",e])}(),function(){"use strict";function e(e){var n;n='<div class="modal-header" ng-show="title">\n  <h3 ng-bind="title | translate"></h3>\n</div>\n<div class="modal-body">\n  <form name="forms.newGroupForm" role="form">\n    <div class="form-group" ng-class="{\'has-error\': invalidName()}">\n      <input type="text" name="name" class="form-control" placeholder="{{\'New group name\' | translate}}" ng-model="newGroup.name" maxlength="{{c8yConfig.validation.groupName.maxlength}}" required>\n    </div>\n  </form>\n  <c8y-device-selector selected-devices="selectedDevices"/>\n</div>\n<div class="modal-footer">\n  <button class="btn btn-default" ng-click="dismiss()" translate>Close</button>\n  <button class="btn btn-primary" ng-disabled="forms.newGroupForm.$invalid" ng-click="create(selectedDevices)" translate translate-n="selectedDevices.length" translate-plural="Create group with {{selectedDevices.length}} devices">\n    Create group with one device\n  </button>\n</div>',e.put("groupsHierarchy/views/groupCreateAndAssign.html",n),e.put("core_groupsHierarchy/views/groupCreateAndAssign.html",n),e.put("/apps/core/groupsHierarchy/views/groupCreateAndAssign.html",n),n='<div ng-controller="groupDetailsCtrl as vm">\n\n  <c8y-ui-action-bar-set>\n    <li>\n      <button class="btn btn-link" ng-click="removeGroup()" c8y-if-allowed admin-mos="[vm.groupId]">\n        <i c8y-icon="trash"></i> {{\'Remove group\' | translate}}\n      </button>\n    </li>\n  </c8y-ui-action-bar-set>\n\n  <div class="flex-row wrap group-info">\n    <div style="align-self: flex-start">\n      <i style="font-size: 50px; margin-bottom:0" class="c8y-icon c8y-icon-duocolor" ng-class="iconForGroup"></i><br>\n      <small class="text-center center-block" style="position:relative" ng-show="!groupDetailsForm.editable">\n        <small uib-tooltip="{{\'Last update\' | translate}}" class="text-muted">\n          {{group.lastUpdated | date:"dd MMM yyyy"}}<br>\n          {{group.lastUpdated | date:"H:mm"}}\n        </small>\n      </small>\n    </div>\n    <form class="col-sm-6 form-editable" name="groupDetailsForm" ng-submit="save(group)" novalidate ng-class="{\'form-read-only\': !groupDetailsForm.editable}">\n\n      <div class="form-group">\n        <input id="group-name" type="text" class="form-control input-lg text-truncate" ng-model="group.name" maxlength="{{c8yConfig.validation.groupName.maxlength}}" placeholder="{{\'e.g. My group\' | translate}}" required>\n      </div>\n      <div class="form-group">\n        <textarea class="form-control" ng-model="group.c8y_Notes" placeholder="{{\'add some notes\' | translate}}" ng-disabled="readOnly" ng-show="groupDetailsForm.editable"></textarea>\n        <p ng-show="!groupDetailsForm.editable" class="word-break">{{group.c8y_Notes}}</p>\n      </div>\n      <small ng-show="!groupDetailsForm.editable" class="text-muted form-edit-btn">\n        <a href="" class="form-edit-btn" ng-click="groupDetailsForm.editable = !groupDetailsForm.editable"><i c8y-icon="pencil"></i> <translate>Edit</translate></a>\n      </small>\n\n\n      <c8y-if-allowed admin-mos="[group.id]">\n        <div class="form-actions">\n          <button type="button" class="btn btn-default" ng-click="groupDetailsForm.editable = !groupDetailsForm.editable"><translate>Cancel</translate></button>\n          <button type="submit" class="btn btn-primary" ng-disabled="groupDetailsForm.$invalid || groupDetailsForm.$pristine" translate>\n            Save changes\n          </button>\n        </div>\n      </c8y-if-allowed>\n    </form>\n\n  </div>\n\n  <div ng-if="smartRules" class="smart-rules-wrapper">\n    <div ng-include="\'smartRules/views/list.html\'"></div>\n  </div>\n</div>\n',e.put("groupsHierarchy/views/groupDetails.html",n),e.put("core_groupsHierarchy/views/groupDetails.html",n),e.put("/apps/core/groupsHierarchy/views/groupDetails.html",n),n='<div class="modal-header" ng-show="title">\n  <h3>{{title | translate}}</h3>\n</div>\n<div class="modal-body">\n  <c8y-device-selector selected-devices="selectedDevices" disabled-devices="alreadyAssignedDevices"></c8y-device-selector>\n</div>\n<div class="modal-footer">\n  <button class="btn btn-default" ng-click="dismiss()" translate>Cancel</button>\n  <button class="btn btn-primary" ng-disabled="selectedDevices.length == 0" ng-click="assign(selectedDevices)" translate translate-n="selectedDevices.length" translate-plural="Assign {{selectedDevices.length}} devices">\n    Assign {{selectedDevices.length}} device\n  </button>\n</div>\n',e.put("groupsHierarchy/views/groupDeviceAssignment.html",n),e.put("core_groupsHierarchy/views/groupDeviceAssignment.html",n),e.put("/apps/core/groupsHierarchy/views/groupDeviceAssignment.html",n),n='<div ng-controller="groupDevicesCtrl">\n  <div class="navbar">\n    <div class="nav navbar-right">\n      <a class="btn btn-link" ng-click="assignDevices()">\n          <i c8y-icon="plus"></i> <translate>Assign devices</translate>\n      </a>\n      <c8y-refresh-btn></c8y-refresh-btn>\n    </div>\n  </div>\n\n  <div class="alert alert-warning" ng-show="devices.length == 0" translate>\n    No devices assigned to group.\n  </div>\n\n  <table class="table table-hover">\n    <tr ng-repeat="dev in devices | filter:isDevice">\n      <td style="width:30px" class="text-center">\n        <c8y-device-status-display device="dev"></c8y-device-status-display>\n      </td>\n\n      <td class="word-break">\n        {{(dev.name || \'Device\' + \' \' + dev.id) | translate}}\n        <small ng-if="model(dev)" class="text-muted hidden-sm hidden-xs" style="margin-right:10px">\n          <strong>{{\'Model\' | translate}}:</strong> {{model(dev)}}\n        </small>\n        <small ng-if="serial(dev)" class="text-muted hidden-sm hidden-xs">\n          <strong>{{\'S/N\' | translate}}:</strong> {{serial(dev)}}\n        </small>\n      </td>\n\n      <td class="text-right interact" ng-click="goToDeviceAlarms(dev)">\n        <small class="status critical" ng-if="dev.c8y_ActiveAlarmsStatus.critical">\n          {{dev.c8y_ActiveAlarmsStatus.critical}} <i c8y-icon="warning"></i>\n        </small>\n        <small class="status major" ng-if="dev.c8y_ActiveAlarmsStatus.major">\n          {{dev.c8y_ActiveAlarmsStatus.major}} <i c8y-icon="exclamation-circle"></i>\n        </small>\n        <small class="status minor" ng-if="dev.c8y_ActiveAlarmsStatus.minor">\n          {{dev.c8y_ActiveAlarmsStatus.minor}} <i c8y-icon="exclamation-circle"></i>\n        </small>\n        <small class="status warning" ng-if="dev.c8y_ActiveAlarmsStatus.warning">\n          {{dev.c8y_ActiveAlarmsStatus.warning}} <i c8y-icon="circle"></i>\n        </small>\n      </td>\n\n      <td class="text-right">\n        <button class="btn btn-danger btn-xs showOnHover" title="{{\'Unassign device\' | translate}}" ng-click="unassign(dev)">\n          <i c8y-icon="times"></i>\n        </button>\n      </td>\n    </tr>\n    <tr ng-repeat="dev in devices | filter:isOtherItem">\n      <td style="width:30px" class="text-center">\n        &nbsp;\n      </td>\n\n      <td class="word-break">\n        {{(dev.name || \'Device \' + dev.id) | translate}}\n        <small ng-if="model(dev)" class="text-muted hidden-sm hidden-xs" style="margin-right:10px">\n          <strong>{{\'Model\' | translate}}:</strong> {{model(dev)}}\n        </small>\n        <small ng-if="serial(dev)" class="text-muted hidden-sm hidden-xs">\n          <strong>{{\'S/N\' | translate}}:</strong> {{serial(dev)}}\n        </small>\n      </td>\n\n      <td>\n\n      </td><td class="text-right">\n        <button class="btn btn-danger btn-xs showOnHover" title="{{\'Unassign item\' | translate}}" ng-click="unassign(dev)">\n          <i c8y-icon="times"></i>\n        </button>\n      </td>\n    </tr>\n  </table>\n</div>\n',e.put("groupsHierarchy/views/groupDevices.html",n),e.put("core_groupsHierarchy/views/groupDevices.html",n),e.put("/apps/core/groupsHierarchy/views/groupDevices.html",n),n='<c8y-ui-title-set title="vm.getTitle()" subtitle="vm.getSubtitle()"></c8y-ui-title-set>\n\n<div ng-switch="currentGroup.type">\n  <div ng-switch-when="c8y_DynamicGroup">\n    <c8y-device-list dynamic-group-id="currentGroup.id" set-titles="true">\n    </c8y-device-list>\n  </div>\n  <div ng-switch-default>\n\n    <c8y-ui-action-bar-set>\n      <li class="navbar-form hidden-xs" ng-show="vm.items.length > 0" action-bar-position="left">\n        <c8y-list-display-control list-length="vm.items.length" on-list-class-change="vm.listClass = listClass">\n        </c8y-list-display-control>\n      </li>\n\n      <li>\n        <div c8y-if-allowed admin-mos="[vm.currentGroup]">\n          <div class="dropdown" uib-dropdown>\n            <button class="dropdown-toggle c8y-dropdown" ng-click="addNewGroup()" uib-dropdown-toggle>\n              <i c8y-icon="plus-circle"></i> <span translate>Add group</span>\n            </button>\n            <ul class="dropdown-menu" uib-dropdown-menu>\n              <li class="dropdown-form">\n                <form name="newGroupForm">\n                  <div class="form-group" ng-show="vm.newGroup">\n                    <input type="text" class="form-control no-cursor" placeholder="{{\'Group name\' | translate}}" ng-model="vm.newGroup.name" maxlength="{{vm.c8yConfig.validation.groupName.maxlength}}" required ng-click="$event.stopPropagation()">\n                  </div>\n                  <button class="btn btn-primary btn-block" ng-show="vm.newGroup" ng-click="saveNewGroup(vm.newGroup)" ng-disabled="newGroupForm.$invalid" translate>Add group</button>\n                </form>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </li>\n\n      <li>\n        <div c8y-if-allowed admin-mos="[vm.currentGroup]">\n          <button class="btn btn-link" ng-show="currentGroup" ng-click="assignDevices()">\n            <i c8y-icon="c8y-device-connect"></i> <translate>Assign devices</translate>\n          </button>\n        </div>\n      </li>\n      <li ng-hide="vm.inSearchMode">\n        <c8y-refresh-btn></c8y-refresh-btn>\n      </li>\n    </c8y-ui-action-bar-set>\n\n    <div class="card-group" ng-class="vm.listClass || \'interact-list\'">\n\n      <!-- empty state -->\n      <div class="c8y-empty-state text-center" ng-show="items.length == 0">\n        <h1 class="c8y-icon c8y-icon-group-add c8y-icon-duocolor"></h1>\n        <h3 translate>No items to display.</h3>\n        <p translate>Add your first group or assign devices using the buttons on the toolbar.</p>\n      </div>\n      <!-- /.empty state -->\n\n      <!-- filter: isGroup -->\n      <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" ng-repeat="i in items|filter:isGroupOrDynamicGroup|orderBy:\'name\'">\n        <div class="card" ng-click="drillDown(i)">\n\n          <div class="card-actions" ng-click="$event.stopPropagation();">\n            <c8y-if-allowed admin-mos="[vm.currentGroup]">\n              <div class="settings pull-right" is-open="menuOpen" uib-dropdown>\n                <button type="button" title="{{\'Options\' | translate}}" class="dropdown-toggle c8y-dropdown" aria-haspopup="true" aria-expanded="false" uib-dropdown-toggle>\n                    <i c8y-icon="ellipsis-v"></i>\n                  </button>\n                <ul class="dropdown-menu" uib-dropdown-menu>\n                  <li>\n                    <a href="" title="{{\'Delete group\' | translate}}" ng-click="onClickDeleteGroup(i)">\n                        <i c8y-icon="times"></i> {{\'Delete\' | translate}}\n                      </a>\n                  </li>\n                </ul>\n              </div>\n            </c8y-if-allowed>\n          </div>\n\n          <div class="card-header separator">\n            <!-- TODO: checkbox for performing bulk actions -->\n            <!-- <div class="card-bulk-check" ng-click="$event.stopPropagation();">\n                <label title="Select" class="c8y-checkbox input-sm item-checkbox">\n                  <input type="checkbox"> <span></span>\n                </label>\n              </div> -->\n\n            <div class="card-icon">\n              <i c8y-icon="{{getIconForGroup(i)}}" class="c8y-icon-duocolor"></i>\n            </div>\n\n            <div class="card-title text-truncate" title="{{i.name}}">\n              {{i.name}}\n            </div>\n\n          </div>\n          <!-- ./card-header -->\n\n          <div class="card-block">\n            <div class="col-xs-12 text-truncate">\n              <label class="small" translate>Number of children</label> {{i.childCount || (i.childAssets.references.length + i.childDevices.references.length)}}\n            </div>\n          </div>\n\n        </div>\n      </div>\n      <!-- /.filter:isGroup -->\n\n\n      <!-- filter: isDeviceOrChildDevice -->\n      <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" ng-repeat="i in items|filter:isDeviceOrChildDevice|orderBy:\'name\'">\n        <div class="card" ng-click="goToDeviceDetails(i)">\n\n          <div class="card-actions" ng-click="$event.stopPropagation()">\n            <c8y-if-allowed admin-mos="[vm.currentGroup]">\n              <div class="settings pull-right" uib-dropdown is-open="menuOpen">\n                <button type="button" title="{{\'Options\' | translate}}" class="dropdown-toggle c8y-dropdown" aria-haspopup="true" aria-expanded="false" uib-dropdown-toggle>\n                  <i c8y-icon="ellipsis-v"></i>\n                </button>\n                <ul class="dropdown-menu" uib-dropdown-menu>\n                  <li ng-if="getLinkToDM(i)">\n                    <c8y-if-allowed any-app="[\'devicemanagement\']">\n                      <a target="_blank" ng-href="{{getLinkToDM(i)}}" title="{{\'Open in Device management\' | translate}}">\n                        <i c8y-icon="external-link"></i> {{\'Device management\' | translate}}\n                      </a>\n                    </c8y-if-allowed>\n                  </li>\n                  <li>\n                    <a href="" ng-hide="inSearchMode" title="{{\'Unassign\' | translate}}" ng-click="onClickUnassignDevice(i)">\n                      <i c8y-icon="chain-broken"></i> {{\'Unassign\' | translate}}\n                    </a>\n                  </li>\n                  <li>\n                    <a href="" title="{{\'Delete\' | translate}}" ng-click="onClickDeleteDevice(i)">\n                      <i c8y-icon="times"></i> {{\'Delete\' | translate}}\n                    </a>\n                  </li>\n                </ul>\n              </div>\n            </c8y-if-allowed>\n          </div>\n\n          <div class="card-header separator text-truncate">\n            <div class="card-icon">\n              <c8y-device-status-display device="i"></c8y-device-status-display>\n            </div>\n\n            <div class="card-title" title="{{(i.name || \'Device \' + i.id) | translate}}">\n              {{(i.name || \'Device \' + i.id) | translate}}\n            </div>\n          </div>\n          <!-- /.card-header -->\n\n          <div class="card-block">\n            <div class="col-xs-12 col-sm-4 text-truncate" ng-if="deviceModel(i)">\n              <label class="small">{{\'Model\' | translate}}</label> {{deviceModel(i)}}\n            </div>\n\n            <div class="col-xs-12 col-sm-4 text-truncate" ng-if="deviceSerial(i)">\n              <label class="small">{{\'S/N\' | translate}}</label> {{deviceSerial(i)}}\n            </div>\n\n            <div class="alarm-status flex-item-right" ng-click="goToDeviceAlarms(i)">\n              <small class="status critical" title="{{\'Critical alarms\' | translate}}" ng-if="i.c8y_ActiveAlarmsStatus.critical" style="white-space: nowrap">\n                  {{i.c8y_ActiveAlarmsStatus.critical}}<i c8y-icon="warning"></i>\n                </small>\n              <small class="status major" title="{{\'Major alarms\' | translate}}" ng-if="i.c8y_ActiveAlarmsStatus.major" style="white-space: nowrap">\n                  {{i.c8y_ActiveAlarmsStatus.major}}<i c8y-icon="exclamation-circle"></i>\n                </small>\n              <small class="status minor" title="{{\'Minor alarms\' | translate}}" ng-if="i.c8y_ActiveAlarmsStatus.minor" style="white-space: nowrap">\n                  {{i.c8y_ActiveAlarmsStatus.minor}}<i c8y-icon="exclamation-circle"></i>\n                </small>\n              <small class="status warning" title="{{\'Warning alarms\' | translate}}" ng-if="i.c8y_ActiveAlarmsStatus.warning" style="white-space: nowrap">\n                  {{i.c8y_ActiveAlarmsStatus.warning}}<i c8y-icon="circle"></i>\n                </small>\n            </div>\n\n          </div>\n          <!-- ./card-block -->\n        </div>\n      </div>\n      <!-- /filter: isDeviceOrChildDevice -->\n\n\n      <!-- filter: isOtherItem -->\n      <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" ng-repeat="i in items|filter:isOtherItem|orderBy:\'name\'">\n        <div class="card" ng-click="goToDeviceDetails(i)">\n\n          <div class="card-actions" ng-click="$event.stopPropagation()">\n            <c8y-if-allowed admin-mos="[vm.currentGroup]">\n              <div class="settings pull-right" title="{{\'Options\' | translate}}" uib-dropdown is-open="menuOpen">\n                <button type="button" class="dropdown-toggle c8y-dropdown" aria-haspopup="true" aria-expanded="false" uib-dropdown-toggle>\n                    <i c8y-icon="ellipsis-v"></i>\n                  </button>\n                <ul class="dropdown-menu" uib-dropdown-menu>\n                  <li>\n                    <a href="" ng-hide="inSearchMode" title="{{\'Unassign\' | translate}}" ng-click="onClickUnassignDevice(i)">\n                        <i c8y-icon="chain-broken"></i> {{\'Unassign\' | translate}}\n                      </a></li>\n                  <li>\n                    <a href="" title="{{\'Delete\' | translate}}" ng-click="onClickDeleteDevice(i)">\n                        <i c8y-icon="times"></i> {{\'Delete\' | translate}}\n                      </a>\n                  </li>\n                </ul>\n              </div>\n            </c8y-if-allowed>\n          </div>\n\n          <div class="card-header separator text-truncate">\n\n            <div class="card-icon">\n              <i c8y-icon="circle text-muted"></i>\n            </div>\n            <div class="card-title" title="{{(i.name || \'Device \' + i.id) | translate}}">\n              {{(i.name || \'Device \' + i.id) | translate}}\n            </div>\n          </div>\n          <div class="card-block">\n            <div class="col-xs-12 col-sm-4 text-truncate" ng-if="deviceModel(i)">\n              <label class="small">{{\'Model\' | translate}}</label> {{deviceModel(i)}}\n            </div>\n\n            <div class="col-xs-12 col-sm-4 text-truncate" ng-if="deviceSerial(i)">\n              <label class="small">{{\'S/N\' | translate}}</label> {{deviceSerial(i)}}\n            </div>\n          </div>\n          <!-- ./card-block -->\n\n        </div>\n      </div>\n      <!-- /filter: isOtherItem -->\n\n    </div>\n    <!-- /.card-group -->\n    <c8y-load-more/>\n  </div>\n</div>',e.put("groupsHierarchy/views/groupsList.html",n),e.put("core_groupsHierarchy/views/groupsList.html",n),e.put("/apps/core/groupsHierarchy/views/groupsList.html",n),n='<div ng-controller="groupsListCtrl">\n  <div ng-include="\'core_groupsHierarchy/views/groupsList.html\'"></div>\n</div>\n',e.put("groupsHierarchy/views/search.html",n),e.put("core_groupsHierarchy/views/search.html",n),e.put("/apps/core/groupsHierarchy/views/search.html",n)}angular.module("c8y.groupsHierarchy").run(["$templateCache",e])}();