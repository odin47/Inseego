/* core_tenantApplications 9.12.5 2018-08-27T16:54:44+00:00 b689bea882f7+ (release/9.12.0) tip */
!function(){"use strict";function n(n,t){n.when("/tenants/:tenantId",{templateUrl:"core_tenantApplications/views/index.html",controller:"tenantAppAssignmentCtrl",icon:"c8y-modules",name:t("Applications"),priority:3e3,showIf:["$routeParams",function(n){return n&&"new"!==n.tenantId}]})}angular.module("c8y.tenantApplications",[]).config(["c8yViewsProvider","gettext",n])}(),function(){"use strict";function n(n,t,e,a,i,l,s,c){function r(){y&&"new"!==y&&i.detail(y).then(s.getResData).then(o).then(p).then(a.sortApps).then(function(t){n.associatedApplications=t})}function o(t){n.tenant=x=t}function p(){return n.tenant.applications.references.map(function(n){return n.application})}function u(){a.listByTenant().then(function(n){return _.uniqBy(n,"id")}).then(d)}function d(t){_.forEach(t,function(n){return g.push(n)}),m(g),n.applications=g}function m(t){n.owners=_(t).map("owner.tenant.id").uniq().map(function(n){return{value:n,label:n}}).concat({value:null,label:"- "+c.getString("Show all")}).value()}function f(t){return i.addApplication(x,t).then(function(){n.associatedApplications.push(t)})}function v(t){return i.removeApplication(x,t).then(function(){return s.removeFromList(n.associatedApplications,t)})}function b(n){w=w!==n?n:null}function h(n){return w===n}var y=t.tenantId,g=[],w=null,x={};n.filterOwner=function(t){return null===n.filter.owner||t.owner.tenant.id===n.filter.owner},n.applications=g,n.associate=f,n.dissociate=v,n.openItem=b,n.isOpen=h,n.filter={owner:null,text:{}},r(),u()}n.$inject=["$scope","$routeParams","$uibModal","c8yApplication","c8yTenant","c8yAlert","c8yBase","gettextCatalog"],angular.module("c8y.tenantApplications").controller("tenantAppAssignmentCtrl",n)}(),function(){"use strict";function n(n){var t;t='<c8y-breadcrumbs-set>\n  <c8y-breadcrumbs-item path="#tenants" label="{{\'Tenants\' | translate}}" icon="c8y-sub-tenants"></c8y-breadcrumbs-item>\n</c8y-breadcrumbs-set>\n\n<div class="row">\n  <div class="col-md-6">\n    <div class="card">\n      <div class="card-header">\n        <h4 translate>Subscribed applications</h4>\n      </div>\n        <ul class="list-group card-inner-scroll" style="max-height: calc(100vh - 230px)">\n          <li class="list-group-item" ng-repeat="a in associatedApplications">\n            <div class="flex-row">\n              <c8y-app-icon app="::a" style="font-size: 30px"></c8y-app-icon>\n                <p style="margin-left: 10px">{{a | humanizeAppName}}</p>\n              <a ng-click="dissociate(a)" class="btn btn-danger flex-item-right btn-xs showOnHover" translate>unsubscribe</a>\n            </div>\n          </li>\n        </ul>\n    </div>\n  </div>\n\n  <div class="col-md-6">\n    <div class="card">\n      <div class="card-header">\n        <h4 class="card-title" translate>Available applications</h4>\n      </div>\n      <hr>\n      <div class="card-block">\n        <div class="form-inline">\n          <div class="input-group input-group-search" style="display: inline-table">\n            <input type="search" class="form-control" ng-model="filter.text.$" placeholder="{{\'Filterâ€¦\' | translate}}">\n            <span class="input-group-addon">\n              <i c8y-icon="search" ng-show="filter.text.$.length === 0 || !filter.text.$ "></i>\n              <i c8y-icon="times" class="text-muted" ng-show="filter.text.$.length > 0" ng-click="filter.text.$ = \'\'"></i>\n            </span>\n          </div>\n\n\n\n          <label class="control-label">{{\'Owner\' | translate}}:</label>\n          <div class="c8y-select-wrapper">\n            <select ng-options="owner.value as owner.label for owner in owners | orderBy:\'label\'" ng-model="filter.owner" class="form-control"></select>\n            <span></span>\n          </div>\n        </div>\n      </div>\n      <ul class="list-group card-inner-scroll" style="max-height:calc(100vh - 294px)">\n\n        <li class="list-group-item flex-row collapsible" ng-class="{\'expanded\': isOpen(a)}" ng-repeat="a in applications|filter:filterOwner|filter:filter.text">\n\n          <div class="list-item-body flex-row">\n            <c8y-app-icon app="::a" style="font-size: 30px"></c8y-app-icon>\n            <p style="margin-left: 10px">{{a | humanizeAppName}}</p>\n\n            <button ng-click="associate(a)" style="margin-right: 30px" class="btn btn-primary btn-xs showOnHover flex-item-right" translate>subscribe</button>\n          </div>\n          <div class="list-item-actions">\n            <button type="button" title="{{\'Expand\' | translate}}" class="collapse-btn" ng-click="openItem(a)">\n              <i c8y-icon="chevron-down"></i>\n            </button>\n          </div>\n          <div uib-collapse="!isOpen(a)">\n            <p><label class="small">{{\'Availability\' | translate}}:</label> {{a.availability}}</p>\n            <p><label class="small">{{\'Type\' | translate}}:</label> {{a.type}}</p>\n            <p><label class="small">{{\'Owner\' | translate}}:</label> {{a.owner.tenant.id}}</p>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n',n.put("tenantApplications/views/index.html",t),n.put("core_tenantApplications/views/index.html",t),n.put("/apps/core/tenantApplications/views/index.html",t)}angular.module("c8y.tenantApplications").run(["$templateCache",n])}();