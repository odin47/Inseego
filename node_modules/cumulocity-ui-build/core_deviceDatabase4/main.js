/* core_deviceDatabase4 9.12.5 2018-08-27T16:54:00+00:00 b689bea882f7+ (release/9.12.0) tip */
function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(i,r){try{var s=t[i](r),o=s.value}catch(e){return void n(e)}return s.done?void e(o):Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)})}return a("next")})}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(i,r){try{var s=t[i](r),o=s.value}catch(e){return void n(e)}return s.done?void e(o):Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)})}return a("next")})}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(i,r){try{var s=t[i](r),o=s.value}catch(e){return void n(e)}return s.done?void e(o):Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)})}return a("next")})}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(i,r){try{var s=t[i](r),o=s.value}catch(e){return void n(e)}return s.done?void e(o):Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)})}return a("next")})}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(i,r){try{var s=t[i](r),o=s.value}catch(e){return void n(e)}return s.done?void e(o):Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)})}return a("next")})}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(i,r){try{var s=t[i](r),o=s.value}catch(e){return void n(e)}return s.done?void e(o):Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)})}return a("next")})}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(i,r){try{var s=t[i](r),o=s.value}catch(e){return void n(e)}return s.done?void e(o):Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)})}return a("next")})}}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(i,r){try{var s=t[i](r),o=s.value}catch(e){return void n(e)}return s.done?void e(o):Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)})}return a("next")})}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(i,r){try{var s=t[i](r),o=s.value}catch(e){return void n(e)}return s.done?void e(o):Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)})}return a("next")})}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(i,r){try{var s=t[i](r),o=s.value}catch(e){return void n(e)}return s.done?void e(o):Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)})}return a("next")})}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(i,r){try{var s=t[i](r),o=s.value}catch(e){return void n(e)}return s.done?void e(o):Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)})}return a("next")})}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(){"use strict";function e(e,t,n,a,i,r,s){e.registerFeaturesManifest(),t.registerFeaturesManifest(),n.registerFeaturesManifest(),a.registerFeaturesManifest(),i.registerFeaturesManifest(),r.registerFeaturesManifest(),s.registerFeaturesManifest()}function t(e,t,n){e.parsers.push(t),e.parsers.push(n)}e.$inject=["c8yModbusDevice","c8yCanbusDevice","c8yCanopenDevice","c8yOPCUADevice","c8yActilityDevice","c8ySigfoxDevice","c8yProfibusDevice"],t.$inject=["c8yDeviceTypeParser","c8yDeviceTypeParserJSON","c8yDeviceTypeParserEDS"],angular.module("c8y.deviceDatabase4",[]).run(e).run(t)}();var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};!function(){"use strict";function e(e,t,n,a,i,r,s,o,l,u){function c(e,t){var n=void 0,a=_.get(e,"meta.type");if(a){var i=_.get(e,"input");if(a===Gt.DISCRETE_IO)n=l(i?"Discrete input":"Coil (discrete output)");else if(a===Gt.REGISTER)if(i)n=l("Input register");else{var r=ht(t);n=_.get(r,"holdingRegisters.elementTypeLabel",l("Holding register"))}}return n}function d(){return Jt}function m(){var e=zt.common,t=zt.deviceType;return _.cloneDeep(_extends({},e,t))}function p(t){var n=_.compact(_.at(t,Ut)),a=_.head(n),i=a&&a.match(/\/inventory\/managedObjects\/(\d+)/),r=_.nth(i,1);return r?Ct(r):e.resolve(null)}function v(e){return _.flow([g,f,y,T])(e)}function g(e){return _.forEach(e.c8y_Coils,function(e){!e.enumValues&&e.statusMapping&&_.isArray(e.statusMapping.enumValues)&&(e.enumValues={0:e.statusMapping.enumValues[0],1:e.statusMapping.enumValues[1]},_.unset(e,"statusMapping.enumValues")),_.isUndefined(e.input)&&(e.input=zt.discreteOutput.input)}),e}function f(e){var t=ht(e);return _.forEach(e.c8y_Registers,function(e){var n=e.input?"inputRegisters":"holdingRegisters",a=_.get(t,n,{});_.get(a,"startBit")&&_.defaults(e,{startBit:zt.register.startBit}),_.get(a,"noBits")&&_.defaults(e,{noBits:zt.register.noBits}),_.get(a,"options.signed")&&_.defaults(e,{signed:zt.register.signed}),!e.unit&&e.measurementMapping&&e.measurementMapping.unit&&(e.unit=e.measurementMapping.unit,_.unset(e,"measurementMapping.unit")),_.isUndefined(e.input)&&(e.input=zt.holdingRegister.input)}),e}function y(e){return e.fieldbusType=_t(e),e}function b(){return o({component:"c8yImportDeviceTypeModal"}).then(Nt)}function h(e){if(!e.type){var t=ht(e);e.type=_.get(t,"type",jt)}return e}function T(e){return _.set(e,Bt,{})}function D(e){return"canbus"===e.fieldbusType&&(e.c8y_useServerTime=!0),e}function x(e){return e.c8y_Coils=_.map(e.c8y_Coils,R),e.c8y_Registers=_.map(e.c8y_Registers,R),e}function R(e){return e.id||(e.id=String(Math.random()).substr(2)),e}function S(e){return e.c8y_Coils=_.orderBy(e.c8y_Coils,["number","input"]),e.c8y_Registers=_.orderBy(e.c8y_Registers,["startBit","number","input","index","subIndex"]),e}function I(e){var t=ht(e),n=!!_.get(t,"configuration.messageIdConfiguration.length");return n&&(e.c8y_MessageTypes=w(e)),e}function w(e){var t=["c8y_Registers","c8y_Coils"];return _.reduce(t,function(t,n){return _.merge(t,E(e,n))},{})}function E(e,t){var n=_.groupBy(e[t],"messageTypeId"),a=_.mapValues(n,function(n){return _.map(n,function(n){return _.indexOf(e[t],n)})});return _.reduce(a,function(e,n,a){return e[a]={},e[a][t]=n,e},{})}function M(e){var t=A(e);return _.set(e,"com_cumulocity_model_smartrest_SmartRestTemplate",t)}function A(e){var t=ht(e),n=t.customizeSmartRestTemplates||_.identity,a={requestTemplates:_.flattenDeep([C(e),N(e),F(e),P(e)]),responseTemplates:_.flattenDeep([Q(),X(),K(),Z()])};return n(a,e)}function C(e){return{msgId:100,method:"PUT",contentType:"application/vnd.com.nsn.cumulocity.managedObject+json",placeholder:Lt,resourceUri:"/inventory/managedObjects/"+Lt,templateString:z([{key:"c8y_CoilStatus",value:new Y(O(e.c8y_Coils).map(function(e){return{key:e.name,value:Lt,raw:!0}}).value())}]),values:["UNSIGNED"].concat(_toConsumableArray(O(e.c8y_Coils).map(function(){return"UNSIGNED"}).value()))}}function N(e){return{msgId:101,method:"PUT",contentType:"application/vnd.com.nsn.cumulocity.managedObject+json",placeholder:Lt,resourceUri:"/inventory/managedObjects/"+Lt,templateString:z([{key:"c8y_RegisterStatus",value:new Y(O(e.c8y_Registers).map(function(e){return{key:e.name,value:Lt,raw:!0}}).value())}]),values:["UNSIGNED"].concat(_toConsumableArray(O(e.c8y_Registers).map(function(){return"NUMBER"}).value()))}}function O(e){return _(e).filter("statusMapping.status")}function F(){return[V(102,"EXECUTING"),V(103,"SUCCESSFUL"),V(104,"FAILED")]}function V(e,t){return{msgId:e,method:"PUT",contentType:"application/vnd.com.nsn.cumulocity.operation+json",placeholder:Lt,resourceUri:"/devicecontrol/operations/"+Lt,templateString:z({status:t}),values:["UNSIGNED"]}}function P(e){return _.flow([k,j,G])({deviceType:e,msgId:300,templates:[]}).templates}function k(e){var t=e.deviceType,n=e.msgId,a=e.templates,i=_.filter(t.c8y_Coils,"alarmMapping"),r=_.filter(t.c8y_Registers,"alarmMapping"),s=n;return _.forEach(i,function(e){a.push($(s,t,e.alarmMapping,U(e))),e.alarmMapping.raiseAlarmTemplate=s,s+=1}),_.forEach(r,function(e){a.push($(s,t,e.alarmMapping,B(e))),e.alarmMapping.raiseAlarmTemplate=s,s+=1}),{deviceType:t,templates:a,msgId:s}}function $(e,t,n,a){return{msgId:e,method:"POST",contentType:"application/vnd.com.nsn.cumulocity.alarm+json",accept:"application/vnd.com.nsn.cumulocity.alarm+json",placeholder:Lt,resourceUri:"/alarm/alarms",templateString:z([{key:"source",value:{id:Lt}},{key:"type",value:n.type},{key:"status",value:r.status.ACTIVE},{key:"severity",value:n.severity},{key:"time",value:Lt},{key:"text",value:n.text},{key:"c8y_ModbusSource",value:a.c8y_ModbusSource}]),values:["UNSIGNED",H(t)]}}function U(e){return{c8y_ModbusSource:{coil:_.pick(e,"input","number")}}}function B(e){return{c8y_ModbusSource:{register:_.pick(e,["input","number","startBit","noBits"])}}}function j(e){var t=e.deviceType,n=e.msgId,a=e.templates,i=_([].concat(_toConsumableArray(t.c8y_Coils),_toConsumableArray(t.c8y_Registers))).filter("measurementMapping").groupBy("measurementMapping.type").value(),r=n;return _.forEach(i,function(e,n){var i=_.map(e,function(e){return _.set(e.measurementMapping,"unit",e.unit||e.measurementMapping.unit)});a.push(L(r,t,n,i)),_.forEach(i,function(e){e.sendMeasurementTemplate=r,_.unset(e,"unit")}),r+=1}),{deviceType:t,templates:a,msgId:r}}function L(e,t,n,a){return{msgId:e,method:"POST",contentType:"application/vnd.com.nsn.cumulocity.measurement+json",placeholder:Lt,resourceUri:"/measurement/measurements",templateString:z(function(){var e=n,t=_defineProperty({source:{id:Lt},time:Lt,type:e},e,{});return _.forEach(a,function(n){var a=n.series,i=n.unit;t[e][a]={value:"%n",unit:i}}),t}()),values:["UNSIGNED",H(t)].concat(_toConsumableArray(_.map(a,function(){return"NUMBER"})))}}function G(e){var t=e.deviceType,n=e.msgId,a=e.templates,i=[].concat(_toConsumableArray(t.c8y_Coils),_toConsumableArray(t.c8y_Registers)),r=n;return _.forEach(i,function(e){_.isUndefined(e.eventMapping)||(a.push(q(r,t,e,e.eventMapping)),e.eventMapping.eventTemplate=r,r+=1)}),{deviceType:t,templates:a,msgId:r}}function q(e,t,n,a){return{msgId:e,method:"POST",contentType:"application/vnd.com.nsn.cumulocity.event+json",placeholder:Lt,resourceUri:"/event/events",templateString:z([{key:"source",value:{id:Lt}},{key:"time",value:Lt},{key:"type",value:a.type},{key:"text",value:a.text},{key:n.name,value:Lt}]),values:["UNSIGNED",H(t),"STRING"]}}function H(e){return e.c8y_useServerTime?"NOW":"DATE"}function z(e,t){var n=void 0;return e instanceof Y?n=W(e.kvObj):_.isArray(e)?n=W(e):_.isObjectLike(e)&&(n=angular.toJson(e)),n=n.replace(/"%n"/g,t||Lt)}function W(e){var t=_.map(e,J);return"{"+t.join(",")+"}"}function J(e){var t=e.key,n=e.value,a=e.raw,i={},r=void 0;return n instanceof Y?(i[t]=":::INNER_OBJECT_STRING:::",r=JSON.stringify(i).replace('":::INNER_OBJECT_STRING:::"',W(n.kvObj))):a?(i[t]=":::RAW_VALUE:::",r=JSON.stringify(i).replace('":::RAW_VALUE:::"',n)):(i[t]=n,r=JSON.stringify(i)),r.substr(1,r.length-2)}function Y(e){this.kvObj=e}function Q(){return{msgId:200,condition:"$.c8y_SetCoil",pattern:["$.id","$.c8y_SetCoil.address","$.c8y_SetCoil.input","$.c8y_SetCoil.coil","$.c8y_SetCoil.value"]}}function X(){return{msgId:201,condition:"$.c8y_SetRegister",pattern:["$.id","$.c8y_SetRegister.ipAddress","$.c8y_SetRegister.address","$.c8y_SetRegister.input","$.c8y_SetRegister.register","$.c8y_SetRegister.startBit","$.c8y_SetRegister.noBits","$.c8y_SetRegister.value"]}}function K(){return{msgId:202,condition:"$.c8y_ModbusDevice",pattern:["$.id","$.deviceId","$.c8y_ModbusDevice.id","$.c8y_ModbusDevice.address","$.c8y_ModbusDevice.type","$.c8y_ModbusDevice.protocol"]}}function Z(){return{msgId:203,condition:"$.c8y_ModbusSource",pattern:["$.id"]}}function ee(e){var t=e.name+".json",n="application/json",a=JSON.stringify(te(e),null,2),i=new Blob([a],{type:n});window.saveAs(i,t)}function te(e){return e.c8y_ModbusDeviceTypeInfo=ne(e),e.c8y_Coils=_.map(e.c8y_Coils,ae),e.c8y_Registers=_.map(e.c8y_Registers,ae),_.pick(e,["c8y_ModbusDeviceTypeInfo","c8y_Coils","c8y_Registers","c8y_useServerTime","c8y_MessageIdConfiguration"])}function ne(e){return _.omit(_extends({},_.get(e,"c8y_ModbusDeviceTypeInfo",{}),{name:e.name,minFieldbusUI:$t,fieldbusType:e.fieldbusType}),["id","category","description"])}function ae(e){return e.eventMapping&&(e.eventMapping=_.omit(e.eventMapping,["eventTemplate"])),e.alarmMapping&&(e.alarmMapping=_.omit(e.alarmMapping,["raiseAlarmTemplate"])),e.measurementMapping&&(e.measurementMapping=_.omit(e.measurementMapping,["sendMeasurementTemplate"])),_.omit(e,["id","originalName","originalNumber","originalStartBit","meta"])}function ie(){var e=It();return e&&_.map(e)}function re(e){return _.filter(e,function(e){var t=e.minFieldbusUI;return $t>=t})}function se(e){var t=_.get(e,"c8y_Coils",[]),n=_.get(e,"c8y_Registers",[]);return _.union(_.map(t,function(t){return le(t,e)}),_.map(n,function(t){return Te(t,e)}))}function oe(e){if(e)return e.c8y_Coils=_.map(e.c8y_Coils,le),e}function le(e){return e.meta=e.meta||{},_.flow([ue,ce,de,me,pe])(e)}function ue(e){return e.meta.type=e.meta.type||Gt.DISCRETE_IO,e}function ce(e){return e.meta.enumType=e.meta.enumType||!!e.enumValues,e.meta.enumValues=e.meta.enumValues||e.enumValues&&_.map(e.enumValues,Re),e}function de(e){var t=_.get(e,"statusMapping.status");return e.meta.showStatus=e.meta.showStatus||"read"===t||"write"===t,e.meta.updateStatus=e.meta.updateStatus||"write"===t,e}function me(e){var t=_.get(e,"alarmMapping.raiseAlarmTemplate");return e.meta.raiseAlarm=e.meta.raiseAlarm||!_.isUndefined(t),e}function pe(e){var t=_.get(e,"eventMapping.eventTemplate");return e.meta.sendEvent=e.meta.sendEvent||!_.isUndefined(t),e}function ve(e){var t=e;return t.meta&&(t=_.flow([ge,fe,ye,be,he])(t),_.unset(t,"meta")),t}function ge(e){return e.meta.type=void 0,e}function fe(e){return e.meta.enumType?(e.enumValues={},_.forEach(e.meta.enumValues,function(t){var n=t.value,a=t.label;e.enumValues[n]=a})):e.enumValues=void 0,e}function ye(e){return e.meta.showStatus||e.meta.updateStatus?(e.statusMapping=e.statusMapping||{},e.meta.showStatus&&(e.statusMapping.status="read"),e.meta.updateStatus&&(e.statusMapping.status="write")):e.statusMapping=void 0,e}function be(e){return e.meta.raiseAlarm?(e.alarmMapping=e.alarmMapping||{},e.alarmMapping.raiseAlarmTemplate=null):e.alarmMapping=void 0,e}function he(e){return e.meta.sendEvent?(e.eventMapping=e.eventMapping||{},e.eventMapping.eventTemplate=null):e.eventMapping=void 0,e}function _e(e){if(e)return e.c8y_Registers=_.map(e.c8y_Registers,function(t){return Te(t,e)}),e}function Te(e,t){return e.meta=e.meta||{},_.flow([De,xe,Se,Ie,we,Ee,Me,function(e){return Ae(e,t)},function(e){return Ce(e,t)},Ne])(e)}function De(e){return e.meta.type=e.meta.type||Gt.REGISTER,e}function xe(e){return e.meta.enumType=e.meta.enumType||!!e.enumValues,e.meta.enumValues=e.meta.enumValues||e.enumValues&&_.map(e.enumValues,Re),e}function Re(e,t){return{label:e,value:parseFloat(t)}}function Se(e){var t=_.get(e,"statusMapping.status");return e.meta.showStatus=e.meta.showStatus||"read"===t||"write"===t,e.meta.updateStatus=e.meta.updateStatus||"write"===t,e}function Ie(e){var t=_.get(e,"measurementMapping.sendMeasurementTemplate");return e.meta.sendMeasurement=e.meta.sendMeasurement||!_.isUndefined(t),e}function we(e){var t=_.get(e,"alarmMapping.raiseAlarmTemplate");return e.meta.raiseAlarm=e.meta.raiseAlarm||!_.isUndefined(t),e}function Ee(e){var t=_.get(e,"eventMapping.eventTemplate");return e.meta.sendEvent=e.meta.sendEvent||!_.isUndefined(t),e}function Me(e){return e.meta.sendManagedObjectUpdate=e.meta.sendManagedObjectUpdate||!!e.managedObjectMapping,e}function Ae(e,t){var n=ht(t)[e.input?"inputRegisters":"holdingRegisters"],a=_.get(n,"dataType.choices",[]);return e.meta.dataType=e.meta.dataType||_.find(a.values(),{value:e.dataType}),e}function Ce(e,t){var n=ht(t)[e.input?"inputRegisters":"holdingRegisters"],a=_.get(n,"accessType.choices",[]);return e.meta.accessType=e.meta.accessType||_.find(a.values(),{value:e.accessType}),e}function Ne(e){return e.meta.valuesRange=e.meta.valuesRange||Oe(e),e}function Oe(e){var t=_.get(e.meta,"dataType",{});if(t.valuesRange)return t.valuesRange;var n=Fe([t.divisor,e.divisor,1]),a=Fe([t.multiplier,e.multiplier,1]),i=Fe([t.decimalPlaces,e.decimalPlaces,0]),r=Fe([t.noBits,e.noBits]),s=Fe([t.signed,e.signed,!1]);if(!r)return{};var o=Ve(a*Math.pow(10,-i)/n),l=Ve((s?-Math.pow(2,r-1):0)*o),u=Ve((s?Math.pow(2,r-1)-1:Math.pow(2,r)-1)*o);return{base:{decimalPlaces:i,step:o,min:l,max:u},custom:{decimalPlaces:i,step:o,min:Math.max(l,e.min||l),max:Math.min(u,e.max||u)},mask:{min:0,max:Math.pow(2,r)}}}function Fe(e){return _.head(_.reject(e,_.isUndefined))}function Ve(e){var t=Math.pow(10,10);return Math.round(e*t)/t}function Pe(e){var t=e;return e.meta&&(t=_.flow([ke,$e,Ue,Be,je,Le,Ge,qe,He,ze])(e),_.unset(t,"meta")),t}function ke(e){return e.meta.type=void 0,e}function $e(e){return e.meta.enumType?(e.enumValues={},_.forEach(e.meta.enumValues,function(t){var n=t.value,a=t.label;e.enumValues[n]=a})):e.enumValues=void 0,e}function Ue(e){return e.meta.showStatus||e.meta.updateStatus?(e.statusMapping=e.statusMapping||{},e.meta.showStatus&&(e.statusMapping.status="read"),e.meta.updateStatus&&(e.statusMapping.status="write")):e.statusMapping=void 0,e}function Be(e){return e.meta.sendMeasurement?(e.measurementMapping=e.measurementMapping||{},e.measurementMapping.sendMeasurementTemplate=null):e.measurementMapping=void 0,e}function je(e){return e.meta.raiseAlarm?(e.alarmMapping=e.alarmMapping||{},e.alarmMapping.raiseAlarmTemplate=null):e.alarmMapping=void 0,e}function Le(e){return e.meta.sendEvent?(e.eventMapping=e.eventMapping||{},e.eventMapping.eventTemplate=null):e.eventMapping=void 0,e}function Ge(e){return e.meta.sendManagedObjectUpdate?e.managedObjectMapping=e.managedObjectMapping||{}:e.managedObjectMapping=void 0,e}function qe(e){return e.meta.dataType?e.dataType=e.meta.dataType.value:e.dataType=void 0,e}function He(e){return e.meta.accessType?e.accessType=e.meta.accessType.value:e.accessType=void 0,e}function ze(e){return e.meta.valuesRange=void 0,e}function We(e){e.c8y_Registers=[],e.c8y_Coils=[]}function Je(e){var t=_.compact(Xe(e));return _.head(t)}function Ye(e,t,n){return _(e).chain().map(function(e){return{score:Qe(e,t,n),element:e}}).reject(function(e){return _.isUndefined(e.score)}).orderBy("score").head().get("element").value()}function Qe(e,t,n){var a=e.meta.type.value===n,i=Xe(e),r=_.findIndex(i,_.negate(_.isUndefined)),s=_.indexOf(i,t);return a&&s>=0?r-s:void 0}function Xe(e){return[Ke(e),Ze(e),et(e),tt(e)]}function Ke(e){return _.get(e,"id")}function Ze(e){return nt(e,["input","number","startBit"])}function et(e){return nt(e,["input","number"])}function tt(e){return nt(e,["number"])}function nt(e,t){var n=_.map(t,_.propertyOf(e)),a=_.every(n,_.negate(_.isUndefined));if(a)return n.join(",")}function at(e){return _(e.c8y_Coils).reject("input").groupBy(ot).value()}function it(e){return _(e.c8y_Coils).filter("input").groupBy(ot).value()}function rt(e){return _(e.c8y_Registers).reject("input").groupBy(ot).value()}function st(e){return _(e.c8y_Registers).filter("input").groupBy(ot).value()}function ot(e){return e.category||""}function lt(){return _.cloneDeep(_extends({},zt.common,zt.element,zt.discreteIO,zt.discreteOutput))}function ut(){return _.cloneDeep(_extends({},zt.common,zt.element,zt.discreteIO,zt.discreteInput))}function ct(e){return"canbus"===e.fieldbusType?_.cloneDeep(_extends({},zt.common,zt.element,zt.register,zt.canbusRegister,zt.holdingRegister)):"canopen"===e.fieldbusType?_.cloneDeep(_extends({},zt.common,zt.canopenRegister)):_.cloneDeep(_extends({},zt.common,zt.element,zt.register,zt.holdingRegister))}function dt(){return _.cloneDeep(_extends({},zt.common,zt.element,zt.register,zt.inputRegister))}function mt(e,t){return o({component:"c8yConfigureDiscreteIOModal",title:pt(e),resolve:_extends({title:function(){return pt(e)}},ft(e,t.c8y_Coils,t))})}function pt(e){return e.input?e.name?u.getString('Edit discrete input: "{{name}}"',e):l("New discrete input"):e.name?u.getString('Edit coil: "{{name}}"',e):l("New coil")}function vt(e,t){return o({component:"c8yConfigureRegisterModal",resolve:_extends({title:function(){return gt(e,t)}},ft(e,t.c8y_Registers,t))})}function gt(e,t){var n=ht(t);return e.input?e.name?u.getString('Edit input register: "{{name}}"',e):l("New input register"):e.name?u.getString(_.get(n,"holdingRegisters.editRegisterModalTitle",l('Edit holding register: "{{name}}"')),e):_.get(n,"holdingRegisters.newRegisterModalTitle",l("New holding register"))}function ft(e,t,n){return{element:function(){return _.cloneDeep(yt(e))},existingElements:function(){return _.cloneDeep(t)},existingCategories:function(){return _.cloneDeep(bt(n))},deviceType:function(){return _.cloneDeep(n)},fieldbusType:function(){return _t(n)},features:function(){return ht(n)}}}function yt(e){if(e)return _extends({},e,{meta:{original:_.cloneDeep(e)}})}function bt(e){return _([].concat(_toConsumableArray(_.get(e,"c8y_Coils",[])),_toConsumableArray(_.get(e,"c8y_Registers",[])))).filter("category").map("category").uniq().map(function(e){return{name:e}}).value()}function ht(e){return _.find(Jt,{fieldbusType:_t(e)})||{}}function _t(e){return e.fieldbusType||"modbus"}function Tt(e){e.meta.enumValues=e.meta.enumValues||[],e.meta.enumValues.push({value:null,label:null})}function Dt(e,t){e.meta.enumValues=_.without(e.meta.enumValues,t)}function xt(e,t){var n=e.startBit+e.noBits-1,a=t.startBit+t.noBits-1;return Math.max(e.startBit,t.startBit)<=Math.min(n,a)}function Rt(e){return o({component:"c8ySelectFieldbusPropertyModal",resolve:{modalParams:function(){return _.defaults(e,{})}}})}function St(e){var t=(It()||{})[e];return t&&_.clone(t._item)}function It(){return _.get(window,"c8y.collections.devicetypes")}function wt(e){return window.btoa(JSON.stringify(e,null,2))}function Et(e){return e.id+".json"}function Mt(e){return _.some(["c8y_ModbusDevice","c8y_CanDevice","c8y_OPCUADevice","c8y_OPCUAGateway","c8y_ProfibusDevice"],function(t){return _.has(e,t)})}var At=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,a,r,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,a={},r={__and:[{__or:[{__has:Bt},{type:jt}]}]},t&&(r.__and=[].concat(_toConsumableArray(r.__and),[t])),e.next=6,i.listQuery(r,a,n);case 6:return s=e.sent,e.abrupt("return",_.map(s,v));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Ct=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,i.detail(t);case 3:return e.t1=e.sent,n=e.t0.getResData.call(e.t0,e.t1),e.abrupt("return",v(n));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Nt=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=_.flow([h,T,D,x,S,I,M])(t),!t.id){e.next=3;break}return e.abrupt("return",i.save(n));case 3:return e.t0=a,e.next=6,i.createConfirm(n);case 6:return e.t1=e.sent,r=e.t0.getResData.call(e.t0,e.t1),e.abrupt("return",Ot(r));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Ot=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.createIdentity(n,{type:"c8y_SmartRestDeviceIdentifier",externalId:n.name},{silentError:!0});case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),a=e.reject.bind(e,{errorMessage:t.t0.data.message}),t.abrupt("return",i.remove(n).then(a,a));case 10:case"end":return t.stop()}},t,this,[[0,6]])}));return function(e){return t.apply(this,arguments)}}(),Ft=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=ie()){e.next=8;break}return i=Ht+"/index.json",e.t0=a,e.next=6,t.get(i);case 6:e.t1=e.sent,n=e.t0.getResData.call(e.t0,e.t1);case 8:return e.abrupt("return",re(n));case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),Vt=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n){var a,i,r,s,o,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n+".json",i="predefinedDeviceTypesUrl/"+a,e.next=4,t.get(i);case 4:r=e.sent,s=JSON.stringify(r.data,null,2),o=r.headers("Content-Type"),l=new Blob([s],{type:o}),window.saveAs(l,a);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Pt=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id||t,e.next=3,kt(n);case 3:return a=e.sent,e.abrupt("return",wt(a));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),kt=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n){var i,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=St(n)){e.next=8;break}return r=Ht+"/"+n+".json",e.t0=a,e.next=6,t.get(r);case 6:return e.t1=e.sent,e.abrupt("return",e.t0.getResData.call(e.t0,e.t1));case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),$t=n.has("FIELDBUS_UI_VERSION")?n.get("FIELDBUS_UI_VERSION"):4,Ut=["c8y_ModbusDevice.type","c8y_CanBus.type","c8y_CANopenDevice.type","c8y_OPCUADevice.type","c8y_ProfibusDevice.type"],Bt="c8y_IsDeviceType",jt="c8y_ModbusDeviceType",Lt="%%",Gt=a.createEnum(["DISCRETE_IO","REGISTER"]),qt=a.createEnum([{name:"FPORT",label:"FPort"},{name:"PAYLOAD",label:"Payload"}]),Ht=a.dataFilePath("devicetypes"),zt={common:{name:null},deviceType:{c8y_Coils:[],c8y_Registers:[]},element:{number:null},discreteIO:{},discreteOutput:{input:!1},discreteInput:{input:!0},register:{multiplier:1,divisor:1,offset:0,decimalPlaces:0,startBit:0,noBits:16,unit:"",signed:!1},canbusRegister:{noBits:64,offset:0},canopenRegister:{},holdingRegister:{input:!1},inputRegister:{input:!0}},Wt={discreteIO:{enumValues:[{value:0,label:"0"},{value:1,label:"1"}]}},Jt=[],Yt={ElementType:Gt,MessageIdSources:qt,metaDefaults:Wt,featuresManifests:Jt,getElementTypeLabel:c,getDeviceTypesFeatures:d,getDeviceTypeFeatures:ht,getEmptyDeviceType:m,getAvailableDeviceTypes:At,getDeviceTypeFromDevice:p,getDeviceType:Ct,save:Nt,exportDeviceTypeAndSaveAs:ee,importDeviceTypeWithUI:b,getPredefinedDeviceTypeInfos:Ft,getPredefinedDeviceType:kt,downloadPredefinedDeviceTypeAndSaveAs:Vt,upgradeDeviceType:v,getElementsWithMeta:se,addDiscreteIOsMeta:oe,addDiscreteIOMeta:le,removeDiscreteIOMeta:ve,addRegistersMeta:_e,addRegisterMeta:Te,removeRegisterMeta:Pe,removeAllElements:We,getElementRefId:Je,findElementBestMatchingRefId:Ye,getDiscreteOutputsCategorized:at,getDiscreteInputsCategorized:it,getHoldingRegistersCategorized:rt,getInputRegistersCategorized:st,getEmptyDiscreteOutput:lt,getEmptyDiscreteInput:ut,getEmptyHoldingRegister:ct,getEmptyInputRegister:dt,editDiscreteIOWithUI:mt,editRegisterWithUI:vt,addEmptyEnumValue:Tt,removeEnumValue:Dt,areOverlappingRegisters:xt,getValuesRange:Oe,openFieldbusSelector:Rt,downloadPredefinedDeviceTypeHref:Pt,predefinedDeviceTypeHrefFilename:Et,isFieldbusDevice:Mt};return Yt}e.$inject=["$q","$http","$injector","c8yBase","c8yInventory","c8yAlarms","c8yIdentity","c8yModal","gettext","gettextCatalog"],angular.module("c8y.deviceDatabase4").factory("c8yDeviceDatabase",e)}(),function(){"use strict";function e(e){function t(e){var t=[],a=_.get(e,"c8y_CoilStatus"),i=_.get(e,"c8y_RegisterStatus");return a&&(t.push(["c8y_CoilStatus"]),n(a,["c8y_CoilStatus"],t)),i&&(t.push(["c8y_RegisterStatus"]),n(i,["c8y_RegisterStatus"],t)),t}function n(e,t,a){_.isPlainObject(e)&&_.forEach(e,function(e,i){var r=t.concat([i]);a.push(r),n(e,r,a)})}function a(t){return{keyPath:t,label:e("humanize2")(_.last(t)),id:"c8yFieldbusProps!!"+t.join("!!"),fieldbus:!0}}var i={generatePaths:t,createProperty:a};return i}e.$inject=["$filter"],angular.module("c8y.deviceDatabase4").factory("fieldbusPropertyGenerator",e)}(),function(){"use strict";function e(e,t){function n(n){return a(n).then(function(a){return a?e.resolve(a.parseFile(n)):e.reject({feedback:{type:"error",summary:t("Unsupported file format!")}})})}function a(t){return _.reduce(i,function(n,a){return n.then(function(n){return n||e.resolve(a.doesSupportFile(t)).then(function(e){return e?a:void 0},function(){})})},e.resolve())}var i=[];return{parsers:i,parseFile:n}}e.$inject=["$q","gettext"],angular.module("c8y.deviceDatabase4").factory("c8yDeviceTypeParser",e)}(),function(){"use strict";function e(e,t,n,a){function i(e){return/\.json$/.test(e.name)}function r(t){return e(function(e,n){var i=new FileReader;i.onload=function(t){var n=t.target;return e(n.result)},i.onerror=function(){return n({feedback:{type:"error",summary:a("Could not read file!")}})},i.readAsText(t)}).then(s)}function s(t){var n=void 0;try{n=e.resolve(JSON.parse(t))}catch(t){n=e.reject({feedback:{type:"error",summary:a("Could not parse JSON content!")}})}return n.then(o)}function o(e){var t=_.cloneDeep(e),n="c8y_ModbusDeviceTypeInfo",i=_.get(t,n,{});t.name=t.name||i.name,t.fieldbusType=t.fieldbusType||i.fieldbusType,_.unset(t,n);var r={type:"success",summary:a("JSON parsed successfully!")};return{deviceType:t,feedback:r}}return{doesSupportFile:i,parseFile:r,parseString:s,parseObject:o}}e.$inject=["$q","$rootScope","c8yDeviceDatabase","gettext"],angular.module("c8y.deviceDatabase4").factory("c8yDeviceTypeParserJSON",e)}();var _slicedToArray=function(){function e(e,t){var n=[],a=!0,i=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){"use strict";function e(e,t,n,a,i,r){function s(e){return/\.eds$/.test(e.name)}function o(t){return e(function(e,n){var a=new FileReader;a.onload=function(t){
var n=t.target;return e(n.result)},a.onerror=function(e){return n({feedback:{type:"error",summary:i("Could not read file!"),details:e}})},a.readAsText(t)}).then(l).then(function(e){return _.defaults(e.deviceType,{name:t.name.replace(/\.eds$/,"")}),e})}function l(t){var n=void 0;try{n=e.resolve(ini.parse(t))}catch(t){n=e.reject({feedback:{type:"error",summary:i("Could not parse EDS content!"),details:t}})}return n.then(u)}function u(t){var n=c(t),a={},r={details:[]};return p(n,a,r),g(n,a,r),f(n,a,r),b(n,a,r),_.filter(r.details,{type:"error"}).length?(r.type="error",r.summary=i("EDS parsed with errors."),e.reject({feedback:r})):(_.filter(r.details,{type:"warning"}).length?(r.type="warning",r.summary=i("EDS parsed with warnings.")):(r.type="success",r.summary=i("EDS parsed successfully.")),e.resolve({deviceType:_.omitBy(a,_.isUndefined),feedback:r}))}function c(e){return _.transform(e,function(e,t,n){e[d(n)]=m(t,n)},{})}function d(e){var t=/^([0-9A-Fa-f]+)(sub([0-9A-Fa-f]+)){0,1}$/,n=_.toString(e).match(t)||[],a=_slicedToArray(n,4),i=a[1],r=a[3];return _.isUndefined(i)&&_.isUndefined(r)?e:""+M(i)+(_.isUndefined(r)?"":"sub"+M(r))}function m(e,t){var n=/^([0-9A-Fa-f]+)(sub([0-9A-Fa-f]+)){0,1}$/,a=_.toString(t).match(n)||[],i=_slicedToArray(a,4),r=i[1],s=i[3];return _.defaults(_.mapValues(e,function(e){return E(e)?M(e):_.isNaN(_.toNumber(e))?e:_.toNumber(e)}),{id:t,Index:_.isUndefined(r)?void 0:M(r),SubIndex:_.isUndefined(s)?void 0:M(s)})}function p(e,t){t.name=v(e)}function v(e){var t=_.compact([_.get(e,"DeviceInfo.VendorName"),_.get(e,"DeviceInfo.ProductName"),_.get(e,"DeviceInfo.RevisionNumber")]);return t.length>0?t.join("_"):void 0}function g(e,t){t.fieldbusType="canopen"}function f(e,t,n){t.deviceType=y(e),t.deviceType||n.details.push({type:"warning",text:i("[DeviceType] - not found")})}function y(e){return _.get(e,[M("1000"),"DefaultValue"])}function b(e,t,n){var i=h(e),r=a.getDeviceTypeFeatures(t),s=[];_.forEach(i,function(t){return T(t,s,e,n,r)});var o=_.sortBy(s,["index","subIndex"]);R(o,n),t.c8y_Registers=o}function h(e){return _(e).filter({ObjectType:7}).reject({SubIndex:0}).value()}function T(e,t,n,a,i){var s=i.holdingRegisters.dataType.choices.values(),o=i.holdingRegisters.accessType.choices.values(),l=_.omitBy({category:e.SubIndex?n[e.Index].ParameterName:void 0,name:e.ParameterName?e.ParameterName+" ("+w(e.Index)+")":void 0,index:e.Index,subIndex:e.SubIndex,dataType:D(e,s),accessType:x(e,o),min:e.LowLimit,max:e.HighLimit},_.isUndefined),u=!0;_.isUndefined(l.name)&&(u=!1,a.details.push({type:"warning",text:r.getString("[{{id}}] - missing ParameterName",e)})),_.isUndefined(l.dataType)&&(u=!1,a.details.push({type:"warning",text:r.getString("[{{id}}] - missing, invalid or unsupported DataType",e)})),_.isUndefined(l.accessType)&&(u=!1,a.details.push({type:"warning",text:r.getString("[{{id}}] - missing, invalid or unsupported AccessType",e)})),u&&(t.push(l),a.details.push({type:"info",text:r.getString("[{{id}}] - added as variable",e)}))}function D(e,t){var n=_.find(t,{edsValue:e.DataType});return _.get(n,"value")}function x(e,t){var n=_.find(t,{value:e.AccessType});return _.get(n,"value")}function R(e,t){var n=[];_.forEach(e,function(e){return S(e,e.name,n,t)})}function S(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(_.includes(n,e.name)){var s=i+1;e.name=t+" ("+s+")",S(e,t,n,a,s)}else n.push(e.name),i>1&&a.details.push({type:"info",text:r.getString('Duplicate ParameterName "{{name}}" for object [{{id}}] renamed to "{{register.name}}".',{name:t,id:I(e),register:e})})}function I(e){return""+w(e.index)+(e.subIndex?"sub"+w(e.subIndex):"")}function w(e){return _.toNumber(e).toString(16)}function E(e){return/^0x[0-9A-Fa-f]+$/.test(e)}function M(e){return parseInt(_.toString(e).replace(/^0x/,""),16)}return{doesSupportFile:s,parseFile:o,parseString:l,parseObject:u}}e.$inject=["$q","$rootScope","c8yDeviceTypeParser","c8yDeviceDatabase","gettext","gettextCatalog"],angular.module("c8y.deviceDatabase4").factory("c8yDeviceTypeParserEDS",e)}(),function(){"use strict";function e(e,t,n,a,i,r,s,o,l,u){function c(){r.featuresManifests.push(A)}function d(e,t,n){return{deviceId:e.id,description:u.getString("Added new child device to {{name}} ({{id}})",e),c8y_ModbusDevice:{id:n.id,name:n.name,address:n.c8y_ModbusDevice.address,ipAddress:n.c8y_ModbusDevice.ipAddress,type:"/inventory/managedObjects/"+t.id,protocol:n.c8y_ModbusDevice.protocol}}}function m(e){return e.changePending}function p(e,t){var n=M[t.meta.type.value];return e&&e[n]&&parseFloat(e[n][t.name])}function v(e,t){var n=p(e,t);return t.meta.enumType&&(n=t.meta.enumValues[n].label),n}function g(e,t){var n=t.statusMapping;return!e.c8y_ModbusReadOnlyDevice&&n&&"write"===n.status}function f(e,t,n,a){var i=n.meta.type;return i===w?y(e,t,n,a):i===E?b(e,t,n,a):void 0}function y(e,t,n,a){return{deviceId:e.id,description:u.getString("{{name}} status changed to {{label}}",{name:n.name,label:a.label}),c8y_SetCoil:{address:e.c8y_ModbusDevice.address,input:n.input,coil:n.number,value:a.value}}}function b(e,t,n,a){var i={deviceId:e.id,description:u.getString("{{name}} value changed to {{value}}{{unit}}",{name:n.name,value:a.label||a.value,unit:!a.label&&n.unit?" "+n.unit:""}),c8y_SetRegister:{}};return"opcua"===t.fieldbusType?i.c8y_SetRegister={address:e.c8y_OPCUADevice.browsePath,register:n.browsePath,value:a.value}:i.c8y_SetRegister={ipAddress:e.c8y_ModbusDevice.ipAddress,address:e.c8y_ModbusDevice.address,input:n.input,register:n.number,startBit:n.startBit,noBits:n.noBits,value:a.value},i}function h(e,t,n){var a=t.meta.type;a===w?_.set(e,["c8y_CoilStatus",t.name],n.value):a===E&&_.set(e,["c8y_RegisterStatus",t.name],n.value)}var T,D=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n,a){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(n,a);case 2:return r=e.sent,e.t0=t,e.next=6,i.createConfirm(r);case 6:return e.t1=e.sent,o=e.t0.getResData.call(e.t0,e.t1),e.next=10,i.addChildDevice(n,o);case 10:return o.owner=n.owner,e.next=13,i.save(o);case 13:return e.abrupt("return",s.create(d(n,a.deviceType,o)));case 14:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.current();case 2:return i=e.sent,e.abrupt("return",{name:n.name,type:n.deviceType.name,c8y_ModbusDevice:{address:n.address,ipAddress:n.ipAddress,type:"/inventory/managedObjects/"+n.deviceType.id,protocol:n.protocol},owner:i.id});case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n,a,i){var o,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!g(n,a)){t.next=11;break}return t.next=3,r.getDeviceTypeFromDevice(n);case 3:return o=t.sent,l=f(n,o,a,i),a.changePending=!0,t.next=8,S(l);case 8:return u=t.sent,u.status===s.status.SUCCESSFUL?(h(n,a,i),a.changePending=!1):u.status===s.status.FAILED&&(a.changePending=!1),t.abrupt("return",u);case 11:return t.abrupt("return",e.reject());case 12:case"end":return t.stop()}},t,this)}));return function(e,n,a){return t.apply(this,arguments)}}(),S=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.createWithNotifications(t);case 2:return n=e.sent,n.created.then(function(){return o.success(u.getString('Operation "{{description | translate}}" has been created!',t))}),e.next=6,n.completed;case 6:return a=e.sent,a.status===s.status.SUCCESSFUL?o.success(u.getString('Operation "{{description | translate}}" has been completed!',t)):a.status===s.status.FAILED&&(a.failureReason?o.danger(u.getString('Operation "{{description | translate}}" has failed because of reason: "{{failureReason}}"!',a)):o.danger(u.getString('Operation "{{description | translate}}" has failed!',a))),e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),I=r.ElementType,w=I.DISCRETE_IO,E=I.REGISTER,M=(T={},_defineProperty(T,w.value,"c8y_CoilStatus"),_defineProperty(T,E.value,"c8y_RegisterStatus"),T),A={label:l("Modbus"),fieldbusType:"modbus",discreteOutputs:{functionalities:{showStatus:!0,updateStatus:!0}},discreteInputs:{functionalities:{showStatus:!0,updateStatus:!0}},holdingRegisters:{number:!0,startBit:{max:15},noBits:{max:16},multiplier:{min:1,step:1},divisor:!0,decimalPlaces:!0,options:{signed:!0,enumType:!0},functionalities:{showStatus:!0,updateStatus:!0,sendMeasurement:!0,raiseAlarm:!0,sendEvent:!0}},inputRegisters:{number:!0,startBit:{max:15},noBits:{max:16},multiplier:{min:1,step:1},divisor:!0,decimalPlaces:!0,options:{signed:!0,enumType:!0},functionalities:{showStatus:!0,updateStatus:!0,sendMeasurement:!0,raiseAlarm:!0,sendEvent:!0}},options:{serverTime:!0}},C={registerFeaturesManifest:c,create:D,canUpdateElement:g,isElementChangePending:m,getCurrentElementValue:p,getCurrentElementValueFormatted:v,updateElement:R,sendOperationAndGetResult:S};return C}e.$inject=["$q","c8yBase","c8yInventory","c8yUser","c8yDevices","c8yDeviceDatabase","c8yDeviceControl","c8yAlert","gettext","gettextCatalog"],angular.module("c8y.deviceDatabase4").factory("c8yModbusDevice",e)}(),function(){"use strict";function e(e,t,n,a,i,r,s,o){function l(){r.featuresManifests.push(m)}function u(e,t,n){return{deviceId:e.id,description:o.getString("Added new child device to {{name}} ({{id}})",e),c8y_CanDevice:{id:n.id,name:n.name,type:"/inventory/managedObjects/"+t.id}}}var c=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n,r){var s,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(n,r);case 2:return s=t.sent,t.t0=e,t.next=6,a.createConfirm(s);case 6:return t.t1=t.sent,o=t.t0.getResData.call(t.t0,t.t1),t.next=10,a.addChildDevice(n,o);case 10:return o.owner=n.owner,t.next=13,a.save(o);case 13:return t.abrupt("return",i.create(u(n,r.deviceType,o)));case 14:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),d=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,a){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.current();case 2:return i=e.sent,e.abrupt("return",{name:t.name+" - "+a.deviceType.name,type:a.deviceType.name,c8y_CanDevice:{type:"/inventory/managedObjects/"+a.deviceType.id},owner:i.id});case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),m={label:s("CAN Bus"),fieldbusType:"canbus",options:!1,discreteOutputs:!1,discreteInputs:!1,holdingRegisters:{number:{label:s("Message ID"),useHex:!0,min:0,max:536870911},startBit:{max:63},noBits:{max:64},multiplier:{min:1,step:1},divisor:!0,decimalPlaces:!0,offset:{min:Number.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),max:Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,step:1},options:{signed:!0,enumType:!0},functionalities:{showStatus:!0,updateStatus:!0,sendMeasurement:!0,raiseAlarm:!0,sendEvent:!0}},inputRegisters:!1},p={registerFeaturesManifest:l,create:c};return p}e.$inject=["c8yBase","c8yInventory","c8yUser","c8yDevices","c8yDeviceControl","c8yDeviceDatabase","gettext","gettextCatalog"],angular.module("c8y.deviceDatabase4").factory("c8yCanbusDevice",e)}(),function(){"use strict";function e(e,t,n,a,i,r,s,o,l,u){function c(e){return _.includes([w.READ_ONLY,w.READ_WRITE,w.READ_WRITE_ON_PROCESS_INPUT,w.READ_WRITE_ON_PROCESS_OUTPUT,w.CONSTANT],_.get(e.meta,"accessType"))}function d(e){return _.includes([w.READ_WRITE,w.READ_WRITE_ON_PROCESS_INPUT,w.READ_WRITE_ON_PROCESS_OUTPUT,w.WRITE_ONLY],_.get(e.meta,"accessType"))}function m(e){return _.includes([w.READ_ONLY,w.READ_WRITE,w.READ_WRITE_ON_PROCESS_INPUT,w.READ_WRITE_ON_PROCESS_OUTPUT],_.get(e.meta,"accessType"))}function p(){s.featuresManifests.push(E)}function v(e,t,n){return{deviceId:e.id,description:u.getString('Added child device "{{name}}" ({{id}})',n),c8y_CANopenAddDevice:{id:n.id,name:n.name,type:"/inventory/managedObjects/"+t.id,nodeId:n.c8y_CANopenDevice.nodeId}}}function g(e){var t=e.device,n=e.register,a=e.valueMap;return{deviceId:t.id,description:u.getString("{{name}} value changed to {{value}}{{unit}}",{name:n.name,value:a.label||a.value,unit:!a.label&&n.unit?" "+n.unit:""}),c8y_SetRegister:{nodeId:t.c8y_CANopenDevice.nodeId,index:n.index,subIndex:n.subIndex,dataType:n.dataType,value:a.value}}}function f(e,t){var n=t.id,a=t.name,i=t.nodeId;return r.create({deviceId:e.id,description:u.getString('Removed child device "{{name}}" ({{id}})',{id:n,name:a}),c8y_CANopenRemoveDevice:{id:n,name:a,nodeId:i}})}function y(e){return b(e.responseTemplates,h()),b(e.responseTemplates,T()),b(e.responseTemplates,D()),e}function b(e,t){var n=_.findIndex(e,{msgId:t.msgId});n>-1?e[n]=t:e.push(t)}function h(){return{msgId:201,condition:"$.c8y_SetRegister",pattern:["$.id","$.c8y_SetRegister.nodeId","$.c8y_SetRegister.index","$.c8y_SetRegister.subIndex","$.c8y_SetRegister.dataType","$.c8y_SetRegister.value"]}}function T(){return{msgId:202,condition:"$.c8y_CANopenAddDevice",pattern:["$.id","$.deviceId","$.c8y_CANopenAddDevice.id","$.c8y_CANopenAddDevice.nodeId","$.c8y_CANopenAddDevice.type"]}}function D(){return{msgId:204,condition:"$.c8y_CANopenRemoveDevice",pattern:["$.id","$.deviceId","$.c8y_CANopenDevice.nodeId"]}}var x=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n,a){var s,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(n,a);case 2:return s=e.sent,e.t0=t,e.next=6,i.createConfirm(s);case 6:return e.t1=e.sent,o=e.t0.getResData.call(e.t0,e.t1),e.next=10,i.addChildDevice(n,o);case 10:return o.owner=n.owner,e.next=13,i.save(o);case 13:return e.abrupt("return",r.create(v(n,a.deviceType,o)));case 14:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.current();case 2:return i=e.sent,e.abrupt("return",{name:n.name,type:n.deviceType.name,c8y_CANopenDevice:{type:"/inventory/managedObjects/"+n.deviceType.id,nodeId:n.nodeId},owner:i.id});case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n,a,i){var s,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o.canUpdateElement(n,a)){t.next=2;break}return t.abrupt("return",e.reject());case 2:return s=g({device:n,register:a,valueMap:i}),a.changePending=!0,t.next=6,o.sendOperationAndGetResult(s);case 6:return l=t.sent,l.status===r.status.SUCCESSFUL?(_.set(n,["c8y_RegisterStatus",a.name],i.value),a.changePending=!1):l.status===r.status.FAILED&&(a.changePending=!1),t.abrupt("return",l);case 9:case"end":return t.stop()}},t,this)}));return function(e,n,a){return t.apply(this,arguments)}}(),I=t.createEnum(_.flatten([{name:"BOOLEAN",label:l("Boolean"),value:"boolean",edsValue:1,noBits:1},{name:"SIGNED_8",label:l("Signed (8-bits)"),value:"signed8",edsValue:2,noBits:8,signed:!0},{name:"SIGNED_16",label:l("Signed (16-bits)"),value:"signed16",edsValue:3,noBits:16,signed:!0},{name:"SIGNED_24",label:l("Signed (24-bits)"),value:"signed24",edsValue:16,noBits:24,signed:!0},{name:"SIGNED_32",label:l("Signed (32-bits)"),value:"signed32",edsValue:4,noBits:32,signed:!0},{name:"SIGNED_40",label:l("Signed (40-bits)"),value:"signed40",edsValue:18,noBits:40,signed:!0},{name:"SIGNED_48",label:l("Signed (48-bits)"),value:"signed48",edsValue:19,noBits:48,signed:!0},{name:"SIGNED_56",label:l("Signed (56-bits)"),value:"signed56",edsValue:20,noBits:56,signed:!0},{name:"SIGNED_64",label:l("Signed (64-bits)"),value:"signed64",edsValue:21,noBits:64,signed:!0},{name:"UNSIGNED_8",label:l("Unsigned (8-bits)"),value:"unsigned8",edsValue:5,noBits:8,signed:!1},{name:"UNSIGNED_16",label:l("Unsigned (16-bits)"),value:"unsigned16",edsValue:6,noBits:16,signed:!1},{name:"UNSIGNED_24",label:l("Unsigned (24-bits)"),value:"unsigned24",edsValue:22,noBits:24,signed:!1},{name:"UNSIGNED_32",label:l("Unsigned (32-bits)"),value:"unsigned32",edsValue:7,noBits:32,signed:!1},{name:"UNSIGNED_40",label:l("Unsigned (40-bits)"),value:"unsigned40",edsValue:24,noBits:40,signed:!1},{name:"UNSIGNED_48",label:l("Unsigned (48-bits)"),value:"unsigned48",edsValue:25,noBits:48,signed:!1},{name:"UNSIGNED_56",label:l("Unsigned (56-bits)"),value:"unsigned56",edsValue:26,noBits:56,signed:!1},{name:"UNSIGNED_64",label:l("Unsigned (64-bits)"),value:"unsigned64",edsValue:27,noBits:64,signed:!1},{name:"REAL_32",label:l("Real (32-bits)"),value:"real32",edsValue:8,valuesRange:{base:{min:-3.4*Math.pow(10,38),max:3.4*Math.pow(10,38)}}},{name:"REAL_64",label:l("Real (64-bits)"),value:"real64",edsValue:17,valuesRange:{base:{min:-Number.MAX_VALUE,max:Number.MAX_VALUE}}}])),w=t.createEnum([{name:"READ_ONLY",label:l("Read-only"),value:"ro"},{name:"WRITE_ONLY",label:l("Write-only"),value:"wo"},{name:"READ_WRITE",label:l("Read-write"),value:"rw"},{name:"READ_WRITE_ON_PROCESS_INPUT",label:l("Read-write on process input"),value:"rwr"},{name:"READ_WRITE_ON_PROCESS_OUTPUT",label:l("Read-write on process output"),value:"rww"},{name:"CONSTANT",label:l("Constant"),value:"const"}]),E={label:l("CANopen"),fieldbusType:"canopen",type:"c8y_CANopenDeviceType",deviceType:!0,discreteOutputs:!1,discreteInputs:!1,holdingRegisters:{sectionTitle:l("Variables"),noRegistersDefinedMessage:l("No variables defined."),elementTypeLabel:l("Variable"),newRegisterModalTitle:l("New variable"),editRegisterModalTitle:l('Edit variable: "{{name}}"'),validation:{invalidName:l("Name should be unique among variables!"),invalidMeasurement:l("Chosen measurement type and series are already used by another variable!")},index:{min:0,max:Math.pow(2,16)-1},subIndex:{min:0,max:Math.pow(2,8)-1},dataType:{choices:I},accessType:{choices:w},functionalities:{showStatus:{showIf:c},updateStatus:{showIf:d},sendMeasurement:{showIf:m},raiseAlarm:{showIf:m,mask:!0},sendEvent:{showIf:m}}},inputRegisters:!1,options:{serverTime:!0},customizeSmartRestTemplates:y};return{registerFeaturesManifest:p,create:x,updateElement:S,onRemove:f}}e.$inject=["$q","c8yBase","c8yInventory","c8yUser","c8yDevices","c8yDeviceControl","c8yDeviceDatabase","c8yModbusDevice","gettext","gettextCatalog"],angular.module("c8y.deviceDatabase4").factory("c8yCanopenDevice",e)}(),function(){"use strict";function e(e,t,n,a,i,r,s,o){function l(){r.featuresManifests.push(v)}function u(e,t,n){return{deviceId:e.id,description:o.getString("Added new child device to {{name}} ({{id}})",e),c8y_OPCUADevice:{id:n.id,name:n.name,browsePath:n.c8y_OPCUADevice.browsePath,type:"/inventory/managedObjects/"+t.id}}}function c(e){return!!(e||{})[p]}var d=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n,r){var s,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(n,r);case 2:return s=t.sent,t.t0=e,t.next=6,a.createConfirm(s);case 6:return t.t1=t.sent,o=t.t0.getResData.call(t.t0,t.t1),t.next=10,a.addChildDevice(n,o);case 10:return o.owner=n.owner,t.next=13,a.save(o);case 13:return t.abrupt("return",i.create(u(n,r.deviceType,o)));case 14:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),m=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,a){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.current();case 2:return i=e.sent,e.abrupt("return",{name:a.name,type:a.deviceType.name,c8y_OPCUADevice:{browsePath:a.directoryPath,type:"/inventory/managedObjects/"+a.deviceType.id},owner:i.id});case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),p="c8y_OPCUADevice",v={label:s("OPCUA"),fieldbusType:"opcua",options:!1,discreteOutputs:!1,discreteInputs:!1,holdingRegisters:{sectionTitle:s("Variables"),noRegistersDefinedMessage:s("No variables defined."),elementTypeLabel:s("Variable"),newRegisterModalTitle:s("New variable"),editRegisterModalTitle:s('Edit variable: "{{name}}"'),validation:{invalidName:s("Name should be unique among variables!"),invalidMeasurement:s("Chosen measurement type and series are already used by another variable!")},browsePath:!0,nodeType:!0,attributeType:!0,multiplier:{min:1,step:1},divisor:!0,decimalPlaces:!0,options:{signed:!0,enumType:!0},functionalities:{showStatus:!0,updateStatus:!0,sendMeasurement:!0,raiseAlarm:!0,sendEvent:!0}},inputRegisters:!1},g={registerFeaturesManifest:l,create:d,isOpcua:c};return g}e.$inject=["c8yBase","c8yInventory","c8yUser","c8yDevices","c8yDeviceControl","c8yDeviceDatabase","gettext","gettextCatalog"],angular.module("c8y.deviceDatabase4").factory("c8yOPCUADevice",e)}(),function(){"use strict";function e(e,t,n){function a(){return e.isAvailable(r)}var i=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:n=e.sent,n&&t.featuresManifests.push(o);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r={name:"actility"},s=[t.MessageIdSources.FPORT,t.MessageIdSources.PAYLOAD],o={label:n("LoRa"),fieldbusType:"actility",type:"c8y_ActilityDeviceType",configuration:{messageIdConfiguration:s},discreteOutputs:!1,discreteInputs:!1,holdingRegisters:{sectionTitle:n("Values"),noRegistersDefinedMessage:n("No values defined."),newRegisterModalTitle:n("New value"),editRegisterModalTitle:n('Edit value: "{{name}}"'),validation:{invalidName:n("Name should be unique among values!"),invalidMeasurement:n("Chosen measurement type and series are already used by another value in the same message type!")},messageTypeId:!0,startBit:!0,noBits:!0,multiplier:!0,offset:!0,decimalPlaces:!1,options:{signed:!0,bcd:!0,littleEndian:!0},functionalities:{showStatus:!1,updateStatus:!1,sendMeasurement:!0,raiseAlarm:{alarmStatus:!0},sendEvent:{fragmentType:!0,innerType:!0},sendManagedObjectUpdate:!0}},inputRegisters:!1,options:!1},l={registerFeaturesManifest:i,isAvailable:a};return l}e.$inject=["c8yApplication","c8yDeviceDatabase","gettext"],angular.module("c8y.deviceDatabase4").factory("c8yActilityDevice",e)}(),function(){"use strict";function e(e,t,n){function a(){return e.isAvailable(r)}var i=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:n=e.sent,n&&t.featuresManifests.push(o);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),r={name:"sigfox-agent"},s=[t.MessageIdSources.PAYLOAD],o={label:n("Sigfox"),fieldbusType:"sigfox",type:"c8y_SigfoxDeviceType",configuration:{messageIdConfiguration:s},discreteOutputs:!1,discreteInputs:!1,holdingRegisters:{sectionTitle:n("Values"),noRegistersDefinedMessage:n("No values defined."),newRegisterModalTitle:n("New value"),editRegisterModalTitle:n('Edit value: "{{name}}"'),validation:{invalidName:n("Name should be unique among values!"),invalidMeasurement:n("Chosen measurement type and series are already used by another value in the same message type!")},messageTypeId:!0,startBit:!0,noBits:!0,multiplier:!0,offset:!0,decimalPlaces:!1,options:{signed:!0,bcd:!0,littleEndian:!0},functionalities:{showStatus:!1,updateStatus:!1,sendMeasurement:!0,raiseAlarm:{alarmStatus:!0},sendEvent:{fragmentType:!0,innerType:!0},sendManagedObjectUpdate:!0}},inputRegisters:!1,options:!1},l={registerFeaturesManifest:i,isAvailable:a};return l}e.$inject=["c8yApplication","c8yDeviceDatabase","gettext"],angular.module("c8y.deviceDatabase4").factory("c8ySigfoxDevice",e)}(),function(){"use strict";function e(e,t,n,a,i,r,s,o,l,u){function c(){s.featuresManifests.push(f)}function d(e,t,n){return{deviceId:e.id,description:u.getString("Added new child device to {{name}} ({{id}})",e),c8y_ProfibusDevice:{id:t.id,name:t.name,type:"/inventory/managedObjects/"+n.id}}}function m(e){var t=e.device,n=e.register,a=e.valueMap;return{deviceId:t.id,description:u.getString("{{name}} value changed to {{value}}{{unit}}",{name:n.name,value:a.label||a.value,unit:!a.label&&n.unit?" "+n.unit:""}),c8y_SetRegister:{address:t.c8y_RegisterStatus.ProfibusSlave_Address,register:n.number,startBit:n.startBit,noBits:n.noBits,value:a.value}}}var p=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n,a){var s,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(a);case 2:return s=e.sent,e.t0=t,e.next=6,i.createConfirm(s);case 6:return e.t1=e.sent,o=e.t0.getResData.call(e.t0,e.t1),e.next=10,i.addChildDevice(n,o);case 10:return o.owner=n.owner,e.next=13,i.save(o);case 13:return e.abrupt("return",r.create(d(n,o,a.deviceType)));case 14:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,i=t.name,r=t.deviceType;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.current();case 2:return n=e.sent,e.abrupt("return",{name:i,type:r.name,c8y_ProfibusDevice:{type:"/inventory/managedObjects/"+r.id},owner:n.id});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),g=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n,a,i){var s,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.canUpdateElement(n,a)){t.next=8;break}return s=m({device:n,register:a,valueMap:i}),a.changePending=!0,t.next=5,o.sendOperationAndGetResult(s);case 5:return l=t.sent,l.status===r.status.SUCCESSFUL?(_.set(n,["c8y_RegisterStatus",a.name],i.value),a.changePending=!1):l.status===r.status.FAILED&&(a.changePending=!1),t.abrupt("return",l);case 8:return t.abrupt("return",e.reject());case 9:case"end":return t.stop()}},t,this)}));return function(e,n,a){return t.apply(this,arguments)}}(),f={label:l("Profibus"),fieldbusType:"profibus",discreteOutputs:!1,discreteInputs:!1,holdingRegisters:{sectionTitle:l("Registers"),noRegistersDefinedMessage:l("No registers defined."),elementTypeLabel:l("Register"),newRegisterModalTitle:l("New register"),editRegisterModalTitle:l('Edit register: "{{name}}"'),validation:{invalidName:l("Name should be unique among registers!"),invalidMeasurement:l("Chosen measurement type and series are already used by another register!")},number:!0,startBit:{max:63},noBits:{max:64},multiplier:{min:1,step:1},divisor:!0,decimalPlaces:!0,options:{signed:!0,enumType:!0},functionalities:{readWriteMutex:!0,sendMeasurement:!0,raiseAlarm:!0,sendEvent:!0}},inputRegisters:!1,options:{serverTime:!0}},y={registerFeaturesManifest:c,create:p,updateElement:g};return y}e.$inject=["$q","c8yBase","c8yInventory","c8yUser","c8yDevices","c8yDeviceControl","c8yDeviceDatabase","c8yModbusDevice","gettext","gettextCatalog"],angular.module("c8y.deviceDatabase4").factory("c8yProfibusDevice",e)}(),function(){"use strict";function e(e,t,n,a,i,r,s,o,l,u,c){function d(){r.changeTitle({title:u("Device database")})}function m(e){var t=_.get(e,"id","new");n.path("/device-types/"+t)}function p(e){if(_.isObjectLike(e)){var t=e.errorMessage;t?o.danger(c.getString('Could not import device type due to: "{{errorMessage}}"!',{errorMessage:l.getTranslatedServerMessage(t)})):o.danger(u("Could not import device type!"))}}function v(){return i.getAvailableDeviceTypes()}function g(n){R.deviceTypes||(R.deviceTypes=[]),R.deviceTypes=[].concat(_toConsumableArray(R.deviceTypes),_toConsumableArray(n)),t.paging=n.paging||{refresh:!0},e.$apply()}function f(e){return i.exportDeviceTypeAndSaveAs(e)}function y(e){return _.get(i.getDeviceTypeFeatures(e),"label",e.fieldbusType)}var b=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d(),t.t0=g,t.next=4,v();case 4:t.t1=t.sent,(0,t.t0)(t.t1),e.$apply();case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),h=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.importDeviceTypeWithUI();case 3:return o.success(u("New device type imported!")),t.next=6,T();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),p(t.t0);case 11:e.$apply();case 12:case"end":return t.stop()}},t,this,[[0,8]])}));return function(){return t.apply(this,arguments)}}(),T=function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return R.deviceTypes=void 0,t.refreshLoading=!0,n.prev=2,n.t0=g,n.next=6,v();case 6:n.t1=n.sent,(0,n.t0)(n.t1);case 8:return n.prev=8,t.refreshLoading=!1,n.finish(8);case 11:e.$apply();case 12:case"end":return n.stop()}},n,this,[[2,,8,11]])}));return function(){return n.apply(this,arguments)}}(),D=function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.paging.loading=!0,n.prev=1,n.t0=g,n.next=5,v();case 5:n.t1=n.sent,(0,n.t0)(n.t1);case 7:return n.prev=7,t.paging.loading=!1,n.finish(7);case 10:e.$apply();case 11:case"end":return n.stop()}},n,this,[[1,,7,10]])}));return function(){return n.apply(this,arguments)}}(),x=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s({title:u("Confirm delete?"),body:c.getString('Do you really want to remove device type "{{name}}"? Connected devices of this type will become unavailable.',n),status:"danger"});case 3:return t.next=5,a.remove(n);case 5:R.deviceTypes=_.without(R.deviceTypes,n),o.success(u("Device type removed!")),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),t.t0&&o.danger(t.t0);case 12:e.$apply();case 13:case"end":return t.stop()}},t,this,[[0,9]])}));return function(e){return t.apply(this,arguments)}}(),R=this;_.assign(R,{$onInit:b,addDeviceType:m,importDeviceType:h,navigateToDetails:m,onClickExport:f,onClickDelete:x,getFieldbusTypeLabel:y}),t.paging={},t.loadNext=D,t.refresh=T}e.$inject=["$rootScope","$scope","$location","c8yInventory","c8yDeviceDatabase","c8yTitle","c8yModal","c8yAlert","c8yLocales","gettext","gettextCatalog"],angular.module("c8y.deviceDatabase4").component("c8yDeviceTypeList",{templateUrl:"core_deviceDatabase4/device-type-list.html",bindings:{},controllerAs:"vm",controller:e})}(),function(){"use strict";function e(e,t,n,a,i,r,s){function o(){return n.getPredefinedDeviceTypeInfos()}function l(e){return n.downloadPredefinedDeviceTypeAndSaveAs(e.id)}function u(e,t){R.predefined.info=e,R.predefined.deviceType=t}function c(e){return R.predefined.info===e}function d(e){if(!_.isEmpty(e)){var t=_.head(e);y({type:"progress",summary:s.getString("Processing file...")}),a.parseFile(t).then(function(e){var n=e.deviceType,a=e.feedback;m(),v(t,n),g(n.name,n.fieldbusType),y(a)}).catch(function(e){var t=e.feedback;p(),y(t)})}}function m(){R.predefined.info=null,R.predefined.deviceType=null}function p(){R.custom.file=null,R.custom.deviceType=null}function v(e,t){R.custom.file=e,R.custom.deviceType=t}function g(e,t){R.newName.edited||(R.newName.value=e),R.fieldbusType=t}function f(){R.newName.edited=!0}function y(e){x.customDeviceTypeFeedback=e}function b(){var e=R.predefined,t=R.custom,n=R.newName,a=R.fieldbusType,i=_.cloneDeep(e.deviceType||t.deviceType);
i.name=n.value,i.fieldbusType=a,x.close({$value:i})}function h(e){var t=h.cache||{};h.cache=t;var a=t[e.id];return a||(a=n.downloadPredefinedDeviceTypeHref(e).then(function(n){t[e.id]=n}),t[e.id]=a),a.then?"":a}var T=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=[],e.t1=_toConsumableArray(x.predefinedDeviceTypeInfos),e.t2=_toConsumableArray,e.next=5,o();case 5:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),x.predefinedDeviceTypeInfos=e.t0.concat.call(e.t0,e.t1,e.t4),t.$apply();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),D=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var i,r,s,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.id,r=a.name,s=a.fieldbusType,p(),e.next=4,n.getPredefinedDeviceType(i);case 4:o=e.sent,u(a,o),g(r,s),t.$apply();case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),x=this,R={predefined:{info:null,deviceType:null},custom:{file:null,deviceType:null},newName:{value:null,edited:!1}};_.assign(x,{$onInit:T,selection:R,predefinedDeviceTypeInfos:[],downloadPredefinedDeviceType:l,onPredefinedDeviceTypeInfoSelected:D,isPredefinedDeviceTypeInfoSelected:c,onCustomDeviceTypeFileSelected:d,onNewNameEdited:f,import:b,downloadFileName:n.predefinedDeviceTypeHrefFilename,downloadFileHref:h})}e.$inject=["$scope","$rootScope","c8yDeviceDatabase","c8yDeviceTypeParser","c8yAlert","gettext","gettextCatalog"],angular.module("c8y.deviceDatabase4").component("c8yImportDeviceTypeModal",{templateUrl:"core_deviceDatabase4/modals/import-device-type.html",bindings:{close:"&",dismiss:"&"},controllerAs:"vm",controller:e})}(),function(){"use strict";function e(e,t,n,a,i,r){function s(){var e=b.resolve;x=e.element,R=e.existingElements,S=e.existingCategories,c(),o(),l(),u()}function o(){b.element=a.addDiscreteIOMeta(x)}function l(){b.categories=S}function u(){var e;e={},_defineProperty(e,T.IS_REQUIRED,r("This field is required!")),_defineProperty(e,T.IS_VALID_NAME,r("Name should be unique among coils and discrete inputs!")),_defineProperty(e,T.IS_VALID_NUMBER,r(x.input?"Number should be unique among discrete inputs!":"Number should be unique among coils!")),I=e}function c(){D=b.resolve.features[x.input?"discreteInputs":"discreteOutputs"],b.features=D}function d(){x.meta.updateStatus&&(x.meta.showStatus=!0)}function m(e){return p(),v(),n.invalid(b,h,e)}function p(){var e=b[h],t=e.name,n=_.get(x,"meta"),a=_.isUndefined(t.$modelValue)||_.every(R,function(e){return e.name===_.get(n,"original.name")||e.name!==t.$modelValue});t.$setValidity(T.IS_VALID_NAME,a)}function v(){var e=b[h],t=e.number,n=_.get(x,"meta"),a=_.isUndefined(t.$modelValue)||_.every(R,function(e){return e.number===_.get(n,"original.number")||e.number!==t.$modelValue});t.$setValidity(T.IS_VALID_NUMBER,a)}function g(e){return n.validationHints(e,I)}function f(){b.close({$value:a.removeDiscreteIOMeta(x)})}function y(){if(x){var e=_.get(x,"meta",{});x.meta=e;var t=e.showStatus,n=e.enumValues;t?n||_.assign(e,{enumType:!0,enumValues:_.cloneDeep(a.metaDefaults.discreteIO.enumValues)}):_.assign(e,{enumType:!1,enumValues:void 0})}}var b=this,h="elementForm",T={IS_REQUIRED:"required",IS_VALID_NAME:"valid-name",IS_VALID_NUMBER:"valid-number"},D=void 0,x=void 0,R=void 0,S=void 0,I=void 0;_.assign(b,{$onInit:s,onUpdateStatusCheckboxClicked:d,alarmSeverities:i.severityList,invalid:m,validationHints:g,save:f}),e.$watch("vm.element.meta.showStatus",y)}e.$inject=["$scope","$q","c8yBase","c8yDeviceDatabase","c8yAlarms","gettext"],angular.module("c8y.deviceDatabase4").component("c8yConfigureDiscreteIOModal",{templateUrl:"core_deviceDatabase4/modals/configure-discrete-io.html",bindings:{resolve:"<",close:"&",dismiss:"&"},controllerAs:"vm",controller:e})}(),function(){"use strict";function e(e,t,n,a,i,r,s){function o(){var e=j.resolve;W=e.element,J=e.existingElements,Y=e.existingCategories,Q=e.deviceType,X=e.fieldbusType,l(),u(),c(),d(),m(),p(),v()}function l(){var e=W.input?"input":"holding";z=j.resolve.features[e+"Registers"],_.assign(j,{features:z,dataTypes:_.get(z,"dataType.choices"),accessTypes:_.get(z,"accessType.choices")})}function u(){j.element=a.addRegisterMeta(W,Q)}function c(){j.categories=Y}function d(){j.deviceType=Q}function m(){j.fieldbusType=X}function p(){var e;e={},_defineProperty(e,G.IS_REQUIRED,r("This field is required!")),_defineProperty(e,G.IS_VALID_NAME,_.get(z,"validation.invalidName",r("Name should be unique among registers!"))),_defineProperty(e,G.IS_VALID_BIT_RANGE,r("Chosen number, start bit or number of bits overlap with another register!")),_defineProperty(e,G.IS_VALID_MEASUREMENT,_.get(z,"validation.invalidMeasurement",r("Chosen measurement type and series are already used by another register!"))),_defineProperty(e,G.IS_MIN,r("Value cannot be lower than minimum!")),_defineProperty(e,G.IS_MAX,r("Value cannot be greater than maximum!")),_defineProperty(e,G.IS_UNIQUE,r("Value cannot be used more than once!")),_defineProperty(e,G.IS_VALID_NO_BITS_FOR_SIGNED_REGISTER,r("At least two bits needed for signed register!")),_defineProperty(e,G.IS_VALID_MESSAGEID,r("Invalid hexadecimal number!")),_defineProperty(e,G.IS_VALID_BROWSEPATH,r("Invalid browse path!")),_defineProperty(e,G.PATTERN,r("Dots not allowed.")),K=e}function v(){z.functionalities.readWriteMutex&&(j.readWriteMutexValue="read",W.meta.updateStatus&&(j.readWriteMutexValue="write"),g())}function g(){"read"===j.readWriteMutexValue?(W.meta.showStatus=!0,W.meta.updateStatus=!1):(W.meta.showStatus=!1,W.meta.updateStatus=!0)}function f(){y("showStatus")||(j.element.meta.showStatus=!1),!j.element.input&&y("updateStatus")||(j.element.meta.updateStatus=!1),j.shouldEnableShowStatusStandardFunctionalities()&&y("sendMeasurement")||(j.element.meta.sendMeasurement=!1),j.shouldEnableShowStatusStandardFunctionalities()&&y("raiseAlarm")||(j.element.meta.raiseAlarm=!1),j.shouldEnableShowStatusStandardFunctionalities()&&y("sendEvent")||(j.element.meta.sendEvent=!1)}function y(e){var t=j.features.functionalities[e];return t&&(!t.showIf||t.showIf(j.element))}function b(e){var t=s.getString("no value");return _.isUndefined(e)||_.isNaN(e)||(t=e),"("+t+")"}function h(e){return T(e),R(e),S(),I(),w(),E(),n.invalid(j,L,e)}function T(e){if("number"===e&&_.get(z,"number.useHex")){var t=_.get(j,L+".number"),n=_.get(t,"$modelValue");if(n){n.startsWith("0x")&&(n=n.substring(2));var a=parseInt(n,16),i=a.toString(16)===n.toLowerCase();t.$setValidity(G.IS_VALID_MESSAGEID,i),t.$setValidity(G.IS_MIN,!i||a>=D()),t.$setValidity(G.IS_MAX,!i||a<=x())}else t.$setValidity(G.IS_VALID_MESSAGEID,!0)}}function D(){return _.get(z,"number.min",1)}function x(){return _.get(z,"number.max",65536)}function R(e){var t=j[L];if("browsePath"===e){var n=t.browsePath.$viewValue,a=/^|((\d)+:[^\/]+)([\/](\d)+:[^\/]+)*$/;t.browsePath.$setValidity(G.IS_VALID_BROWSEPATH,a.test(n))}}function S(){var e=j[L],t=e.name,n=_.get(W,"meta"),a=_.isUndefined(t.$modelValue)||_.every(J,function(e){return e.name===_.get(n,"original.name")||e.name!==t.$modelValue});t.$setValidity(G.IS_VALID_NAME,a)}function I(){var e=j[L],t=e.number,n=e.startBit,i=e.noBits,r=_.get(W,"meta"),s=!t||_.isUndefined(t.$modelValue)||_.isUndefined(n.$modelValue)||_.isUndefined(i.$modelValue)||!_.some(J,function(e){var s=t.$modelValue;return _.get(z,"number.useHex")&&s&&s.indexOf("0x")===-1&&(s="0x"+s),(!r||!(_.get(r,"original.number")===e.number&&r.original.startBit===e.startBit))&&e.input===W.input&&e.number===s&&(e.startBit===n.$modelValue&&e.noBits===i.$modelValue||a.areOverlappingRegisters(e,{startBit:n.$modelValue,noBits:i.$modelValue}))});t&&t.$setValidity(G.IS_VALID_BIT_RANGE,s),n&&n.$setValidity(G.IS_VALID_BIT_RANGE,s),i&&i.$setValidity(G.IS_VALID_BIT_RANGE,s)}function w(){var e=j[L],t=_.get(e,"messageTypeId.$modelValue"),n=e.measurementType,a=_.get(n,"$modelValue"),i=e.measurementSeries,r=_.get(i,"$modelValue"),s=_.get(W,"meta"),o=_.get(s,"sendMeasurement"),l=!o||_.isUndefined(a)||_.isUndefined(r)||!_.some(J,function(e){var n=!1,i=_.get(W,"id")===_.get(e,"id"),o=z.number&&_.get(s,"original.number")===e.number&&_.get(s,"original.startBit")===e.startBit&&_.get(s,"original.input")===e.input;return i||o||(n=(!z.messageTypeId||_.get(e,"messageTypeId")===t)&&_.get(e,"measurementMapping.type")===a&&_.get(e,"measurementMapping.series")===r),n});n&&n.$setValidity(G.IS_VALID_MEASUREMENT,l),i&&i.$setValidity(G.IS_VALID_MEASUREMENT,l)}function E(){var e=_.get(j,L+".noBits");if(e){var t=!W.signed||W.signed&&!_.isUndefined(e.$modelValue)&&e.$modelValue>1;e.$setValidity(G.IS_VALID_NO_BITS_FOR_SIGNED_REGISTER,t)}}function M(e,t){var a=_.cloneDeep(K),i=_.get(t,"validateValueInRegisterRange");return i&&(a[G.IS_VALUE_IN_REGISTER_RANGE]=s.getString(i.step?H:q,i)),n.validationHints(e,a)}function A(){W.meta.updateStatus&&(W.meta.showStatus=!0)}function C(){N(),j.close({$value:a.removeRegisterMeta(W)})}function N(){if(j.features.functionalities.readWriteMutex){var e=["measurementMapping","eventMapping","alarmMapping"];"read"===j.readWriteMutexValue&&(e=["min","max"]),_.forEach(e,function(e){return _.unset(W,e)})}}function O(){var e=void 0,t=_.get(Q,"c8y_MessageIdConfiguration.source")===a.MessageIdSources.PAYLOAD.value;if(t){var n=_.get(Q,"c8y_MessageIdConfiguration.messageIdMapping.noBits");return Math.pow(2,n)-1}return e}function F(){return _.get(z,"startBit.max")}function V(e){var t=_.get(z,"noBits.max");return _.isNumber(t)&&_.isNumber(e)?t-e:t}function P(){var e=V(W.startBit);W.noBits>e&&(W.noBits=e)}function k(){return _.some(j.features.options,Boolean)}function $(){var e=j.features.functionalities,t=e.readWriteMutex,n=e.showStatus&&j.shouldShowFunctionality("showStatus"),a=e.updateStatus&&!j.element.input&&j.shouldShowFunctionality("updateStatus"),i=j.shouldEnableShowStatusStandardFunctionalities()&&(j.shouldShowFunctionality("sendMeasurement")||j.shouldShowFunctionality("raiseAlarm")||j.shouldShowFunctionality("sendEvent")),r=e.sendManagedObjectUpdate;return t||n||a||i||r}function U(){return!(j.features.functionalities.readWriteMutex&&"write"===j.readWriteMutexValue)}function B(){var e=W,t=e.meta;t&&(t.valuesRange=a.getValuesRange(W))}var j=this,L="elementForm",G={IS_REQUIRED:"required",IS_VALID_NAME:"valid-name",IS_VALID_BIT_RANGE:"valid-bit-range",IS_VALID_MEASUREMENT:"valid-measurement",IS_VALUE_IN_REGISTER_RANGE:"value-in-register-range",IS_VALID_NO_BITS_FOR_SIGNED_REGISTER:"no-bits-for-signed-register",IS_VALID_MESSAGEID:"valid-messageID",IS_VALID_BROWSEPATH:"valid-browsePath",IS_MIN:"min",IS_MAX:"max",IS_UNIQUE:"unique",PATTERN:"pattern"},q=r("Value out of range! Allowed values from {{min | number}} to {{max | number}}."),H=r("Value out of range! Allowed values from {{min | number}} to {{max | number}} with step {{step | number}}. Use up/down arrows to find nearest possible value."),z=void 0,W=void 0,J=void 0,Y=void 0,Q=void 0,X=void 0,K=void 0;_.assign(j,{$onInit:o,PATTERN_VALIDATE_FRAGMENT_SERIES:"^[^.]*$",alarmSeverities:i.severityList,getValuePlaceholder:b,addEnumValue:a.addEmptyEnumValue,removeEnumValue:a.removeEnumValue,invalid:h,validationHints:M,onAccessTypeChange:f,onUpdateStatusCheckboxChange:A,onStatusMappingRadiosChange:g,save:C,messageTypeIdMax:O,startBitMax:F,noBitsMax:V,getNumberMin:D,getNumberMax:x,shouldShowOptions:k,shouldShowFunctionalities:$,shouldEnableShowStatusStandardFunctionalities:U,shouldShowFunctionality:y}),e.$watch("vm.element.startBit",P),e.$watchGroup(["vm.element.min","vm.element.max","vm.element.noBits","vm.element.multiplier","vm.element.divisor","vm.element.decimalPlaces","vm.element.signed","vm.element.meta.dataType"],B)}e.$inject=["$scope","$q","c8yBase","c8yDeviceDatabase","c8yAlarms","gettext","gettextCatalog"],angular.module("c8y.deviceDatabase4").component("c8yConfigureRegisterModal",{templateUrl:"core_deviceDatabase4/modals/configure-register.html",bindings:{resolve:"<",close:"&",dismiss:"&"},controllerAs:"vm",controller:e})}(),function(){"use strict";function e(e,t){function n(){var e=r.resolve.modalParams,n=e.selectSingle,a=e.device,i=t.generatePaths(a);_.assign(r,{selectSingle:n,properties:_.map(i,t.createProperty)})}function a(e){return 1===e.keyPath.length}function i(e){return e.keyPath.join(".")}var r=this;_.assign(r,{$onInit:n,humanize:e("humanize2"),isParent:a,orderByFn:i})}e.$inject=["$filter","fieldbusPropertyGenerator"],angular.module("c8y.deviceDatabase4").component("c8ySelectFieldbusPropertyModal",{templateUrl:"core_deviceDatabase4/modals/select-fieldbus-property.html",bindings:{resolve:"<",close:"&",dismiss:"&"},controllerAs:"vm",controller:e})}(),function(){"use strict";function e(){function e(){return _.find(t.deviceTypesFeatures,{fieldbusType:t.formValue.fieldbusType})||{}}var t=this;_.assign(t,{getFeatures:e})}angular.module("c8y.deviceDatabase4").component("c8yDeviceTypeBasicInfo",{templateUrl:"core_deviceDatabase4/detail/basic-info.html",bindings:{deviceTypeForm:"<",formValue:"<",deviceType:"<",deviceTypesFeatures:"<",isNew:"<",onDeviceTypeChange:"<"},controllerAs:"vm",controller:e})}(),function(){"use strict";function e(){function e(e){var n=e.featureLabel;n&&t()}function t(){if(a.featureConfiguration&&a.featureConfiguration.messageIdConfiguration){var e=_.get(a.featureConfiguration,"messageIdConfiguration[0].value");_.set(a.deviceType,"c8y_MessageIdConfiguration.source",e)}}function n(){return a.featureConfiguration.messageIdConfiguration.length<2}var a=this;_.assign(a,{$onChanges:e,initSelector:t,isMessageIdSourceDisabled:n})}angular.module("c8y.deviceDatabase4").component("c8yDeviceTypeMessageIdConfiguration",{templateUrl:"core_deviceDatabase4/detail/message-id-configuration.html",bindings:{featureLabel:"<",featureConfiguration:"<",deviceTypeForm:"<",deviceType:"<",messageIdSources:"<"},controller:e,controllerAs:"vm"})}();var _slicedToArray=function(){function e(e,t){var n=[],a=!0,i=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){"use strict";function e(e,t){function n(e){var n=e.featureLabel;if(n){var r=i.BOTH;if(1===_.get(a,"messageIdConfiguration.length")){var s=_slicedToArray(a.messageIdConfiguration,1),o=s[0];r=i[o.name]}a.description=t.getString(r,{featureLabel:a.featureLabel})}}var a=this,i={BOTH:e("{{featureLabel | translate}} devices can send messages of different types with different encodings per type.\n        Depending on the device, the type can be determined by looking either\n        at the FPort parameter of a message (<b>Source</b>: <i>FPort</i>)\n        or at the subset of the message payload itself (<b>Source</b>: <i>Payload</i>).\n        Indicate where the type information starts in the payload (<b>Start bit</b>)\n        and how long this information is (<b>Number of bits</b>)."),FPORT:e("{{featureLabel | translate}} devices can send messages of different types with different encodings per type.\n        Type can be determined by looking at the FPort parameter of a message (<b>Source</b>: <i>FPort</i>)."),PAYLOAD:e("{{featureLabel | translate}} devices can send messages of different types with different encodings per type.\n        Type can be determined by looking at the subset of the message payload (<b>Source</b>: <i>Payload</i>).\n        Indicate where the type information starts in the payload (<b>Start bit</b>)\n        and how long this information is (<b>Number of bits</b>).")};_.assign(a,{$onChanges:n,descriptionTemplates:i})}e.$inject=["gettext","gettextCatalog"],angular.module("c8y.deviceDatabase4").component("c8yMessageIdConfigurationDescription",{bindings:{featureLabel:"<",messageIdConfiguration:"<"},template:'\n        <div class="alert alert-info"\n          style="width: 100%"\n          ng-bind-html="vm.description"\n        >\n        </div>\n      ',controller:e,controllerAs:"vm"})}(),function(){"use strict";angular.module("c8y.deviceDatabase4").component("c8yDeviceTypeDiscreteInputs",{templateUrl:"core_deviceDatabase4/detail/discrete-inputs.html",bindings:{discreteInputsCategorized:"<",isEmpty:"<",addDiscreteInput:"<",editDiscreteInput:"<",removeDiscreteInput:"<"},controllerAs:"vm"})}(),function(){"use strict";angular.module("c8y.deviceDatabase4").component("c8yDeviceTypeDiscreteOutputs",{templateUrl:"core_deviceDatabase4/detail/discrete-outputs.html",bindings:{discreteOutputsCategorized:"<",isEmpty:"<",addDiscreteOutput:"<",editDiscreteOutput:"<",removeDiscreteOutput:"<"},controllerAs:"vm"})}(),function(){"use strict";function e(){function e(e){if(e.features){var t=a.features.holdingRegisters;i=_.result(t,"dataType.choices.values",[]),r=_.result(t,"accessType.choices.values",[])}}function t(e){var t=_.find(i,{value:e.dataType});return _.get(t,"label")}function n(e){var t=_.find(r,{value:e.accessType});return _.get(t,"label")}var a=this,i=void 0,r=void 0;_.assign(a,{$onChanges:e,getDataTypeLabel:t,getAccessTypeLabel:n})}angular.module("c8y.deviceDatabase4").component("c8yDeviceTypeHoldingRegisters",{templateUrl:"core_deviceDatabase4/detail/holding-registers.html",bindings:{features:"<",holdingRegistersCategorized:"<",isEmpty:"<",addHoldingRegister:"<",editHoldingRegister:"<",removeHoldingRegister:"<"},controllerAs:"vm",controller:e})}(),function(){"use strict";angular.module("c8y.deviceDatabase4").component("c8yDeviceTypeInputRegisters",{templateUrl:"core_deviceDatabase4/detail/input-registers.html",bindings:{inputRegistersCategorized:"<",isEmpty:"<",addInputRegister:"<",editInputRegister:"<",removeInputRegister:"<"},controllerAs:"vm"})}(),function(){"use strict";angular.module("c8y.deviceDatabase4").component("c8yDeviceTypeOptions",{templateUrl:"core_deviceDatabase4/detail/options.html",bindings:{options:"<",deviceType:"<"},controllerAs:"vm"})}(),function(){"use strict";function e(e,t,n,a,i,r,s,o,l,u,c,d,m){function p(){U.deviceTypesFeatures=o.getDeviceTypesFeatures()}function v(e){return g()?o.getEmptyDeviceType():o.getDeviceType(e)}function g(){return"new"===B}function f(){l.changeTitle({title:U.deviceType.name||d("New device type")})}function y(e){return D(e,o.getEmptyDiscreteOutput(),U.deviceType.c8y_Coils)}function b(e){return D(e,o.getEmptyDiscreteInput(),U.deviceType.c8y_Coils)}function h(e){return x(e,o.getEmptyHoldingRegister(U.deviceType),U.deviceType.c8y_Registers)}function T(e){return x(e,o.getEmptyInputRegister(),U.deviceType.c8y_Registers)}function D(e,t,n){return V("DiscreteIO",e,t,n)}function x(e,t,n){return V("Register",e,t,n)}function R(e,t,n){if(_.get(U.features,"holdingRegisters.number.useHex",!1)&&!n.number.startsWith("0x")&&(n.number="0x"+n.number),e){var a=_.indexOf(t,e);t[a]=n}else t.push(n)}function S(e){return P(e,U.deviceType.c8y_Coils,d('Do you really want to remove "{{name}}"?'))}function I(e){return P(e,U.deviceType.c8y_Coils,d('Do you really want to remove "{{name}}"?'))}function w(e){return P(e,U.deviceType.c8y_Registers,d('Do you really want to remove "{{name}}"?'))}function E(e){return P(e,U.deviceType.c8y_Registers,d('Do you really want to remove "{{name}}"?'))}function M(){var e=U.deviceType;return _.get(U,"deviceTypeForm.$invalid")||!e||_.isEmpty(e.c8y_Coils)&&_.isEmpty(e.c8y_Registers)}function A(){var e=this;if(U.deviceType.fieldbusType)_asyncToGenerator(regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:a=e.sent,U.features=_.find(U.deviceTypesFeatures,{fieldbusType:a}),t.$apply();case 5:case"end":return e.stop()}},n,e)}))();else{var n=U.formValue.fieldbusType;U.deviceType.fieldbusType=n,U.features=_.find(U.deviceTypesFeatures,{fieldbusType:n})}}function C(){var e=U.deviceType;_.assign(U,{discreteOutputsCategorized:o.getDiscreteOutputsCategorized(e),discreteInputsCategorized:o.getDiscreteInputsCategorized(e),holdingRegistersCategorized:o.getHoldingRegistersCategorized(e),inputRegistersCategorized:o.getInputRegistersCategorized(e)})}var N=this,O=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p(),e.next=3,F(B);case 3:C(),f(),t.$apply();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),F=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n){var a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(n);case 2:a=e.sent,i=a.fieldbusType,_.assign(U,{deviceType:a,formValue:{fieldbusType:i},features:_.find(U.deviceTypesFeatures,{fieldbusType:i})}),t.$apply();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n,a,i,r){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o["edit"+n+"WithUI"](a||i,U.deviceType);case 3:s=e.sent,R(a,r,s),C(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0&&c.danger(e.t0);case 11:t.$apply();case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t,n,a,i){return e.apply(this,arguments)}}(),P=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n,a,i){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u({title:d("Confirm delete?"),body:m.getString(i,n),labels:{ok:d("Delete")},status:"danger"});case 3:s.removeFromList(a,n),C(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0&&c.danger(e.t0);case 10:t.$apply();case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,n,a){return e.apply(this,arguments)}}(),k=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.save(n);case 3:c.success(d("Device type saved!")),j=!0,r.path("/device-types"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c.danger(e.t0.errorMessage);case 11:t.$apply();case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u({title:d("Confirm device type change?"),body:m.getString("By changing device type, all changes will be lost. Do you really want to proceed?")});case 3:return o.removeAllElements(U.deviceType),C(),t=U.formValue.fieldbusType,U.deviceType.fieldbusType=t,e.abrupt("return",t);case 10:return e.prev=10,e.t0=e.catch(0),n=U.deviceType.fieldbusType,U.formValue.fieldbusType=n,e.abrupt("return",n);case 15:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}(),U=this,B=e.deviceTypeId,j=!0;_.assign(U,{$onInit:O,isNew:g,isEmpty:_.isEmpty,editDiscreteOutput:y,editDiscreteInput:b,editHoldingRegister:h,editInputRegister:T,addDiscreteOutput:y,addDiscreteInput:b,addHoldingRegister:h,addInputRegister:T,removeDiscreteOutput:S,removeDiscreteInput:I,removeHoldingRegister:w,removeInputRegister:E,save:k,saveDisabled:M,changeDeviceType:A,messageIdSources:o.MessageIdSources}),n.$watch("vm.deviceType",function(e,t){t&&e!==t&&(j=!1)},!0),n.$on("$locationChangeStart",function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=13;break}return n.preventDefault(),e.prev=2,e.next=5,u({title:d("Changes not saved"),body:d("Do you want to leave this page and discard the changes made?"),status:"warning",labels:{ok:d("Yes"),cancel:d("No")}});case 5:j=!0,i.location.href=a,t.$apply(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),e.t0&&c.danger(e.t0);case 13:case"end":return e.stop()}},e,N,[[2,10]])}));return function(t,n){return e.apply(this,arguments)}}())}e.$inject=["$routeParams","$rootScope","$scope","$q","$window","$location","c8yBase","c8yDeviceDatabase","c8yTitle","c8yModal","c8yAlert","gettext","gettextCatalog"],angular.module("c8y.deviceDatabase4").component("c8yDeviceTypeDetail",{templateUrl:"core_deviceDatabase4/detail/device-type-detail.html",controllerAs:"vm",controller:e})}(),function(){"use strict";function e(){var e={restrict:"A",require:"ngModel",link:function(e,t,n,a){function i(){var t=a.$modelValue;if(!_.isUndefined(t)){var n=e.$eval(r),i=_(n).chain().filter(_defineProperty({},s,t)).size().lte(1).value();a.$setValidity("unique",i)}}var r=n.uniqueInArray,s=n.uniquePropName;e.$watch(r,i,!0),n.$observe(s,i),e.$watch(function(){return a.$modelValue},i)}};return e}angular.module("c8y.deviceDatabase4").directive("unique",e)}(),function(){"use strict";function e(){var e={restrict:"A",require:"ngModel",link:function(e,t,n,a){function i(e){return!_.isUndefined(e)&&r(e)}function r(t){var n=e.$eval(s)||{};if(!_.isUndefined(n.min)&&!_.isUndefined(n.max)){if(!_.isUndefined(n.step)&&!_.isUndefined(n.decimalPlaces)){var a=Math.pow(10,n.decimalPlaces),i=(((t*a).toFixed(6)-(n.min*a).toFixed(6))/(n.step*a).toFixed(6)).toFixed(6);return i>=0&&i%1===0&&t<=n.max}return n.min<=t&&t<=n.max}return!1}var s=n.validateValueInRegisterRange;a.$validators["value-in-register-range"]=i,e.$watch(function(){return e.$eval(s)},function(){return a.$validate()},!0)}};return e}angular.module("c8y.deviceDatabase4").directive("validateValueInRegisterRange",e)}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ini=function(e){"use strict";function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}var n=t(function(e,t){function n(e,t){var i=[],r="";"string"==typeof t?t={section:t,whitespace:!1}:(t=t||{},t.whitespace=t.whitespace===!0);var o=t.whitespace?" = ":"=";return Object.keys(e).forEach(function(t,n,a){var u=e[t];u&&Array.isArray(u)?u.forEach(function(e){r+=s(t+"[]")+o+s(e)+"\n"}):u&&"object"===("undefined"==typeof u?"undefined":_typeof(u))?i.push(t):r+=s(t)+o+s(u)+l}),t.section&&r.length&&(r="["+s(t.section)+"]"+l+r),i.forEach(function(i,s,o){var u=a(i).join("\\."),c=(t.section?t.section+".":"")+u,d=n(e[i],{section:c,whitespace:t.whitespace});r.length&&d.length&&(r+=l),r+=d}),r}function a(e){return e.replace(/\1/g,"LITERAL\\1LITERAL").replace(/\\\./g,"").split(/\./).map(function(e){return e.replace(/\1/g,"\\.").replace(/\2LITERAL\\1LITERAL\2/g,"")})}function i(e){var t={},n=t,i=null,r=/^\[([^\]]*)\]$|^([^=]+)(=(.*))?$/i,s=e.split(/[\r\n]+/g);return s.forEach(function(e,a,s){if(e&&!e.match(/^\s*[;#]/)){var l=e.match(r);if(l){if(void 0!==l[1])return i=o(l[1]),void(n=t[i]=t[i]||{});var u=o(l[2]),c=!l[3]||o(l[4]);switch(c){case"true":case"false":case"null":c=JSON.parse(c)}u.length>2&&"[]"===u.slice(-2)&&(u=u.substring(0,u.length-2),n[u]?Array.isArray(n[u])||(n[u]=[n[u]]):n[u]=[]),Array.isArray(n[u])?n[u].push(c):n[u]=c}}}),Object.keys(t).filter(function(e,n,i){if(!t[e]||"object"!==_typeof(t[e])||Array.isArray(t[e]))return!1;var r=a(e),s=t,o=r.pop(),l=o.replace(/\\\./g,".");return r.forEach(function(e,t,n){s[e]&&"object"===_typeof(s[e])||(s[e]={}),s=s[e]}),(s!==t||l!==o)&&(s[l]=t[e],!0)}).forEach(function(e,n,a){delete t[e]}),t}function r(e){return'"'===e.charAt(0)&&'"'===e.slice(-1)||"'"===e.charAt(0)&&"'"===e.slice(-1)}function s(e){return"string"!=typeof e||e.match(/[=\r\n]/)||e.match(/^\[/)||e.length>1&&r(e)||e!==e.trim()?JSON.stringify(e):e.replace(/;/g,"\\;").replace(/#/g,"\\#")}function o(e,t){if(e=(e||"").trim(),!r(e)){for(var n=!1,a="",i=0,s=e.length;i<s;i++){var o=e.charAt(i);if(n)a+="\\;#".indexOf(o)!==-1?o:"\\"+o,n=!1;else{if(";#".indexOf(o)!==-1)break;"\\"===o?n=!0:a+=o}}return n&&(a+="\\"),a.trim()}"'"===e.charAt(0)&&(e=e.substr(1,e.length-2));try{e=JSON.parse(e)}catch(e){}return e}t.parse=t.decode=i,t.stringify=t.encode=n,t.safe=s,t.unsafe=o;var l="undefined"!=typeof process&&"win32"===process.platform?"\r\n":"\n"}),a=n.parse,i=n.decode,r=n.stringify,s=n.encode,o=n.safe,l=n.unsafe;return e.default=n,e.parse=a,e.decode=i,e.stringify=r,e.encode=s,e.safe=o,e.unsafe=l,e}({});!function(){"use strict";function e(e){var t;t='<div class="row">\n  <div class="form-group col-lg-4" ng-class="{\'has-error\': vm.deviceTypeForm.fieldbusType.$dirty && vm.deviceTypeForm.fieldbusType.$invalid}">\n    <label translate>Fieldbus type</label>\n    <select class="form-control" name="fieldbusType" ng-model="vm.formValue.fieldbusType" ng-options="deviceTypeFeatures.fieldbusType as deviceTypeFeatures.label for deviceTypeFeatures in vm.deviceTypesFeatures" ng-change="vm.onDeviceTypeChange()" ng-disabled="!vm.isNew()" required>\n    </select>\n  </div>\n  <div class="form-group col-lg-4" ng-class="{\'has-error\': vm.deviceTypeForm.name.$dirty && vm.deviceTypeForm.name.$invalid}">\n    <label translate>Name</label>\n    <input class="form-control" name="name" ng-model="vm.deviceType.name" ng-disabled="!vm.isNew()" ng-maxlength="650" placeholder="{{\'e.g. My device\' | translate}}" required>\n  </div>\n  <div class="form-group col-lg-4" ng-class="{\'has-error\': vm.deviceTypeForm.deviceType.$dirty && vm.deviceTypeForm.deviceType.$invalid}" ng-if="vm.getFeatures().deviceType">\n    <label translate>{{vm.getFeatures().label}} device type</label>\n    <input class="form-control" name="deviceType" ng-model="vm.deviceType.deviceType" c8y-hex-input placeholder="{{\'e.g.\' | translate}} 39FC23">\n  </div>\n</div>\n',e.put("deviceDatabase4/detail/basic-info.html",t),e.put("core_deviceDatabase4/detail/basic-info.html",t),e.put("/apps/core/deviceDatabase4/detail/basic-info.html",t),t='<div>\n  <form ng-if="vm.deviceType" class="panel-body device-type-form" name="vm.deviceTypeForm" novalidate>\n    <c8y-device-type-basic-info device-type-form="vm.deviceTypeForm" form-value="vm.formValue" device-type="vm.deviceType" device-types-features="vm.deviceTypesFeatures" is-new="vm.isNew" on-device-type-change="vm.changeDeviceType">\n    </c8y-device-type-basic-info>\n\n    <c8y-device-type-message-id-configuration ng-if="vm.features.configuration.messageIdConfiguration.length" feature-label="vm.features.label" feature-configuration="vm.features.configuration" device-type-form="vm.deviceTypeForm" device-type="vm.deviceType" message-id-sources="vm.messageIdSources">\n    </c8y-device-type-message-id-configuration>\n\n    <div class="row">\n      <c8y-device-type-discrete-outputs ng-if="vm.features.discreteOutputs" ng-class="{\n          \'col-lg-6\': vm.features.discreteOutputs && vm.features.discreteInputs,\n          \'col-lg-12\': !vm.features.discreteInputs\n        }" discrete-outputs-categorized="vm.discreteOutputsCategorized" is-empty="vm.isEmpty" add-discrete-output="vm.addDiscreteOutput" edit-discrete-output="vm.editDiscreteOutput" remove-discrete-output="vm.removeDiscreteOutput">\n      </c8y-device-type-discrete-outputs>\n\n      <c8y-device-type-discrete-inputs ng-if="vm.features.discreteInputs" ng-class="{\n          \'col-lg-6\': vm.features.discreteOutputs && vm.features.discreteInputs,\n          \'col-lg-12\': !vm.features.discreteOutputs\n        }" discrete-inputs-categorized="vm.discreteInputsCategorized" is-empty="vm.isEmpty" add-discrete-input="vm.addDiscreteInput" edit-discrete-input="vm.editDiscreteInput" remove-discrete-input="vm.removeDiscreteInput">\n      </c8y-device-type-discrete-inputs>\n    </div>\n\n    <div class="row">\n      <c8y-device-type-holding-registers ng-if="vm.features.holdingRegisters" ng-class="{\n          \'col-lg-6\': vm.features.holdingRegisters && vm.features.inputRegisters,\n          \'col-lg-12\': !vm.features.inputRegisters\n        }" features="vm.features" holding-registers-categorized="vm.holdingRegistersCategorized" is-empty="vm.isEmpty" add-holding-register="vm.addHoldingRegister" edit-holding-register="vm.editHoldingRegister" remove-holding-register="vm.removeHoldingRegister">\n      </c8y-device-type-holding-registers>\n\n      <c8y-device-type-input-registers ng-if="vm.features.inputRegisters" ng-class="{\n          \'col-lg-6\': vm.features.holdingRegisters && vm.features.inputRegisters,\n          \'col-lg-12\': !vm.features.holdingRegisters\n        }" input-registers-categorized="vm.inputRegistersCategorized" is-empty="vm.isEmpty" add-input-register="vm.addInputRegister" edit-input-register="vm.editInputRegister" remove-input-register="vm.removeInputRegister">\n      </c8y-device-type-input-registers>\n    </div>\n\n    <c8y-device-type-options ng-if="vm.features.options" options="vm.features.options" device-type="vm.deviceType">\n    </c8y-device-type-options>\n\n    <c8y-if-allowed admin-mos="[vm.deviceType.id]">\n      <button class="btn btn-primary" ng-click="vm.save(vm.deviceType)" ng-disabled="vm.saveDisabled()" translate>\n        Save\n      </button>\n    </c8y-if-allowed>\n  </form>\n</div>\n',
e.put("deviceDatabase4/detail/device-type-detail.html",t),e.put("core_deviceDatabase4/detail/device-type-detail.html",t),e.put("/apps/core/deviceDatabase4/detail/device-type-detail.html",t),t='<div class="panel panel-clean">\n  <div class="panel-heading">\n    <i c8y-icon="sliders"></i>\n    <span translate>Discrete inputs</span>\n    <button class="btn btn-link pull-right" ng-click="vm.addDiscreteInput()">\n      <i c8y-icon="plus"></i>\n      <span translate>Add</span>\n    </button>\n  </div>\n  <div class="panel-body">\n    <div class="alert alert-warning" ng-if="vm.isEmpty(vm.discreteInputsCategorized)" translate>\n      No discrete inputs defined.\n    </div>\n    <table class="table table-hover elements-table" ng-if="!vm.isEmpty(vm.discreteInputsCategorized)">\n      <colgroup>\n        <col>\n        <col class="buttons">\n      </colgroup>\n      <thead ng-repeat-start="(category, discreteInputs) in vm.discreteInputsCategorized">\n      <tr>\n        <th colspan="2" class="category-header" ng-class="{\'text-muted\': !category}">\n          <span ng-if="category" title="{{category}}">{{category}}</span>\n          <span ng-if="!category">{{\'Uncategorized\' | translate}}</span>\n        </th>\n      </tr>\n      </thead>\n      <tbody ng-repeat-end>\n      <tr ng-repeat="discreteInput in discreteInputs | orderBy:\'number\'">\n        <td class="interact info" ng-click="vm.editDiscreteInput(discreteInput)">\n          <span>{{discreteInput.name}}</span>\n          <small class="text-muted hidden-sm hidden-xs" style="margin-right: 10px">\n            <strong><span translate>Number</span>:</strong>\n            <span>{{discreteInput.number}}</span>\n          </small>\n        </td>\n        <td class="text-right">\n          <button class="btn btn-danger btn-xs showOnHover" uib-tooltip="{{\'Remove\' | translate}}" ng-click="vm.removeDiscreteInput(discreteInput)">\n            <i c8y-icon="times"></i>\n          </button>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n',e.put("deviceDatabase4/detail/discrete-inputs.html",t),e.put("core_deviceDatabase4/detail/discrete-inputs.html",t),e.put("/apps/core/deviceDatabase4/detail/discrete-inputs.html",t),t='<div class="panel panel-clean">\n  <div class="panel-heading">\n    <i c8y-icon="sliders"></i>\n    <span translate>Coils (discrete outputs)</span>\n    <button class="btn btn-link pull-right" ng-click="vm.addDiscreteOutput()">\n      <i c8y-icon="plus"></i>\n      <span translate>Add</span>\n    </button>\n  </div>\n  <div class="panel-body">\n    <div class="alert alert-warning" ng-if="vm.isEmpty(vm.discreteOutputsCategorized)" translate>\n      No coils defined.\n    </div>\n    <table class="table table-hover elements-table" ng-if="!vm.isEmpty(vm.discreteOutputsCategorized)">\n      <colgroup>\n        <col>\n        <col class="buttons">\n      </colgroup>\n      <thead ng-repeat-start="(category, discreteOutputs) in vm.discreteOutputsCategorized">\n      <tr>\n        <th colspan="2" class="category-header" ng-class="{\'text-muted\': !category}">\n          <span ng-if="category" title="{{category}}">{{category}}</span>\n          <span ng-if="!category">{{\'Uncategorized\' | translate}}</span>\n        </th>\n      </tr>\n      </thead>\n      <tbody ng-repeat-end>\n      <tr ng-repeat="discreteOutput in discreteOutputs | orderBy:\'number\'">\n        <td class="interact info" ng-click="vm.editDiscreteOutput(discreteOutput)">\n          <span>{{discreteOutput.name}}</span>\n          <small class="text-muted hidden-sm hidden-xs" style="margin-right: 10px">\n            <strong><span translate>Number</span>:</strong>\n            <span>{{discreteOutput.number}}</span>\n          </small>\n        </td>\n        <td class="text-right">\n          <button class="btn btn-danger btn-xs showOnHover" uib-tooltip="{{\'Remove\' | translate}}" ng-click="vm.removeDiscreteOutput(discreteOutput)">\n            <i c8y-icon="times"></i>\n          </button>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n',e.put("deviceDatabase4/detail/discrete-outputs.html",t),e.put("core_deviceDatabase4/detail/discrete-outputs.html",t),e.put("/apps/core/deviceDatabase4/detail/discrete-outputs.html",t),t='<div class="panel panel-clean">\n  <div class="panel-heading">\n    <i c8y-icon="tasks"></i>\n    <span ng-if="vm.features.holdingRegisters.sectionTitle">\n      {{vm.features.holdingRegisters.sectionTitle | translate}}\n    </span>\n    <span ng-if="!vm.features.holdingRegisters.sectionTitle">\n      {{\'Holding registers\' | translate}}\n    </span>\n    <button class="btn btn-link pull-right" ng-click="vm.addHoldingRegister()">\n      <i c8y-icon="plus"></i>\n      <span translate>Add</span>\n    </button>\n  </div>\n  <div class="panel-body">\n    <div class="alert alert-warning" ng-if="vm.isEmpty(vm.holdingRegistersCategorized)">\n      <span ng-if="vm.features.holdingRegisters.noRegistersDefinedMessage">\n        {{vm.features.holdingRegisters.noRegistersDefinedMessage | translate}}\n      </span>\n      <span ng-if="!vm.features.holdingRegisters.noRegistersDefinedMessage">\n        {{\'No holding registers defined.\' | translate}}\n      </span>\n    </div>\n    <table class="table table-hover elements-table" ng-if="!vm.isEmpty(vm.holdingRegistersCategorized)">\n      <colgroup>\n        <col>\n        <col class="buttons">\n      </colgroup>\n      <thead ng-repeat-start="(category, holdingRegisters) in vm.holdingRegistersCategorized">\n        <tr>\n          <th colspan="2" class="category-header" ng-class="{\'text-muted\': !category}">\n            <span ng-if="category" title="{{category}}">{{category}}</span>\n            <span ng-if="!category">{{\'Uncategorized\' | translate}}</span>\n          </th>\n        </tr>\n      </thead>\n      <tbody ng-repeat-end>\n        <tr ng-repeat="holdingRegister in holdingRegisters | orderBy:[\'number\', \'startBit\', \'browsePath\']">\n          <td class="interact info" ng-click="vm.editHoldingRegister(holdingRegister)">\n            <span>{{holdingRegister.name}}</span>\n            <small class="text-muted hidden-sm hidden-xs registerDescription" ng-if="vm.features.holdingRegisters.number">\n              <strong>\n                <span>{{(vm.features.holdingRegisters.number.label | translate) || (\'Number\' | translate)}}</span>:\n              </strong>\n              <span>{{holdingRegister.number}}</span>\n            </small>\n            <small class="text-muted hidden-sm hidden-xs registerDescription" ng-if="vm.features.holdingRegisters.messageTypeId">\n              <strong>\n                <span>{{(vm.features.holdingRegisters.messageTypeId.label | translate) || (\'Message ID\' | translate)}}</span>:\n              </strong>\n              <span>{{holdingRegister.messageTypeId}}</span>\n            </small>\n            <small class="text-muted hidden-sm hidden-xs registerDescription" ng-if="vm.features.holdingRegisters.startBit">\n              <strong><span translate>Start bit</span>:</strong>\n              <span>{{holdingRegister.startBit}}</span>\n            </small>\n            <small class="text-muted hidden-sm hidden-xs registerDescription" ng-if="vm.features.holdingRegisters.noBits">\n              <strong><span translate>Number of bits</span>:</strong>\n              <span>{{holdingRegister.noBits}}</span>\n            </small>\n            <small class="text-muted hidden-sm hidden-xs registerDescription" ng-if="vm.features.holdingRegisters.browsePath">\n              <strong><span translate>Browse path</span>:</strong>\n              <span>{{holdingRegister.browsePath}}</span>\n            </small>\n            <small class="text-muted hidden-sm hidden-xs registerDescription" ng-if="vm.features.holdingRegisters.nodeType">\n              <strong><span translate>Node type</span>:</strong>\n              <span>{{holdingRegister.nodeType}}</span>\n            </small>\n            <small class="text-muted hidden-sm hidden-xs registerDescription" ng-if="vm.features.holdingRegisters.attributeType">\n              <strong><span translate>Attribute type</span>:</strong>\n              <span>{{holdingRegister.attributeType}}</span>\n            </small>\n            <small class="text-muted hidden-sm hidden-xs registerDescription" ng-if="vm.features.holdingRegisters.dataType">\n              <strong><span translate>Data type</span>:</strong>\n              <span>{{vm.getDataTypeLabel(holdingRegister)}}</span>\n            </small>\n            <small class="text-muted hidden-sm hidden-xs registerDescription" ng-if="vm.features.holdingRegisters.accessType">\n              <strong><span translate>Access type</span>:</strong>\n              <span>{{vm.getAccessTypeLabel(holdingRegister)}}</span>\n            </small>\n            <small class="text-muted hidden-sm hidden-xs registerDescription" ng-if="vm.features.holdingRegisters.index">\n              <strong><span translate>Index</span>:</strong>\n              <span>{{holdingRegister.index | hex}}</span>\n            </small>\n            <small class="text-muted hidden-sm hidden-xs registerDescription" ng-if="vm.features.holdingRegisters.subIndex && holdingRegister.subIndex >= 0">\n              <strong><span translate>Sub-index</span>:</strong>\n              <span>{{holdingRegister.subIndex | hex}}</span>\n            </small>\n          </td>\n          <td class="text-right">\n            <button class="btn btn-danger btn-xs showOnHover" uib-tooltip="{{\'Remove\' | translate}}" ng-click="vm.removeHoldingRegister(holdingRegister)">\n              <i c8y-icon="times"></i>\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n',e.put("deviceDatabase4/detail/holding-registers.html",t),e.put("core_deviceDatabase4/detail/holding-registers.html",t),e.put("/apps/core/deviceDatabase4/detail/holding-registers.html",t),t='<div class="panel panel-clean">\n  <div class="panel-heading">\n    <i c8y-icon="tasks"></i>\n    <span translate>Input registers</span>\n    <button class="btn btn-link pull-right" ng-click="vm.addInputRegister()">\n      <i c8y-icon="plus"></i>\n      <span translate>Add</span>\n    </button>\n  </div>\n  <div class="panel-body">\n    <div class="alert alert-warning" ng-if="vm.isEmpty(vm.inputRegistersCategorized)" translate>\n      No input registers defined.\n    </div>\n    <table class="table table-hover elements-table" ng-if="!vm.isEmpty(vm.inputRegistersCategorized)">\n      <colgroup>\n        <col>\n        <col class="buttons">\n      </colgroup>\n      <thead ng-repeat-start="(category, inputRegisters) in vm.inputRegistersCategorized">\n      <tr>\n        <th colspan="2" class="category-header" ng-class="{\'text-muted\': !category}">\n          <span ng-if="category" title="{{category}}">{{category}}</span>\n          <span ng-if="!category">{{\'Uncategorized\' | translate}}</span>\n        </th>\n      </tr>\n      </thead>\n      <tbody ng-repeat-end>\n      <tr ng-repeat="inputRegister in inputRegisters | orderBy:[\'number\', \'startBit\']">\n        <td class="interact info" ng-click="vm.editInputRegister(inputRegister)">\n          <span>{{inputRegister.name}}</span>\n          <small class="text-muted hidden-sm hidden-xs" style="margin-right: 10px">\n            <strong><span translate>Number</span>:</strong>\n            <span>{{inputRegister.number}}</span>\n          </small>\n          <small class="text-muted hidden-sm hidden-xs" style="margin-right: 10px">\n            <strong><span translate>Start bit</span>:</strong>\n            <span>{{inputRegister.startBit}}</span>\n          </small>\n          <small class="text-muted hidden-sm hidden-xs" style="margin-right: 10px">\n            <strong><span translate>Number of bits</span>:</strong>\n            <span>{{inputRegister.noBits}}</span>\n          </small>\n        </td>\n        <td class="text-right">\n          <button class="btn btn-danger btn-xs showOnHover" title="{{\'Remove\' | translate}}" ng-click="vm.removeInputRegister(inputRegister)">\n            <i c8y-icon="times"></i>\n          </button>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n',e.put("deviceDatabase4/detail/input-registers.html",t),e.put("core_deviceDatabase4/detail/input-registers.html",t),e.put("/apps/core/deviceDatabase4/detail/input-registers.html",t),t='<div class="panel panel-clean">\n  <div class="panel-heading">\n    <i c8y-icon="tasks"></i>\n    <span translate>Message types</span>\n  </div>\n  <div class="panel-body">\n    <div class="row">\n      <div class="col-lg-6">\n        <c8y-message-id-configuration-description feature-label="vm.featureLabel" message-id-configuration="vm.featureConfiguration.messageIdConfiguration">\n        </c8y-message-id-configuration-description>\n      </div>\n      <div class="col-lg-6">\n        <div class="row">\n          <div class="form-group col-lg-12" ng-class="{\'has-error\': vm.deviceTypeForm.messageIdSource.$dirty && vm.deviceTypeForm.deviceType.$invalid}">\n            <label translate>Source</label>\n            <select class="form-control" name="messageIdSource" ng-model="vm.deviceType.c8y_MessageIdConfiguration.source" ng-options="source.value as (source.label | translate) for source in vm.featureConfiguration.messageIdConfiguration" ng-disabled="vm.isMessageIdSourceDisabled()" required>\n            </select>\n          </div>\n        </div>\n\n        <div class="row" ng-if="vm.deviceType.c8y_MessageIdConfiguration.source === vm.messageIdSources.PAYLOAD.value">\n          <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.deviceTypeForm.messageIdStartBit.$dirty && vm.deviceTypeForm.deviceType.$invalid}">\n            <label>\n              <span translate>Start bit</span>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'For example, if message type is indicated by the first byte of payload, then enter 0\' | translate}}">\n              </i>\n            </label>\n            <input class="form-control" type="number" name="messageIdStartBit" ng-model="vm.deviceType.c8y_MessageIdConfiguration.messageIdMapping.startBit" ng-min="0" placeholder="{{\'e.g.\' | translate}} 0" required>\n          </div>\n          <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.deviceTypeForm.messageIdNoBits.$dirty && vm.deviceTypeForm.deviceType.$invalid}">\n            <label>\n              <span translate>Number of bits</span>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'For example, if message type is indicated by the first byte of payload, then enter 8\' | translate}}">\n              </i>\n            </label>\n            <input class="form-control" type="number" name="messageIdNoBits" ng-model="vm.deviceType.c8y_MessageIdConfiguration.messageIdMapping.noBits" ng-min="1" placeholder="{{\'e.g.\' | translate}} 8" required>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',e.put("deviceDatabase4/detail/message-id-configuration.html",t),e.put("core_deviceDatabase4/detail/message-id-configuration.html",t),e.put("/apps/core/deviceDatabase4/detail/message-id-configuration.html",t),t='<div class="panel panel-clean">\n  <div class="panel-heading">\n    <i c8y-icon="list"></i>\n    <span translate>Options</span>\n  </div>\n  <div class="panel-body">\n    <div class="row" ng-if="vm.options.serverTime">\n      <div class="form-group col-lg-12">\n        <div class="checkbox">\n          <label>\n            <input type="checkbox" name="useServerTime" ng-model="vm.deviceType.c8y_useServerTime">\n            <span translate>Use server time</span>\n          </label>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',e.put("deviceDatabase4/detail/options.html",t),e.put("core_deviceDatabase4/detail/options.html",t),e.put("/apps/core/deviceDatabase4/detail/options.html",t),t='<c8y-ui-action-bar-set>\n  <c8y-if-allowed any-role="[\'ROLE_INVENTORY_ADMIN\', \'ROLE_INVENTORY_CREATE\']">\n    <button class="btn btn-link" ng-click="vm.importDeviceType()">\n      <i c8y-icon="upload"></i>\n      <span translate>Import</span>\n    </button>\n    <button class="btn btn-link" ng-click="vm.addDeviceType()">\n      <i c8y-icon="plus"></i>\n      <span translate>New</span>\n    </button>\n  </c8y-if-allowed>\n\n  <c8y-refresh-btn></c8y-refresh-btn>\n</c8y-ui-action-bar-set>\n\n<!-- empty state -->\n<div class="c8y-empty-state text-center" style="margin-top: 40px" ng-if="vm.deviceTypes.length === 0">\n  <h1 class="c8y-icon c8y-icon-device-protocols c8y-icon-duocolor"></h1>\n  <h3 translate>No device types found.</h3>\n</div>\n<!-- /.empty state -->\n\n<div class="list-group" ng-if="vm.deviceTypes.length > 0">\n  <div class="list-group-item flex-row" ng-repeat="deviceType in vm.deviceTypes | orderBy:\'name\'">\n    <div class="list-item-actions">\n      <c8y-if-allowed admin-mos="[deviceType.id]">\n        <span class="dropdown settings" is-open="isopen" uib-dropdown>\n          <button class="dropdown-toggle c8y-dropdown btn-link" uib-dropdown-toggle>\n            <i c8y-icon="ellipsis-v"></i>\n          </button>\n          <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu="">\n            <li>\n              <a href="" ng-click="vm.navigateToDetails(deviceType)">\n                <i c8y-icon="pencil"></i> {{\'Edit\' | translate}}\n            </a></li>\n            <li>\n              <a href ng-click="vm.onClickExport(deviceType)">\n                <i c8y-icon="download"></i> {{\'Export\' | translate}}\n              </a>\n            </li>\n            <li>\n              <a href ng-click="vm.onClickDelete(deviceType)">\n                <i c8y-icon="trash-o"></i> {{\'Remove\' | translate}}\n              </a>\n            </li>\n          </ul>\n        </span>\n      </c8y-if-allowed>\n    </div>\n    <div class="list-item-icon" ng-click="vm.navigateToDetails(deviceType)">\n      <i c8y-icon="hdd-o"></i>\n    </div>\n    <div class="list-item-body" ng-click="vm.navigateToDetails(deviceType)">\n      {{deviceType.name}} <em class="small text-muted">{{vm.getFieldbusTypeLabel(deviceType)}}</em>\n    </div> \n  </div>\n  <c8y-load-more></c8y-load-more>\n</div>\n',e.put("deviceDatabase4/device-type-list.html",t),e.put("core_deviceDatabase4/device-type-list.html",t),e.put("/apps/core/deviceDatabase4/device-type-list.html",t),t='<a title="{{match.label}}">\n  <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>\n</a>\n',e.put("deviceDatabase4/modals/category-typeahead.html",t),e.put("core_deviceDatabase4/modals/category-typeahead.html",t),e.put("/apps/core/deviceDatabase4/modals/category-typeahead.html",t),t='<div class="modal-header" ng-if="vm.resolve.title">\n  <h3 class="text-truncate" title="{{vm.resolve.title | translate}}">\n    {{vm.resolve.title | translate}}\n  </h3>\n</div>\n<div class="modal-body">\n  <form ng-if="vm.element" class="panel-body" name="vm.elementForm" novalidate>\n    <fieldset style="margin-top: -20px">\n      <div class="legend form-block center">\n        <span translate>General</span>\n      </div>\n\n      <div class="row">\n        <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'name\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.name)}}">\n          <label for="name" translate>Name</label>\n          <input type="text" class="form-control" id="name" name="name" ng-model="vm.element.name" c8y-autocomplete="off" placeholder="{{\'e.g. Door sensor\' | translate}}" required>\n        </div>\n        <div class="form-group col-lg-6 category-form-group" ng-class="{\'has-error\': vm.invalid(\'category\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.category)}}">\n          <label for="category" translate>Display category</label>\n          <input type="text" class="form-control" id="category" name="category" ng-model="vm.element.category" c8y-autocomplete="off" uib-typeahead="category.name for category in vm.categories | filter:{name:$viewValue}" typeahead-template-url="core_deviceDatabase4/modals/category-typeahead.html">\n        </div>\n      </div>\n    </fieldset>\n\n    <fieldset>\n      <div class="legend form-block center">\n        <span translate>Value selection</span>\n        <i c8y-icon="question-circle" uib-tooltip="{{\'Indicate from where the value should be taken\' | translate}}">\n        </i>\n      </div>\n\n      <div class="row">\n        <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'number\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.number)}}">\n          <label for="number" translate>Number</label>\n          <input type="number" class="form-control" id="number" name="number" ng-model="vm.element.number" ng-min="1" ng-max="65536" step="1" placeholder="{{\'e.g.\' | translate}} 1234" required>\n        </div>\n      </div>\n    </fieldset>\n\n    <fieldset>\n      <div class="legend form-block center">\n        <span translate>Functionalities</span>\n        <i c8y-icon="question-circle" uib-tooltip="{{\'Choose which actions to perform with the value\' | translate}}"></i>\n      </div>\n\n      <div class="row">\n        <div class="form-group col-lg-6">\n          <div ng-if="vm.features.functionalities.showStatus" class="checkbox">\n            <label>\n              <input type="checkbox" ng-model="vm.element.meta.showStatus" ng-disabled="vm.element.meta.updateStatus">\n              <span translate>Show status (read-only access)</span>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'Enable showing current value in UI (e.g. on Fieldbus widget)\' | translate}}">\n              </i>\n            </label>\n          </div>\n          <div ng-if="vm.features.functionalities.updateStatus && !vm.element.input" class="checkbox">\n            <label>\n              <input type="checkbox" ng-model="vm.element.meta.updateStatus" ng-change="vm.onUpdateStatusCheckboxClicked()">\n              <span translate>Update status (read/write access)</span>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'Enable changing current value from UI (e.g. using Fieldbus widget)\' | translate}}">\n              </i>\n            </label>\n          </div>\n          <div class="checkbox">\n            <label>\n              <input type="checkbox" ng-model="vm.element.meta.raiseAlarm">\n              <span translate>Raise alarm</span>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'Create an alarm if the value is not equal to 0\' | translate}}">\n              </i>\n            </label>\n          </div>\n          <div class="checkbox">\n            <label>\n              <input type="checkbox" ng-model="vm.element.meta.sendEvent">\n              <span translate>Send event</span>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'Create an event whenever the value is changed\' | translate}}">\n              </i>\n            </label>\n          </div>\n        </div>\n      </div>\n      <div class="row">\n        <div ng-if="vm.element.meta.showStatus" ng-repeat="enumValue in vm.element.meta.enumValues | limitTo:2">\n          <ng-form name="vm.nestedEnumValueValueForm">\n            <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.nestedEnumValueValueForm.$dirty && vm.nestedEnumValueValueForm.$invalid}">\n            <div ng-if="enumValue.value === 0">\n              <label translate>Text to show if value is zero</label>\n              <input class="form-control" ng-model="enumValue.label" placeholder="{{\'e.g. Off\' | translate}}" ng-required="vm.element.meta.showStatus">\n              </div>\n              <div ng-if="enumValue.value === 1">\n                <label translate>Text to show if value is one</label>\n                <input class="form-control" ng-model="enumValue.label" placeholder="{{\'e.g. On\' | translate}}" ng-required="vm.element.meta.showStatus">\n              </div>\n            </div>\n            <div ng-if="enumValue.value === 1">\n              <label translate>Text to show if value is one</label>\n              <input class="form-control" ng-model="enumValue.label" placeholder="{{\'e.g. On\' | translate}}" ng-required="vm.element.meta.showStatus">\n            </div>\n          </ng-form></div>\n          \n        </div>\n      </fieldset></form></div>\n      <div class="row" ng-if="vm.element.meta.raiseAlarm">\n        <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'alarmType\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.alarmType)}}">\n          <label for="alarmType" translate>Alarm type</label>\n          <input class="form-control" id="alarmType" name="alarmType" ng-model="vm.element.alarmMapping.type" placeholder="{{\'e.g.\' | translate}} c8y_DoorStatus" ng-required="vm.element.meta.raiseAlarm">\n        </div>\n        <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'alarmText\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.alarmText)}}">\n          <label for="alarmText" translate>Alarm text</label>\n          <input class="form-control" name="alarmText" id="alarmText" ng-model="vm.element.alarmMapping.text" placeholder="{{\'e.g. Door opened\' | translate}}" ng-required="vm.element.meta.raiseAlarm">\n        </div>\n        <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'alarmSeverity\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.alarmSeverity)}}">\n          <label for="alarmSeverity" translate>Alarm severity</label>\n          <select class="form-control" id="alarmSeverity" name="alarmSeverity" ng-model="vm.element.alarmMapping.severity" ng-options="(severity | translate) for severity in vm.alarmSeverities" ng-required="vm.element.meta.raiseAlarm">\n          </select>\n        </div>\n      </div>\n      <div class="row" ng-if="vm.element.meta.sendEvent">\n        <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'eventType\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.eventType)}}">\n          <label for="eventType" translate>Event type</label>\n          <input class="form-control" id="eventType" name="eventType" ng-model="vm.element.eventMapping.type" placeholder="{{\'e.g.\' | translate}} c8y_DoorOpen" ng-required="vm.element.meta.sendEvent">\n        </div>\n        <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'eventText\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.eventText)}}">\n          <label for="eventText" translate>Event text</label>\n          <input class="form-control" id="eventText" name="eventText" ng-model="vm.element.eventMapping.text" placeholder="{{\'e.g. Door has been opened\' | translate}}" ng-required="vm.element.meta.sendEvent">\n        </div>\n      </div>\n    \n  \n\n<div class="modal-footer">\n  <button class="btn btn-primary" ng-disabled="vm.elementForm.$invalid" ng-click="vm.save()" translate>\n    OK\n  </button>\n  <button class="btn btn-default" ng-click="vm.dismiss()" translate>\n    Close\n  </button>\n</div>\n',e.put("deviceDatabase4/modals/configure-discrete-io.html",t),e.put("core_deviceDatabase4/modals/configure-discrete-io.html",t),e.put("/apps/core/deviceDatabase4/modals/configure-discrete-io.html",t),t='<div class="modal-header" ng-if="vm.resolve.title">\n  <h3 class="text-truncate" title="{{vm.resolve.title | translate}}">\n    {{vm.resolve.title | translate}}\n  </h3>\n</div>\n<div class="modal-body">\n  <form ng-if="vm.element" class="panel-body" name="vm.elementForm" novalidate>\n    <fieldset style="margin-top: -20px" ng-if="vm.features.messageTypeId">\n      <div class="legend form-block center">\n        <span translate>Message type</span>\n        <i c8y-icon="question-circle" uib-tooltip="{{\'Choose from which message type the value should be extracted\' | translate}}">\n        </i>\n      </div>\n\n      <div class="row">\n        <div class="form-group col-lg-4" ng-class="{\'has-error\': vm.invalid(\'messageTypeId\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.messageTypeId)}}">\n          <label for="messageTypeId">\n            {{\'Message ID\' | translate}}\n            <i c8y-icon="question-circle" uib-tooltip="{{\'This will be matched with message ID found in source specified on device type main page\' | translate}}">\n            </i>\n          </label>\n          <input type="number" class="form-control" id="messageTypeId" name="messageTypeId" ng-model="vm.element.messageTypeId" ng-min="0" ng-max="messageTypeIdMax()" placeholder="{{\'e.g.\' | translate}} 1" required>\n        </div>\n      </div>\n    </fieldset>\n\n    <fieldset>\n      <div class="legend form-block center">\n        <span translate>General</span>\n      </div>\n\n      <div class="row">\n        <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'name\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.name)}}">\n          <label for="name" translate>\n            Name\n          </label>\n          <input type="text" class="form-control" id="name" name="name" ng-model="vm.element.name" c8y-autocomplete="off" placeholder="{{\'e.g. My element\' | translate}}" required>\n        </div>\n        <div class="form-group col-lg-6 category-form-group" ng-class="{\'has-error\': vm.invalid(\'category\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.category)}}">\n          <label for="category" translate>\n            Display category\n          </label>\n          <input class="form-control" id="category" name="category" ng-model="vm.element.category" c8y-autocomplete="off" uib-typeahead="category.name for category in vm.categories | filter:{name: $viewValue}" typeahead-template-url="core_deviceDatabase4/modals/category-typeahead.html" placeholder="{{\'e.g. Elements\' | translate}}">\n        </div>\n      </div>\n    </fieldset>\n\n    <fieldset>\n      <div class="legend form-block center">\n        <span translate>Value selection</span>\n        <i c8y-icon="question-circle" uib-tooltip="{{\'Indicate from where the value should be extracted\' | translate}}">\n        </i>\n      </div>\n\n      <div class="row">\n        <div ng-if="vm.features.number" class="form-group col-lg-4" ng-class="{\'has-error\': vm.invalid(\'number\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.number)}}">\n          <label for="number">\n            <span>{{(features.number.label | translate) || (\'Number\' | translate)}}</span>\n          </label>\n          <input ng-if="!vm.features.number.useHex" type="number" class="form-control" id="number" name="number" ng-model="vm.element.number" ng-min="vm.getNumberMin()" ng-max="vm.getNumberMax()" step="1" placeholder="{{\'e.g.\' | translate}} 1234" required>\n          <input ng-if="vm.features.number.useHex" type="text" class="form-control" id="number" name="number" ng-model="vm.element.number" placeholder="{{\'Hexadecimal number\' | translate}}" required>\n        </div>\n        <div ng-if="vm.features.browsePath" class="form-group col-lg-4" ng-class="{\'has-error\': vm.invalid(\'browsePath\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.browsePath)}}">\n          <label for="browsePath" translate>Browse path</label>\n          <input class="form-control" id="browsePath" name="browsePath" ng-model="vm.element.browsePath" placeholder="{{\'e.g.: 4:Boilers/4:Boiler #1\' | translate}}" required>\n        </div>\n        <div ng-if="vm.features.startBit" class="form-group col-lg-4" ng-class="{\'has-error\': vm.invalid(\'startBit\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.startBit)}}">\n          <label for="startBit" translate>\n            Start bit\n          </label>\n          <input type="number" class="form-control" id="startBit" name="startBit" ng-model="vm.element.startBit" ng-min="0" ng-max="vm.startBitMax()" step="1" placeholder="{{\'e.g.\' | translate}} 0" required>\n        </div>\n        <div ng-if="vm.features.noBits" class="form-group col-lg-4" ng-class="{\'has-error\': vm.invalid(\'noBits\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.noBits)}}">\n          <label for="noBits" translate>\n            Number of bits\n          </label>\n          <input type="number" class="form-control" id="noBits" name="noBits" ng-model="vm.element.noBits" ng-min="1" ng-max="vm.noBitsMax(vm.element.startBit)" step="1" placeholder="{{\'e.g.\' | translate}} 1" required>\n        </div>\n        <div ng-if="vm.features.nodeType" class="form-group col-lg-4" ng-class="{\'has-error\': vm.invalid(\'nodeTypeValue\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.nodeType)}}">\n          <label for="nodeTypeValue" translate>\n            Node type\n          </label>\n          <select class="form-control" id="nodeTypeValue" name="nodeTypeValue" ng-model="vm.element.nodeType" ng-init="vm.element.nodeType=\'Variable\'" disabled="disabled">\n            <option value="Variable">Variable</option>\n          </select>\n        </div>\n        <div ng-if="vm.features.attributeType" class="form-group col-lg-4" ng-class="{\'has-error\': vm.invalid(\'attributeType\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.attributeType)}}">\n          <label for="attributeType" translate>\n            Attribute type\n          </label>\n          <input class="form-control" id="attributeType" name="attributeType" ng-model="vm.element.attributeType" ng-init="vm.element.attributeType=\'Value\'" disabled="disabled">\n        </div>\n        <div ng-if="vm.features.index" class="form-group col-lg-4" ng-class="{\'has-error\': vm.invalid(\'index\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.index)}}">\n          <label for="index" translate>\n            Index\n          </label>\n          <input class="form-control" id="index" name="index" ng-model="vm.element.index" ng-min="vm.features.index.min" ng-max="vm.features.index.max" placeholder="{{\'e.g.\' | translate}} 100A" c8y-hex-input required>\n        </div>\n        <div ng-if="vm.features.subIndex" class="form-group col-lg-4" ng-class="{\'has-error\': vm.invalid(\'subIndex\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.subIndex)}}">\n          <label for="subIndex" translate>\n            Sub-index\n          </label>\n          <input class="form-control" id="subIndex" name="subIndex" ng-model="vm.element.subIndex" ng-min="vm.features.subIndex.min" ng-max="vm.features.subIndex.max" placeholder="{{\'e.g.\' | translate}} 1C" c8y-hex-input>\n        </div>\n        <div ng-if="vm.features.dataType" class="form-group col-lg-4" ng-class="{\'has-error\': vm.invalid(\'dataType\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.dataType)}}">\n          <label for="dataType" translate>\n            Data type\n          </label>\n          <div class="c8y-select-wrapper">\n            <select class="form-control" id="dataType" name="dataType" ng-model="vm.element.meta.dataType" ng-options="dataType as (dataType.label | translate) for dataType in vm.dataTypes.values()" required>\n              <option ng-if="!vm.element.meta.dataType" value="" translate>Select (required)</option>\n            </select>\n            <span></span>\n          </div>\n        </div>\n        <div ng-if="vm.features.accessType" class="form-group col-lg-4" ng-class="{\'has-error\': vm.invalid(\'accessType\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.accessType)}}">\n          <label for="accessType" translate>\n            Access type\n          </label>\n          <div class="c8y-select-wrapper">\n            <select class="form-control" id="accessType" name="accessType" ng-model="vm.element.meta.accessType" ng-options="accessType as (accessType.label | translate) for accessType in vm.accessTypes.values()" ng-change="vm.onAccessTypeChange()" required>\n              <option ng-if="!vm.element.meta.accessType" value="" translate>Select (required)</option>\n            </select>\n            <span></span>\n          </div>\n        </div>\n      </div>\n    </fieldset>\n\n    <fieldset>\n      <div class="legend form-block center">\n        <span translate>Value normalisation</span>\n        <i c8y-icon="question-circle" uib-tooltip="{{\'Define how the raw value should be transformed before storing in the platform\' | translate}}">\n        </i>\n      </div>\n\n      <div class="row">\n        <div ng-if="vm.features.multiplier" class="form-group col-lg-4" ng-class="{\'has-error\': vm.invalid(\'multiplier\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.multiplier)}}">\n          <label for="multiplier" translate>\n            Multiplier\n          </label>\n          <input type="number" class="form-control" id="multiplier" name="multiplier" ng-model="vm.element.multiplier" ng-min="vm.features.multiplier.min" step="{{vm.features.multiplier.step}}" placeholder="{{\'e.g.\' | translate}} {{vm.features.multiplier.min}}" required>\n        </div>\n        <div ng-if="vm.features.divisor" class="form-group col-lg-4" ng-class="{\'has-error\': vm.invalid(\'divisor\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.divisor)}}">\n          <label for="divisor" translate>\n            Divisor\n          </label>\n          <input type="number" class="form-control" id="divisor" name="divisor" ng-model="vm.element.divisor" ng-min="1" step="1" placeholder="{{\'e.g.\' | translate}} 1" required>\n        </div>\n        <div ng-if="vm.features.offset" class="form-group col-lg-4" ng-class="{\'has-error\': vm.invalid(\'offset\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.offset)}}">\n          <label for="offset" translate>\n            Offset\n          </label>\n          <input type="number" class="form-control" id="offset" name="offset" ng-model="vm.element.offset" ng-min="vm.features.offset.min" ng-max="vm.features.offset.max" step="{{vm.features.offset.step}}" placeholder="{{\'e.g.\' | translate}} {{vm.features.offset.min}}" required>\n        </div>\n        <div ng-if="vm.features.decimalPlaces" class="form-group col-lg-4" ng-class="{\'has-error\': vm.invalid(\'decimalPlaces\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.decimalPlaces)}}">\n          <label for="decimalPlaces" translate>\n            Decimal places\n          </label>\n          <input type="number" class="form-control" id="decimalPlaces" name="decimalPlaces" ng-model="vm.element.decimalPlaces" ng-min="0" ng-max="5" step="1" placeholder="{{\'e.g.\' | translate}} 0" required>\n        </div>\n        <div class="form-group col-lg-4" ng-class="{\'has-error\': vm.invalid(\'unit\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.unit)}}">\n          <label for="unit" translate>\n            Unit\n          </label>\n          <input type="text" class="form-control" id="unit" name="unit" ng-model="vm.element.unit" placeholder="{{\'e.g.\' | translate}} u">\n        </div>\n        <div ng-if="vm.element.meta.updateStatus" class="form-group col-lg-4" ng-class="{\'has-error\': vm.invalid(\'min\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.min, {validateValueInRegisterRange: vm.element.meta.valuesRange.base})}}">\n          <label for="min" translate>\n            Minimum\n          </label>\n          <input type="number" class="form-control" id="min" name="min" ng-model="vm.element.min" ng-min="vm.element.meta.valuesRange.base.min" ng-max="vm.element.meta.valuesRange.custom.max" step="{{vm.element.meta.valuesRange.base.step}}" validate-value-in-register-range="vm.element.meta.valuesRange.base" placeholder="{{vm.getValuePlaceholder(vm.element.meta.valuesRange.base.min)}}" required>\n        </div>\n        <div ng-if="vm.element.meta.updateStatus" class="form-group col-lg-4" ng-class="{\'has-error\': vm.invalid(\'max\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.max, {validateValueInRegisterRange: vm.element.meta.valuesRange.base})}}">\n          <label for="max" translate>\n            Maximum\n          </label>\n          <input type="number" class="form-control" id="max" name="max" ng-model="vm.element.max" ng-min="vm.element.meta.valuesRange.custom.min" ng-max="vm.element.meta.valuesRange.base.max" step="{{vm.element.meta.valuesRange.base.step}}" validate-value-in-register-range="vm.element.meta.valuesRange.base" placeholder="{{vm.getValuePlaceholder(vm.element.meta.valuesRange.base.max)}}" required>\n        </div>\n      </div>\n    </fieldset>\n\n    <fieldset ng-if="vm.shouldShowOptions()">\n      <div class="legend form-block center" translate>\n        Options\n      </div>\n\n      <div class="row">\n        <div class="form-group col-lg-6">\n          <div class="checkbox" ng-if="vm.features.options.signed">\n            <label>\n              <input type="checkbox" ng-model="vm.element.signed">\n              <span translate>Signed</span>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'Check if the value is signed number\' | translate}}">\n              </i>\n            </label>\n          </div>\n          <div class="checkbox" ng-if="vm.features.options.enumType">\n            <label>\n              <input type="checkbox" ng-model="vm.element.meta.enumType">\n              <span translate>Enumeration type</span>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'Check to define the mapping of possible values into strings\' | translate}}">\n              </i>\n            </label>\n          </div>\n          <div class="checkbox" ng-if="vm.features.options.bcd">\n            <label>\n              <input type="checkbox" ng-model="vm.element.bcd">\n              <span translate>Packed decimal</span>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'Check if the value is BCD encoded\' | translate}}">\n              </i>\n            </label>\n          </div>\n          <div class="checkbox" ng-if="vm.features.options.littleEndian">\n            <label>\n              <input type="checkbox" ng-model="vm.element.littleEndian">\n              <span translate>Little-endian</span>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'Check if the value is represented in little-endian format\' | translate}}">\n              </i>\n            </label>\n          </div>\n        </div>\n      </div>\n      <div class="row" ng-if="vm.element.meta.enumType">\n        <div class="form-group col-lg-12">\n          <label translate>Enumeration values</label>\n          <div ng-repeat="enumValue in vm.element.meta.enumValues">\n            <div class="row">\n              <ng-form name="vm.nestedEnumValueValueForm">\n                <div class="form-group col-lg-4" ng-class="{\'has-error\': vm.nestedEnumValueValueForm.$dirty && vm.nestedEnumValueValueForm.$invalid}" uib-tooltip="{{vm.validationHints(vm.nestedEnumValueValueForm, {validateValueInRegisterRange: vm.element.meta.valuesRange.custom})}}">\n                  <input type="number" class="form-control" ng-model="enumValue.value" ng-min="vm.element.meta.valuesRange.custom.min" ng-max="vm.element.meta.valuesRange.custom.max" step="{{vm.element.meta.valuesRange.custom.step}}" validate-value-in-register-range="vm.element.meta.valuesRange.custom" unique unique-in-array="vm.element.meta.enumValues" unique-prop-name="value" placeholder="{{\'Value\' | translate}}" uib-tooltip="{{\'Value\' | translate}}" required>\n                </div>\n              </ng-form>\n              <ng-form name="vm.nestedEnumValueLabelForm">\n                <div class="form-group col-lg-4" ng-class="{\'has-error\': vm.nestedEnumValueLabelForm.$dirty && vm.nestedEnumValueLabelForm.$invalid}" uib-tooltip="{{vm.validationHints(vm.nestedEnumValueLabelForm)}}">\n                  <input class="form-control" ng-model="enumValue.label" placeholder="{{\'Label\' | translate}}" uib-tooltip="{{\'Label\' | translate}}" required>\n                </div>\n              </ng-form>\n              <a class="btn btn-link pull-right" ng-click="vm.removeEnumValue(vm.element, enumValue)">\n                <i c8y-icon="minus"></i>\n                <span translate>Remove value</span>\n              </a>\n            </div>\n          </div>\n          <div class="row">\n            <a class="btn btn-link left" ng-click="vm.addEnumValue(vm.element)">\n              <i c8y-icon="plus"></i>\n              <span translate>Add value</span>\n            </a>\n          </div>\n        </div>\n      </div>\n    </fieldset>\n\n    <fieldset ng-if="vm.shouldShowFunctionalities()">\n      <div class="legend form-block center">\n        <span translate>Functionalities</span>\n        <i c8y-icon="question-circle" uib-tooltip="{{\'Choose which actions to perform with the value\' | translate}}">\n        </i>\n      </div>\n\n      <div class="row">\n        <div class="form-group col-lg-12">\n          <div ng-if="vm.features.functionalities.readWriteMutex" class="radio">\n            <label>\n              <input type="radio" name="statusMappingRadios" value="read" ng-model="vm.readWriteMutexValue" ng-change="vm.onStatusMappingRadiosChange()" required>\n              <span translate>Show status (read-only)</span>\n            </label>\n          </div>\n          <div ng-if="vm.features.functionalities.readWriteMutex" class="radio">\n            <label>\n              <input type="radio" name="statusMappingRadios" value="write" ng-model="vm.readWriteMutexValue" ng-change="vm.onStatusMappingRadiosChange()" required>\n              <span translate>Update status (write)</span>\n            </label>\n          </div>\n          <div ng-if="vm.features.functionalities.showStatus && vm.shouldShowFunctionality(\'showStatus\')" class="checkbox">\n            <label>\n              <input type="checkbox" ng-model="vm.element.meta.showStatus" ng-disabled="vm.element.meta.updateStatus">\n              <span translate>Show status (read-only access)</span>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'Enable showing current value in UI (e.g. on Fieldbus widget)\' | translate}}">\n              </i>\n            </label>\n          </div>\n          <div ng-if="vm.features.functionalities.updateStatus && !vm.element.input && vm.shouldShowFunctionality(\'updateStatus\')" class="checkbox">\n            <label>\n              <input type="checkbox" ng-model="vm.element.meta.updateStatus" ng-change="vm.onUpdateStatusCheckboxChange()">\n              <span translate>Update status (read/write access)</span>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'Enable changing current value from UI (e.g. using Fieldbus widget)\' | translate}}">\n              </i>\n            </label>\n          </div>\n          <div ng-if="vm.shouldEnableShowStatusStandardFunctionalities() && vm.shouldShowFunctionality(\'sendMeasurement\')" class="checkbox">\n            <label>\n              <input type="checkbox" ng-model="vm.element.meta.sendMeasurement">\n              <span translate>Send measurement</span>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'Create a measurement whenever the value is changed\' | translate}}">\n              </i>\n            </label>\n          </div>\n          <div ng-if="vm.shouldEnableShowStatusStandardFunctionalities() && vm.shouldShowFunctionality(\'raiseAlarm\')" class="checkbox">\n            <label>\n              <input type="checkbox" ng-model="vm.element.meta.raiseAlarm">\n              <span translate>Raise alarm</span>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'Create an alarm if the value is not equal to 0\' | translate}}">\n              </i>\n            </label>\n          </div>\n          <div ng-if="vm.shouldEnableShowStatusStandardFunctionalities() && vm.shouldShowFunctionality(\'sendEvent\')" class="checkbox">\n            <label>\n              <input type="checkbox" ng-model="vm.element.meta.sendEvent">\n              <span translate>Send event</span>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'Create an event whenever the value is changed\' | translate}}">\n              </i>\n            </label>\n          </div>\n          <div ng-if="vm.features.functionalities.sendManagedObjectUpdate" class="checkbox">\n            <label>\n              <input type="checkbox" ng-model="vm.element.meta.sendManagedObjectUpdate">\n              <span translate>Update managed object</span>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'Update a fragment in managed object whenever the value is changed\' | translate}}">\n              </i>\n            </label>\n          </div>\n        </div>\n      </div>\n      <div ng-if="vm.element.meta.sendMeasurement && vm.shouldEnableShowStatusStandardFunctionalities() && vm.shouldShowFunctionality(\'sendMeasurement\')">\n        <div class="row">\n          <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'measurementType\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.measurementType)}}">\n            <label for="measurementType" translate>\n              Measurement type\n            </label>\n            <input class="form-control" id="measurementType" name="measurementType" ng-pattern="vm.PATTERN_VALIDATE_FRAGMENT_SERIES" ng-model="vm.element.measurementMapping.type" placeholder="{{\'e.g.\' | translate}} c8y_Temperature" ng-required="vm.element.meta.sendMeasurement">\n          </div>\n          <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'measurementSeries\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.measurementSeries)}}">\n            <label for="measurementSeries" translate>\n              Measurement series\n            </label>\n            <input class="form-control" id="measurementSeries" name="measurementSeries" ng-pattern="vm.PATTERN_VALIDATE_FRAGMENT_SERIES" ng-model="vm.element.measurementMapping.series" placeholder="{{\'e.g.\' | translate}} T" ng-required="vm.element.meta.sendMeasurement">\n          </div>\n        </div>\n      </div>\n      <div ng-if="vm.element.meta.raiseAlarm && vm.shouldEnableShowStatusStandardFunctionalities() && vm.shouldShowFunctionality(\'raiseAlarm\')">\n        <div class="row">\n          <div ng-if="vm.features.functionalities.raiseAlarm.mask" class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'alarmMask\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.alarmMask)}}">\n            <label for="alarmMask" translate>\n              Alarm mask\n            </label>\n            <input class="form-control" id="alarmMask" name="alarmMask" ng-model="vm.element.alarmMapping.mask" ng-min="vm.element.meta.valuesRange.mask.min" ng-max="vm.element.meta.valuesRange.mask.max" placeholder="{{\'e.g.\' | translate}} 2" ng-required="vm.element.meta.raiseAlarm" c8y-hex-input>\n          </div>\n          <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'alarmType\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.alarmType)}}">\n            <label for="alarmType" translate>\n              Alarm type\n            </label>\n            <input class="form-control" id="alarmType" name="alarmType" ng-model="vm.element.alarmMapping.type" placeholder="{{\'e.g.\' | translate}} c8y_HighTemperature" ng-required="vm.element.meta.raiseAlarm">\n          </div>\n          <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'alarmText\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.alarmText)}}">\n            <label for="alarmText" translate>\n              Alarm text\n            </label>\n            <input class="form-control" id="alarmText" name="alarmText" ng-model="vm.element.alarmMapping.text" placeholder="{{\'e.g. Temperature is high\' | translate}}" ng-required="vm.element.meta.raiseAlarm">\n          </div>\n          <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'alarmSeverity\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.alarmSeverity)}}">\n            <label for="alarmSeverity" translate>\n              Alarm severity\n            </label>\n            <div class="c8y-select-wrapper">\n              <select class="form-control" id="alarmSeverity" name="alarmSeverity" ng-model="vm.element.alarmMapping.severity" ng-options="(severity | translate) for severity in vm.alarmSeverities" ng-required="vm.element.meta.raiseAlarm">\n                <option ng-if="vm.element.meta.raiseAlarm && !vm.element.alarmMapping.severity" value="" translate>\n                  Select (required)\n                </option>\n              </select>\n              <span></span>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div ng-if="vm.element.meta.sendEvent && vm.shouldEnableShowStatusStandardFunctionalities() && vm.shouldShowFunctionality(\'sendEvent\')">\n        <div class="row">\n          <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'eventType\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.eventType)}}">\n            <label for="eventType" translate>\n              Event type\n            </label>\n            <input class="form-control" id="eventType" name="eventType" ng-model="vm.element.eventMapping.type" placeholder="{{\'e.g.\' | translate}} c8y_LocationUpdate" ng-required="vm.element.meta.sendEvent">\n          </div>\n          <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'eventText\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.eventText)}}">\n            <label for="eventText" translate>\n              Event text\n            </label>\n            <input class="form-control" id="eventText" name="eventText" ng-model="vm.element.eventMapping.text" placeholder="{{\'e.g. Location update\' | translate}}" ng-required="vm.element.meta.sendEvent">\n          </div>\n        </div>\n        <div class="row" ng-if="vm.features.functionalities.sendEvent.fragmentType || vm.features.functionalities.sendEvent.innerType">\n          <div ng-if="vm.features.functionalities.sendEvent.fragmentType" class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'eventFragmentType\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.eventFragmentType)}}">\n            <label for="eventFragmentType" translate>\n              Event fragment\n            </label>\n            <input class="form-control" id="eventFragmentType" name="eventFragmentType" ng-model="vm.element.eventMapping.fragmentType">\n          </div>\n          <div ng-if="vm.features.functionalities.sendEvent.innerType" class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'eventInnerType\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.eventInnerType)}}">\n            <label for="eventInnerType">\n              <span translate>Event property</span>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'Property nested inside the fragment\' | translate}}">\n              </i>\n            </label>\n            <input class="form-control" id="eventInnerType" name="eventInnerType" ng-model="vm.element.eventMapping.innerType">\n          </div>\n        </div>\n      </div>\n      <div ng-if="vm.element.meta.sendManagedObjectUpdate">\n        <div class="row">\n          <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'managedObjectFragmentType\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.managedObjectFragmentType)}}">\n            <label for="managedObjectFragmentType" translate>\n              Managed object fragment\n            </label>\n            <input class="form-control" id="managedObjectFragmentType" name="managedObjectFragmentType" ng-model="vm.element.managedObjectMapping.fragmentType" placeholder="{{\'e.g.\' | translate}} c8y_Position" ng-required="vm.element.meta.sendManagedObjectUpdate">\n          </div>\n          <div class="form-group col-lg-6" ng-class="{\'has-error\': vm.invalid(\'managedObjectInnerType\')}" uib-tooltip="{{vm.validationHints(vm.elementForm.managedObjectInnerType)}}">\n            <label for="managedObjectInnerType">\n              <span translate>Managed object property</span>\n              <i c8y-icon="question-circle" uib-tooltip="{{\'Property nested inside the fragment\' | translate}}">\n              </i>\n            </label>\n            <input class="form-control" id="managedObjectInnerType" name="managedObjectInnerType" ng-model="vm.element.managedObjectMapping.innerType">\n          </div>\n        </div>\n      </div>\n    </fieldset>\n  </form>\n</div>\n<div class="modal-footer">\n  <button class="btn btn-primary" ng-disabled="vm.elementForm.$invalid" ng-click="vm.save()" translate>\n    OK\n  </button>\n  <button class="btn btn-default" ng-click="vm.dismiss()" translate>\n    Close\n  </button>\n</div>\n',
e.put("deviceDatabase4/modals/configure-register.html",t),e.put("core_deviceDatabase4/modals/configure-register.html",t),e.put("/apps/core/deviceDatabase4/modals/configure-register.html",t),t='<div class="modal-header text-center bg-primary">\n  <div style="font-size: 62px">\n    <i c8y-icon="hdd-o"></i>\n  </div>\n  <h4 class="text-uppercase" translate>Import device type</h4>\n</div>\n\n<div class="modal-inner-scroll" style="max-height:calc(100vh - 335px)">\n  <div class="modal-body"> \n    <div class="legend form-block" style="margin-top:0">\n      <span class="dot bg-primary-light dot-30">1</span><strong translate>Choose device type</strong>\n    </div>\n    \n    <div class="form-group">\n      <label translate>Select from predefined</label>\n      <ui-select ng-model="vm.selectedPredefined" on-select="vm.onPredefinedDeviceTypeInfoSelected($model)" uis-open-close="onOpenClose(isOpen)">\n        <ui-select-match placeholder="{{\'Select device type\' | translate}}">\n          {{($select.selected.nameDisplay || $select.selected.name) | translate}}\n        </ui-select-match>\n        <ui-select-choices position="down" repeat="deviceTypeInfo in vm.predefinedDeviceTypeInfos | filter:vm.deviceTypesFilter.text">\n          <div>\n            <a class="btn btn-primary btn-xs showOnHover pull-right" uib-tooltip="{{\'Download\' | translate}}" tooltip-append-to-body="true" download="{{vm.downloadFileName(deviceTypeInfo)}}" ng-href="data:application/json;base64,{{vm.downloadFileHref(deviceTypeInfo)}}">\n              <i c8y-icon="download"></i>\n            </a>\n            <span class="list-group-item-heading">\n              <span>{{deviceTypeInfo.name}}</span>\n              <small ng-if="deviceTypeInfo.category" class="text-muted">\n                {{deviceTypeInfo.category}}\n              </small>\n            </span>\n            <span class="list-group-item-text">\n              <small class="text-muted">\n                {{deviceTypeInfo.description}}\n              </small>\n            </span>\n          </div>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n    \n    <label translate>Or load it from file</label>\n    <div class="input-group" ng-file-select="vm.onCustomDeviceTypeFileSelected($files)">\n      <input class="form-control" ng-model="vm.selection.custom.file.name" placeholder="{{\'Choose file to upload\' | translate}}&hellip;" readonly="readonly">\n      <span class="input-group-btn">\n        <button class="btn btn-default">\n          <span><i c8y-icon="ellipsis-h"></i></span>\n        </button>\n      </span>\n    </div>\n    <c8y-feedback-panel feedback="vm.customDeviceTypeFeedback"></c8y-feedback-panel>\n  </div>\n\n  <div class="modal-body bg-gray-white">\n    <div class="legend from-block" style="margin-top:0">\n      <span class="dot bg-primary-light dot-30">2</span><strong translate>Save with the following name</strong>\n    </div>\n    <form name="vm.importForm">\n      <div class="form-group" ng-class="{\'has-error\': vm.importForm.name.$dirty && vm.importForm.name.$invalid}">\n        <label translate>Name</label>\n        <input class="form-control" id="name" name="name" ng-model="vm.selection.newName.value" placeholder="{{\'New device type name\' | translate}}" ng-change="vm.onNewNameEdited()" required>\n      </div>\n    </form>\n  </div>\n\n</div><!-- /.modal-inner-scroll -->\n\n\n<div class="modal-footer">\n  <button type="button" class="btn btn-default" ng-click="vm.dismiss()" translate>\n    Cancel\n  </button>\n  <button type="button" class="btn btn-primary" ng-click="vm.import(selectedDeviceType)" ng-disabled="!((vm.selection.predefined.deviceType || vm.selection.custom.deviceType) && vm.importForm.$valid)" translate>\n    Import\n  </button>\n</div>\n',e.put("deviceDatabase4/modals/import-device-type.html",t),e.put("core_deviceDatabase4/modals/import-device-type.html",t),e.put("/apps/core/deviceDatabase4/modals/import-device-type.html",t),t='<div class="modal-header">\n  <h3>{{\'Select properties\' | translate}}</h3>\n</div>\n<div class="modal-body">\n  <div class="form-group">\n    <input class="form-control" placeholder="{{\'Search property\' | translate}}" ng-model="vm.search.$">\n  </div>\n  <div class="row form-group" style="border-bottom: 1px solid #ddd; vertical-align: bottom">\n    <div class="col-lg-2">\n      <label translate>Show</label>\n    </div>\n    <div class="col-lg-4">\n      <label translate>Label</label>\n    </div>\n    <div class="col-lg-6">\n      <label translate>Property</label>\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="row property" ng-class="{\'bg-info\': vm.isParent(property)}" ng-repeat="property in vm.properties | orderBy:vm.orderByFn | filter:vm.search">\n      <div class="col-lg-2">\n        <input ng-if="!vm.isParent(property)" type="radio" name="property" ng-model="vm.selected" ng-value="property">\n      </div>\n      <div class="col-lg-4">\n        {{property.label}}\n      </div>\n      <div class="col-lg-6">\n        {{property.keyPath.join(\'.\')}}\n      </div>\n    </div>\n    <p ng-if="!vm.properties.length" class="bg-warning" style="padding: 20px" translate>\n      The selected device does not have coil status and register properties.\n    </p>\n  </div>\n</div>\n<div class="modal-footer">\n  <button class="btn btn-primary" type="button" ng-disabled="!vm.selected" ng-click="vm.close({ $value: vm.selected })">\n    {{\'Select\' | translate}}\n  </button>\n  <button class="btn btn-default" type="button" ng-click="vm.dismiss()">\n    {{\'Cancel\' | translate}}\n  </button>\n</div>\n',e.put("deviceDatabase4/modals/select-fieldbus-property.html",t),e.put("core_deviceDatabase4/modals/select-fieldbus-property.html",t),e.put("/apps/core/deviceDatabase4/modals/select-fieldbus-property.html",t)}angular.module("c8y.deviceDatabase4").run(["$templateCache",e])}();