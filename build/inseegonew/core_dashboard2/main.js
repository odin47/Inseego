/* core_dashboard2 9.12.5 2018-08-27T16:53:57+00:00 b689bea882f7+ (release/9.12.0) tip */
!function(e){if("function"==typeof define&&define.amd)define(["jquery","lodash","jquery-ui/data","jquery-ui/disable-selection","jquery-ui/focusable","jquery-ui/form","jquery-ui/ie","jquery-ui/keycode","jquery-ui/labels","jquery-ui/jquery-1-7","jquery-ui/plugin","jquery-ui/safe-active-element","jquery-ui/safe-blur","jquery-ui/scroll-parent","jquery-ui/tabbable","jquery-ui/unique-id","jquery-ui/version","jquery-ui/widget","jquery-ui/widgets/mouse","jquery-ui/widgets/draggable","jquery-ui/widgets/droppable","jquery-ui/widgets/resizable"],e);else if("undefined"!=typeof exports){try{jQuery=require("jquery")}catch(e){}try{_=require("lodash")}catch(e){}e(jQuery,_)}else e(jQuery,_)}(function(e,t){var n=window,i=function(e,t,n){var i=function(){return console.warn("gridstack.js: Function `"+t+"` is deprecated as of v0.2.5 and has been replaced with `"+n+"`. It will be **completely** removed in v1.0."),e.apply(this,arguments)};return i.prototype=e.prototype,i},a=function(e,t){console.warn("gridstack.js: Option `"+e+"` is deprecated as of v0.2.5 and has been replaced with `"+t+"`. It will be **completely** removed in v1.0.")},o={isIntercepted:function(e,t){return!(e.x+e.width<=t.x||t.x+t.width<=e.x||e.y+e.height<=t.y||t.y+t.height<=e.y)},sort:function(e,n,i){return i=i||t.chain(e).map(function(e){return e.x+e.width}).max().value(),n=n!=-1?1:-1,t.sortBy(e,function(e){return n*(e.x+e.y*i)})},createStylesheet:function(e){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.setAttribute("data-gs-style-id",e),t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(t),t.sheet},removeStylesheet:function(t){e("STYLE[data-gs-style-id="+t+"]").remove()},insertCSSRule:function(e,t,n,i){"function"==typeof e.insertRule?e.insertRule(t+"{"+n+"}",i):"function"==typeof e.addRule&&e.addRule(t,n,i)},toBool:function(e){return"boolean"==typeof e?e:"string"==typeof e?(e=e.toLowerCase(),!(""===e||"no"==e||"false"==e||"0"==e)):Boolean(e)},_collisionNodeCheck:function(e){return e!=this.node&&o.isIntercepted(e,this.nn)},_didCollide:function(e){return o.isIntercepted({x:this.n.x,y:this.newY,width:this.n.width,height:this.n.height},e)},_isAddNodeIntercepted:function(e){return o.isIntercepted({x:this.x,y:this.y,width:this.node.width,height:this.node.height},e)},parseHeight:function(e){var n=e,i="px";if(n&&t.isString(n)){var a=n.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw)?$/);if(!a)throw new Error("Invalid height");i=a[2]||"px",n=parseFloat(a[1])}return{height:n,unit:i}}};o.is_intercepted=i(o.isIntercepted,"is_intercepted","isIntercepted"),o.create_stylesheet=i(o.createStylesheet,"create_stylesheet","createStylesheet"),o.remove_stylesheet=i(o.removeStylesheet,"remove_stylesheet","removeStylesheet"),o.insert_css_rule=i(o.insertCSSRule,"insert_css_rule","insertCSSRule");var r=0,s=function(e,t,n,i,a){this.width=e,this.float=n||!1,this.height=i||0,this.nodes=a||[],this.onchange=t||function(){},this._updateCounter=0,this._float=this.float,this._addedNodes=[],this._removedNodes=[]};s.prototype.batchUpdate=function(){this._updateCounter=1,this.float=!0},s.prototype.commit=function(){0!==this._updateCounter&&(this._updateCounter=0,this.float=this._float,this._packNodes(),this._notify())},s.prototype.getNodeDataByDOMEl=function(e){return t.find(this.nodes,function(t){return e.get(0)===t.el.get(0)})},s.prototype._fixCollisions=function(e){this._sortNodes(-1);var n=e,i=Boolean(t.find(this.nodes,function(e){return e.locked}));for(this.float||i||(n={x:0,y:e.y,width:this.width,height:e.height});;){var a=t.find(this.nodes,t.bind(o._collisionNodeCheck,{node:e,nn:n}));if("undefined"==typeof a)return;this.moveNode(a,a.x,e.y+e.height,a.width,a.height,!0)}},s.prototype.isAreaEmpty=function(e,n,i,a){var r={x:e||0,y:n||0,width:i||1,height:a||1},s=t.find(this.nodes,t.bind(function(e){return o.isIntercepted(e,r)},this));return null===s||"undefined"==typeof s},s.prototype._sortNodes=function(e){this.nodes=o.sort(this.nodes,e,this.width)},s.prototype._packNodes=function(){this._sortNodes(),this.float?t.each(this.nodes,t.bind(function(e,n){if(!e._updating&&"undefined"!=typeof e._origY&&e.y!=e._origY)for(var i=e.y;i>=e._origY;){var a=t.chain(this.nodes).find(t.bind(o._didCollide,{n:e,newY:i})).value();a||(e._dirty=!0,e.y=i),--i}},this)):t.each(this.nodes,t.bind(function(e,n){if(!e.locked)for(;e.y>0;){var i=e.y-1,a=0===n;if(n>0){var r=t.chain(this.nodes).take(n).find(t.bind(o._didCollide,{n:e,newY:i})).value();a="undefined"==typeof r}if(!a)break;e._dirty=e.y!=i,e.y=i}},this))},s.prototype._prepareNode=function(e,n){return e=t.defaults(e||{},{width:1,height:1,x:0,y:0}),e.x=parseInt(""+e.x),e.y=parseInt(""+e.y),e.width=parseInt(""+e.width),e.height=parseInt(""+e.height),e.autoPosition=e.autoPosition||!1,e.noResize=e.noResize||!1,e.noMove=e.noMove||!1,e.width>this.width?e.width=this.width:e.width<1&&(e.width=1),e.height<1&&(e.height=1),e.x<0&&(e.x=0),e.x+e.width>this.width&&(n?e.width=this.width-e.x:e.x=this.width-e.width),e.y<0&&(e.y=0),e},s.prototype._notify=function(){var e=Array.prototype.slice.call(arguments,0);if(e[0]="undefined"==typeof e[0]?[]:[e[0]],e[1]="undefined"==typeof e[1]||e[1],!this._updateCounter){var t=e[0].concat(this.getDirtyNodes());this.onchange(t,e[1])}},s.prototype.cleanNodes=function(){this._updateCounter||t.each(this.nodes,function(e){e._dirty=!1})},s.prototype.getDirtyNodes=function(){return t.filter(this.nodes,function(e){return e._dirty})},s.prototype.addNode=function(e,n){if(e=this._prepareNode(e),"undefined"!=typeof e.maxWidth&&(e.width=Math.min(e.width,e.maxWidth)),"undefined"!=typeof e.maxHeight&&(e.height=Math.min(e.height,e.maxHeight)),"undefined"!=typeof e.minWidth&&(e.width=Math.max(e.width,e.minWidth)),"undefined"!=typeof e.minHeight&&(e.height=Math.max(e.height,e.minHeight)),e._id=++r,e._dirty=!0,e.autoPosition){this._sortNodes();for(var i=0;;++i){var a=i%this.width,s=Math.floor(i/this.width);if(!(a+e.width>this.width||t.find(this.nodes,t.bind(o._isAddNodeIntercepted,{x:a,y:s,node:e})))){e.x=a,e.y=s;break}}}return this.nodes.push(e),"undefined"!=typeof n&&n&&this._addedNodes.push(t.clone(e)),this._fixCollisions(e),this._packNodes(),this._notify(),e},s.prototype.removeNode=function(e,n){n="undefined"==typeof n||n,this._removedNodes.push(t.clone(e)),e._id=null,this.nodes=t.without(this.nodes,e),this._packNodes(),this._notify(e,n)},s.prototype.canMoveNode=function(n,i,a,o,r){var d=Boolean(t.find(this.nodes,function(e){return e.locked}));if(!this.height&&!d)return!0;var l,c=new s(this.width,null,this.float,0,t.map(this.nodes,function(t){return t==n?l=e.extend({},t):e.extend({},t)}));if("undefined"==typeof l)return!0;c.moveNode(l,i,a,o,r);var h=!0;return d&&(h&=!Boolean(t.find(c.nodes,function(e){return e!=l&&Boolean(e.locked)&&Boolean(e._dirty)}))),this.height&&(h&=c.getGridHeight()<=this.height),h},s.prototype.canBePlacedWithRespectToHeight=function(n){if(!this.height)return!0;var i=new s(this.width,null,this.float,0,t.map(this.nodes,function(t){return e.extend({},t)}));return i.addNode(n),i.getGridHeight()<=this.height},s.prototype.moveNode=function(e,t,n,i,a,o){if("number"!=typeof t&&(t=e.x),"number"!=typeof n&&(n=e.y),"number"!=typeof i&&(i=e.width),"number"!=typeof a&&(a=e.height),"undefined"!=typeof e.maxWidth&&(i=Math.min(i,e.maxWidth)),"undefined"!=typeof e.maxHeight&&(a=Math.min(a,e.maxHeight)),"undefined"!=typeof e.minWidth&&(i=Math.max(i,e.minWidth)),"undefined"!=typeof e.minHeight&&(a=Math.max(a,e.minHeight)),e.x==t&&e.y==n&&e.width==i&&e.height==a)return e;var r=e.width!=i;return e._dirty=!0,e.x=t,e.y=n,e.width=i,e.height=a,e=this._prepareNode(e,r),this._fixCollisions(e),o||(this._packNodes(),this._notify()),e},s.prototype.getGridHeight=function(){return t.reduce(this.nodes,function(e,t){return Math.max(e,t.y+t.height)},0)},s.prototype.beginUpdate=function(e){t.each(this.nodes,function(e){e._origY=e.y}),e._updating=!0},s.prototype.endUpdate=function(){t.each(this.nodes,function(e){e._origY=e.y});var e=t.find(this.nodes,function(e){return e._updating});e&&(e._updating=!1)};var d=function(n,i){var o,r,d=this;i=i||{},this.container=e(n),"undefined"!=typeof i.handle_class&&(i.handleClass=i.handle_class,a("handle_class","handleClass")),"undefined"!=typeof i.item_class&&(i.itemClass=i.item_class,a("item_class","itemClass")),"undefined"!=typeof i.placeholder_class&&(i.placeholderClass=i.placeholder_class,a("placeholder_class","placeholderClass")),"undefined"!=typeof i.placeholder_text&&(i.placeholderText=i.placeholder_text,a("placeholder_text","placeholderText")),"undefined"!=typeof i.cell_height&&(i.cellHeight=i.cell_height,a("cell_height","cellHeight")),"undefined"!=typeof i.vertical_margin&&(i.verticalMargin=i.vertical_margin,a("vertical_margin","verticalMargin")),"undefined"!=typeof i.min_width&&(i.minWidth=i.min_width,a("min_width","minWidth")),"undefined"!=typeof i.static_grid&&(i.staticGrid=i.static_grid,a("static_grid","staticGrid")),"undefined"!=typeof i.is_nested&&(i.isNested=i.is_nested,a("is_nested","isNested")),"undefined"!=typeof i.always_show_resize_handle&&(i.alwaysShowResizeHandle=i.always_show_resize_handle,a("always_show_resize_handle","alwaysShowResizeHandle")),i.itemClass=i.itemClass||"grid-stack-item";var l=this.container.closest("."+i.itemClass).length>0;if(this.opts=t.defaults(i||{},{width:parseInt(this.container.attr("data-gs-width"))||12,height:parseInt(this.container.attr("data-gs-height"))||0,itemClass:"grid-stack-item",placeholderClass:"grid-stack-placeholder",placeholderText:"",handle:".grid-stack-item-content",handleClass:null,cellHeight:60,verticalMargin:20,auto:!0,minWidth:768,float:!1,staticGrid:!1,_class:"grid-stack-instance-"+(1e4*Math.random()).toFixed(0),animate:Boolean(this.container.attr("data-gs-animate"))||!1,alwaysShowResizeHandle:i.alwaysShowResizeHandle||!1,resizable:t.defaults(i.resizable||{},{autoHide:!i.alwaysShowResizeHandle,handles:"se"}),draggable:t.defaults(i.draggable||{},{handle:(i.handleClass?"."+i.handleClass:i.handle?i.handle:"")||".grid-stack-item-content",scroll:!1,appendTo:"body"}),disableDrag:i.disableDrag||!1,disableResize:i.disableResize||!1,rtl:"auto",removable:!1,removeTimeout:2e3,verticalMarginUnit:"px",cellHeightUnit:"px"}),"auto"===this.opts.rtl&&(this.opts.rtl="rtl"===this.container.css("direction")),this.opts.rtl&&this.container.addClass("grid-stack-rtl"),this.opts.isNested=l,r="auto"===this.opts.cellHeight,r?d.cellHeight(d.cellWidth(),!0):this.cellHeight(this.opts.cellHeight,!0),this.verticalMargin(this.opts.verticalMargin,!0),this.container.addClass(this.opts._class),this._setStaticClass(),l&&this.container.addClass("grid-stack-nested"),this._initStyles(),this.grid=new s(this.opts.width,function(e,n){n="undefined"==typeof n||n;var i=0;t.each(e,function(e){n&&null===e._id?e.el&&e.el.remove():(e.el.attr("data-gs-x",e.x).attr("data-gs-y",e.y).attr("data-gs-width",e.width).attr("data-gs-height",e.height),i=Math.max(i,e.y+e.height))}),d._updateStyles(i+10)},this.opts.float,this.opts.height),this.opts.auto){var c=[],h=this;this.container.children("."+this.opts.itemClass+":not(."+this.opts.placeholderClass+")").each(function(t,n){n=e(n),c.push({el:n,i:parseInt(n.attr("data-gs-x"))+parseInt(n.attr("data-gs-y"))*h.opts.width})}),t.chain(c).sortBy(function(e){return e.i}).each(function(e){d._prepareElement(e.el)}).value()}if(this.setAnimation(this.opts.animate),this.placeholder=e('<div class="'+this.opts.placeholderClass+" "+this.opts.itemClass+'"><div class="placeholder-content">'+this.opts.placeholderText+"</div></div>").hide(),this._updateContainerHeight(),this._updateHeightsOnResize=t.throttle(function(){d.cellHeight(d.cellWidth(),!1)},100),this.onResizeHandler=function(){if(r&&d._updateHeightsOnResize(),d._isOneColumnMode()){if(o)return;o=!0,d.grid._sortNodes(),t.each(d.grid.nodes,function(e){d.container.append(e.el),d.opts.staticGrid||((e.noMove||d.opts.disableDrag)&&e.el.draggable("disable"),(e.noResize||d.opts.disableResize)&&e.el.resizable("disable"),e.el.trigger("resize"))})}else{if(!o)return;if(o=!1,d.opts.staticGrid)return;t.each(d.grid.nodes,function(e){e.noMove||d.opts.disableDrag||e.el.draggable("enable"),e.noResize||d.opts.disableResize||e.el.resizable("enable"),e.el.trigger("resize")})}},e(window).resize(this.onResizeHandler),this.onResizeHandler(),!d.opts.staticGrid&&"string"==typeof d.opts.removable){var p=e(d.opts.removable);p.data("droppable")||p.droppable({accept:"."+d.opts.itemClass}),p.on("dropover",function(t,n){var i=e(n.draggable),a=i.data("_gridstack_node");a._grid===d&&d._setupRemovingTimeout(i)}).on("dropout",function(t,n){var i=e(n.draggable),a=i.data("_gridstack_node");a._grid===d&&d._clearRemovingTimeout(i)})}if(!d.opts.staticGrid&&d.opts.acceptWidgets){var u=null,g=function(e,t){var n=u,i=n.data("_gridstack_node"),a=d.getCellFromPixel(t.offset,!0),o=Math.max(0,a.x),r=Math.max(0,a.y);if(i._added){if(!d.grid.canMoveNode(i,o,r))return;d.grid.moveNode(i,o,r),d._updateContainerHeight()}else i._added=!0,i.el=n,i.x=o,i.y=r,d.grid.cleanNodes(),d.grid.beginUpdate(i),d.grid.addNode(i),d.container.append(d.placeholder),d.placeholder.attr("data-gs-x",i.x).attr("data-gs-y",i.y).attr("data-gs-width",i.width).attr("data-gs-height",i.height).show(),i.el=d.placeholder,i._beforeDragX=i.x,i._beforeDragY=i.y,d._updateContainerHeight()};e(d.container).droppable({accept:function(t){t=e(t);var n=t.data("_gridstack_node");return(!n||n._grid!==d)&&t.is(d.opts.acceptWidgets===!0?".grid-stack-item":d.opts.acceptWidgets)},over:function(t,n){var i=(d.container.offset(),e(n.draggable)),a=d.cellWidth(),o=d.cellHeight(),r=i.data("_gridstack_node"),s=r?r.width:Math.ceil(i.outerWidth()/a),l=r?r.height:Math.ceil(i.outerHeight()/o);u=i;var c=d.grid._prepareNode({width:s,height:l,_added:!1,_temporary:!0});i.data("_gridstack_node",c),i.data("_gridstack_node_orig",r),i.on("drag",g)},out:function(t,n){var i=e(n.draggable);i.unbind("drag",g);var a=i.data("_gridstack_node");a.el=null,d.grid.removeNode(a),d.placeholder.detach(),d._updateContainerHeight(),i.data("_gridstack_node",i.data("_gridstack_node_orig"))},drop:function(t,n){d.placeholder.detach();var i=e(n.draggable).data("_gridstack_node");i._grid=d;var a=e(n.draggable).clone(!1);a.data("_gridstack_node",i),e(n.draggable).remove(),i.el=a,d.placeholder.hide(),a.attr("data-gs-x",i.x).attr("data-gs-y",i.y).attr("data-gs-width",i.width).attr("data-gs-height",i.height).addClass(d.opts.itemClass).removeAttr("style").enableSelection().removeData("draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled").unbind("drag",g),d.container.append(a),d._prepareElementsByNode(a,i),d._updateContainerHeight(),d._triggerChangeEvent(),d.grid.endUpdate()}})}};return d.prototype._triggerChangeEvent=function(e){var t=this.grid.getDirtyNodes(),n=!1,i=[];t&&t.length&&(i.push(t),n=!0),(n||e===!0)&&this.container.trigger("change",i)},d.prototype._triggerAddEvent=function(){this.grid._addedNodes&&this.grid._addedNodes.length>0&&(this.container.trigger("added",[t.map(this.grid._addedNodes,t.clone)]),this.grid._addedNodes=[])},d.prototype._triggerRemoveEvent=function(){this.grid._removedNodes&&this.grid._removedNodes.length>0&&(this.container.trigger("removed",[t.map(this.grid._removedNodes,t.clone)]),this.grid._removedNodes=[])},d.prototype._initStyles=function(){this._stylesId&&o.removeStylesheet(this._stylesId),this._stylesId="gridstack-style-"+(1e5*Math.random()).toFixed(),this._styles=o.createStylesheet(this._stylesId),null!==this._styles&&(this._styles._max=0)},d.prototype._updateStyles=function(e){if(null!==this._styles&&"undefined"!=typeof this._styles){var t,n="."+this.opts._class+" ."+this.opts.itemClass,i=this;if("undefined"==typeof e&&(e=this._styles._max,this._initStyles(),this._updateContainerHeight()),this.opts.cellHeight&&!(0!==this._styles._max&&e<=this._styles._max)&&(t=this.opts.verticalMargin&&this.opts.cellHeightUnit!==this.opts.verticalMarginUnit?function(e,t){return e&&t?"calc("+(i.opts.cellHeight*e+i.opts.cellHeightUnit)+" + "+(i.opts.verticalMargin*t+i.opts.verticalMarginUnit)+")":i.opts.cellHeight*e+i.opts.verticalMargin*t+i.opts.cellHeightUnit}:function(e,t){return i.opts.cellHeight*e+i.opts.verticalMargin*t+i.opts.cellHeightUnit},0===this._styles._max&&o.insertCSSRule(this._styles,n,"min-height: "+t(1,0)+";",0),e>this._styles._max)){for(var a=this._styles._max;a<e;++a)o.insertCSSRule(this._styles,n+'[data-gs-height="'+(a+1)+'"]',"height: "+t(a+1,a)+";",a),o.insertCSSRule(this._styles,n+'[data-gs-min-height="'+(a+1)+'"]',"min-height: "+t(a+1,a)+";",a),o.insertCSSRule(this._styles,n+'[data-gs-max-height="'+(a+1)+'"]',"max-height: "+t(a+1,a)+";",a),o.insertCSSRule(this._styles,n+'[data-gs-y="'+a+'"]',"top: "+t(a,a)+";",a);this._styles._max=e}}},d.prototype._updateContainerHeight=function(){if(!this.grid._updateCounter){var e=this.grid.getGridHeight();this.container.attr("data-gs-current-height",e),this.opts.cellHeight&&(this.opts.verticalMargin?this.opts.cellHeightUnit===this.opts.verticalMarginUnit?this.container.css("height",e*(this.opts.cellHeight+this.opts.verticalMargin)-this.opts.verticalMargin+this.opts.cellHeightUnit):this.container.css("height","calc("+(e*this.opts.cellHeight+this.opts.cellHeightUnit)+" + "+(e*(this.opts.verticalMargin-1)+this.opts.verticalMarginUnit)+")"):this.container.css("height",e*this.opts.cellHeight+this.opts.cellHeightUnit))}},d.prototype._isOneColumnMode=function(){return(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=this.opts.minWidth},d.prototype._setupRemovingTimeout=function(t){var n=this,i=e(t).data("_gridstack_node");!i._removeTimeout&&n.opts.removable&&(i._removeTimeout=setTimeout(function(){t.addClass("grid-stack-item-removing"),i._isAboutToRemove=!0},n.opts.removeTimeout))},d.prototype._clearRemovingTimeout=function(t){var n=e(t).data("_gridstack_node");n._removeTimeout&&(clearTimeout(n._removeTimeout),n._removeTimeout=null,t.removeClass("grid-stack-item-removing"),n._isAboutToRemove=!1)},d.prototype._prepareElementsByNode=function(n,i){if("undefined"!=typeof e.ui){var a,o,r=this,s=function(e,t){var s,d,l=Math.round(t.position.left/a),c=Math.floor((t.position.top+o/2)/o);if("drag"!=e.type&&(s=Math.round(t.size.width/a),d=Math.round(t.size.height/o)),"drag"==e.type)l<0||l>=r.grid.width||c<0?(r.opts.removable===!0&&r._setupRemovingTimeout(n),l=i._beforeDragX,c=i._beforeDragY,r.placeholder.detach(),r.placeholder.hide(),r.grid.removeNode(i),r._updateContainerHeight(),i._temporaryRemoved=!0):(r._clearRemovingTimeout(n),i._temporaryRemoved&&(r.grid.addNode(i),r.placeholder.attr("data-gs-x",l).attr("data-gs-y",c).attr("data-gs-width",s).attr("data-gs-height",d).show(),r.container.append(r.placeholder),i.el=r.placeholder,i._temporaryRemoved=!1));else if("resize"==e.type&&l<0)return;r.grid.canMoveNode(i,l,c,s,d)&&(r.grid.moveNode(i,l,c,s,d),r._updateContainerHeight())},d=function(t,s){r.container.append(r.placeholder);var d=e(this);r.grid.cleanNodes(),r.grid.beginUpdate(i),a=r.cellWidth();var l=Math.ceil(d.outerHeight()/d.attr("data-gs-height"));o=r.container.height()/parseInt(r.container.attr("data-gs-current-height")),r.placeholder.attr("data-gs-x",d.attr("data-gs-x")).attr("data-gs-y",d.attr("data-gs-y")).attr("data-gs-width",d.attr("data-gs-width")).attr("data-gs-height",d.attr("data-gs-height")).show(),i.el=r.placeholder,i._beforeDragX=i.x,i._beforeDragY=i.y,n.resizable("option","minWidth",a*(i.minWidth||1)),n.resizable("option","minHeight",l*(i.minHeight||1)),"resizestart"==t.type&&d.find(".grid-stack-item").trigger("resizestart")},l=function(t,a){var o=e(this);if(o.data("_gridstack_node")){var s=!1;r.placeholder.detach(),i.el=o,r.placeholder.hide(),i._isAboutToRemove?(s=!0,n.removeData("_gridstack_node"),n.remove()):(r._clearRemovingTimeout(n),i._temporaryRemoved?(o.attr("data-gs-x",i._beforeDragX).attr("data-gs-y",i._beforeDragY).attr("data-gs-width",i.width).attr("data-gs-height",i.height).removeAttr("style"),i.x=i._beforeDragX,i.y=i._beforeDragY,r.grid.addNode(i)):o.attr("data-gs-x",i.x).attr("data-gs-y",i.y).attr("data-gs-width",i.width).attr("data-gs-height",i.height).removeAttr("style")),r._updateContainerHeight(),r._triggerChangeEvent(s),r.grid.endUpdate();var d=o.find(".grid-stack");d.length&&"resizestop"==t.type&&(d.each(function(t,n){e(n).data("gridstack").onResizeHandler()}),o.find(".grid-stack-item").trigger("resizestop"))}};n.draggable(t.extend({},this.opts.draggable,{containment:this.opts.isNested?this.container.parent():null,start:d,stop:l,drag:s})).resizable(t.extend({},this.opts.resizable,{start:d,stop:l,resize:s})),(i.noMove||this._isOneColumnMode()||this.opts.disableDrag)&&n.draggable("disable"),(i.noResize||this._isOneColumnMode()||this.opts.disableResize)&&n.resizable("disable"),n.attr("data-gs-locked",i.locked?"yes":null)}},d.prototype._prepareElement=function(t,n){n="undefined"!=typeof n&&n;var i=this;t=e(t),t.addClass(this.opts.itemClass);var a=i.grid.addNode({x:t.attr("data-gs-x"),y:t.attr("data-gs-y"),width:t.attr("data-gs-width"),height:t.attr("data-gs-height"),maxWidth:t.attr("data-gs-max-width"),minWidth:t.attr("data-gs-min-width"),maxHeight:t.attr("data-gs-max-height"),minHeight:t.attr("data-gs-min-height"),autoPosition:o.toBool(t.attr("data-gs-auto-position")),noResize:o.toBool(t.attr("data-gs-no-resize")),noMove:o.toBool(t.attr("data-gs-no-move")),locked:o.toBool(t.attr("data-gs-locked")),el:t,id:t.attr("data-gs-id"),_grid:i},n);t.data("_gridstack_node",a),this._prepareElementsByNode(t,a)},d.prototype.setAnimation=function(e){e?this.container.addClass("grid-stack-animate"):this.container.removeClass("grid-stack-animate")},d.prototype.addWidget=function(t,n,i,a,o,r,s,d,l,c,h){return t=e(t),"undefined"!=typeof n&&t.attr("data-gs-x",n),"undefined"!=typeof i&&t.attr("data-gs-y",i),"undefined"!=typeof a&&t.attr("data-gs-width",a),"undefined"!=typeof o&&t.attr("data-gs-height",o),"undefined"!=typeof r&&t.attr("data-gs-auto-position",r?"yes":null),"undefined"!=typeof s&&t.attr("data-gs-min-width",s),"undefined"!=typeof d&&t.attr("data-gs-max-width",d),"undefined"!=typeof l&&t.attr("data-gs-min-height",l),"undefined"!=typeof c&&t.attr("data-gs-max-height",c),"undefined"!=typeof h&&t.attr("data-gs-id",h),this.container.append(t),this._prepareElement(t,!0),this._triggerAddEvent(),this._updateContainerHeight(),this._triggerChangeEvent(!0),t},d.prototype.makeWidget=function(t){return t=e(t),this._prepareElement(t,!0),this._triggerAddEvent(),this._updateContainerHeight(),this._triggerChangeEvent(!0),t},d.prototype.willItFit=function(e,t,n,i,a){var o={x:e,y:t,width:n,height:i,autoPosition:a};return this.grid.canBePlacedWithRespectToHeight(o)},d.prototype.removeWidget=function(t,n){n="undefined"==typeof n||n,t=e(t);var i=t.data("_gridstack_node");i||(i=this.grid.getNodeDataByDOMEl(t)),this.grid.removeNode(i,n),t.removeData("_gridstack_node"),this._updateContainerHeight(),n&&t.remove(),this._triggerChangeEvent(!0),this._triggerRemoveEvent()},d.prototype.removeAll=function(e){t.each(this.grid.nodes,t.bind(function(t){this.removeWidget(t.el,e)},this)),this.grid.nodes=[],this._updateContainerHeight()},d.prototype.destroy=function(t){e(window).off("resize",this.onResizeHandler),this.disable(),"undefined"==typeof t||t?this.container.remove():(this.removeAll(!1),this.container.removeData("gridstack")),o.removeStylesheet(this._stylesId),this.grid&&(this.grid=null)},d.prototype.resizable=function(t,n){var i=this;return t=e(t),t.each(function(t,a){a=e(a);var o=a.data("_gridstack_node");"undefined"!=typeof o&&null!==o&&"undefined"!=typeof e.ui&&(o.noResize=!n,o.noResize||i._isOneColumnMode()?a.resizable("disable"):a.resizable("enable"))}),this},d.prototype.movable=function(t,n){var i=this;return t=e(t),t.each(function(t,a){a=e(a);var o=a.data("_gridstack_node");"undefined"!=typeof o&&null!==o&&"undefined"!=typeof e.ui&&(o.noMove=!n,o.noMove||i._isOneColumnMode()?(a.draggable("disable"),a.removeClass("ui-draggable-handle")):(a.draggable("enable"),a.addClass("ui-draggable-handle")))}),this},d.prototype.enableMove=function(e,t){this.movable(this.container.children("."+this.opts.itemClass),e),t&&(this.opts.disableDrag=!e)},d.prototype.enableResize=function(e,t){this.resizable(this.container.children("."+this.opts.itemClass),e),t&&(this.opts.disableResize=!e)},d.prototype.disable=function(){this.movable(this.container.children("."+this.opts.itemClass),!1),this.resizable(this.container.children("."+this.opts.itemClass),!1),this.container.trigger("disable")},d.prototype.enable=function(){this.movable(this.container.children("."+this.opts.itemClass),!0),this.resizable(this.container.children("."+this.opts.itemClass),!0),this.container.trigger("enable")},d.prototype.locked=function(t,n){return t=e(t),t.each(function(t,i){i=e(i);var a=i.data("_gridstack_node");"undefined"!=typeof a&&null!==a&&(a.locked=n||!1,i.attr("data-gs-locked",a.locked?"yes":null))}),this},d.prototype.maxHeight=function(t,n){return t=e(t),t.each(function(t,i){i=e(i);var a=i.data("_gridstack_node");"undefined"!=typeof a&&null!==a&&(isNaN(n)||(a.maxHeight=n||!1,i.attr("data-gs-max-height",n)))}),this},d.prototype.minHeight=function(t,n){return t=e(t),t.each(function(t,i){i=e(i);var a=i.data("_gridstack_node");"undefined"!=typeof a&&null!==a&&(isNaN(n)||(a.minHeight=n||!1,i.attr("data-gs-min-height",n)))}),this},d.prototype.maxWidth=function(t,n){return t=e(t),t.each(function(t,i){i=e(i);var a=i.data("_gridstack_node");"undefined"!=typeof a&&null!==a&&(isNaN(n)||(a.maxWidth=n||!1,i.attr("data-gs-max-width",n)))}),this},d.prototype.minWidth=function(t,n){return t=e(t),t.each(function(t,i){i=e(i);var a=i.data("_gridstack_node");"undefined"!=typeof a&&null!==a&&(isNaN(n)||(a.minWidth=n||!1,i.attr("data-gs-min-width",n)))}),this},d.prototype._updateElement=function(t,n){t=e(t).first();var i=t.data("_gridstack_node");if("undefined"!=typeof i&&null!==i){var a=this;a.grid.cleanNodes(),a.grid.beginUpdate(i),n.call(this,t,i),a._updateContainerHeight(),a._triggerChangeEvent(),a.grid.endUpdate()}},d.prototype.resize=function(e,t,n){this._updateElement(e,function(e,i){t=null!==t&&"undefined"!=typeof t?t:i.width,n=null!==n&&"undefined"!=typeof n?n:i.height,this.grid.moveNode(i,i.x,i.y,t,n)})},d.prototype.move=function(e,t,n){this._updateElement(e,function(e,i){t=null!==t&&"undefined"!=typeof t?t:i.x,n=null!==n&&"undefined"!=typeof n?n:i.y,this.grid.moveNode(i,t,n,i.width,i.height)})},d.prototype.update=function(e,t,n,i,a){this._updateElement(e,function(e,o){t=null!==t&&"undefined"!=typeof t?t:o.x,n=null!==n&&"undefined"!=typeof n?n:o.y,i=null!==i&&"undefined"!=typeof i?i:o.width,a=null!==a&&"undefined"!=typeof a?a:o.height,this.grid.moveNode(o,t,n,i,a)})},d.prototype.verticalMargin=function(e,t){if("undefined"==typeof e)return this.opts.verticalMargin;var n=o.parseHeight(e);this.opts.verticalMarginUnit===n.unit&&this.opts.height===n.height||(this.opts.verticalMarginUnit=n.unit,this.opts.verticalMargin=n.height,t||this._updateStyles())},d.prototype.cellHeight=function(e,t){if("undefined"==typeof e){if(this.opts.cellHeight)return this.opts.cellHeight;var n=this.container.children("."+this.opts.itemClass).first();return Math.ceil(n.outerHeight()/n.attr("data-gs-height"))}var i=o.parseHeight(e);this.opts.cellHeightUnit===i.heightUnit&&this.opts.height===i.height||(this.opts.cellHeightUnit=i.unit,this.opts.cellHeight=i.height,t||this._updateStyles())},d.prototype.cellWidth=function(){return Math.round(this.container.outerWidth()/this.opts.width)},d.prototype.getCellFromPixel=function(e,t){var n="undefined"!=typeof t&&t?this.container.offset():this.container.position(),i=e.left-n.left,a=e.top-n.top,o=Math.floor(this.container.width()/this.opts.width),r=Math.floor(this.container.height()/parseInt(this.container.attr("data-gs-current-height")));return{x:Math.floor(i/o),y:Math.floor(a/r)}},d.prototype.batchUpdate=function(){this.grid.batchUpdate()},d.prototype.commit=function(){this.grid.commit(),this._updateContainerHeight()},d.prototype.isAreaEmpty=function(e,t,n,i){return this.grid.isAreaEmpty(e,t,n,i)},d.prototype.setStatic=function(e){this.opts.staticGrid=e===!0,this.enableMove(!e),this.enableResize(!e),this._setStaticClass()},d.prototype._setStaticClass=function(){var e="grid-stack-static";this.opts.staticGrid===!0?this.container.addClass(e):this.container.removeClass(e)},d.prototype._updateNodeWidths=function(e,t){this.grid._sortNodes(),this.grid.batchUpdate();for(var n={},i=0;i<this.grid.nodes.length;i++)n=this.grid.nodes[i],this.update(n.el,Math.round(n.x*t/e),void 0,Math.round(n.width*t/e),void 0);this.grid.commit()},d.prototype.setGridWidth=function(e,t){this.container.removeClass("grid-stack-"+this.opts.width),t!==!0&&this._updateNodeWidths(this.opts.width,e),this.opts.width=e,this.grid.width=e,this.container.addClass("grid-stack-"+e)},s.prototype.batch_update=i(s.prototype.batchUpdate),s.prototype._fix_collisions=i(s.prototype._fixCollisions,"_fix_collisions","_fixCollisions"),s.prototype.is_area_empty=i(s.prototype.isAreaEmpty,"is_area_empty","isAreaEmpty"),s.prototype._sort_nodes=i(s.prototype._sortNodes,"_sort_nodes","_sortNodes"),s.prototype._pack_nodes=i(s.prototype._packNodes,"_pack_nodes","_packNodes"),s.prototype._prepare_node=i(s.prototype._prepareNode,"_prepare_node","_prepareNode"),s.prototype.clean_nodes=i(s.prototype.cleanNodes,"clean_nodes","cleanNodes"),s.prototype.get_dirty_nodes=i(s.prototype.getDirtyNodes,"get_dirty_nodes","getDirtyNodes"),s.prototype.add_node=i(s.prototype.addNode,"add_node","addNode, "),s.prototype.remove_node=i(s.prototype.removeNode,"remove_node","removeNode"),s.prototype.can_move_node=i(s.prototype.canMoveNode,"can_move_node","canMoveNode"),s.prototype.move_node=i(s.prototype.moveNode,"move_node","moveNode"),s.prototype.get_grid_height=i(s.prototype.getGridHeight,"get_grid_height","getGridHeight"),s.prototype.begin_update=i(s.prototype.beginUpdate,"begin_update","beginUpdate"),s.prototype.end_update=i(s.prototype.endUpdate,"end_update","endUpdate"),s.prototype.can_be_placed_with_respect_to_height=i(s.prototype.canBePlacedWithRespectToHeight,"can_be_placed_with_respect_to_height","canBePlacedWithRespectToHeight"),d.prototype._trigger_change_event=i(d.prototype._triggerChangeEvent,"_trigger_change_event","_triggerChangeEvent"),d.prototype._init_styles=i(d.prototype._initStyles,"_init_styles","_initStyles"),d.prototype._update_styles=i(d.prototype._updateStyles,"_update_styles","_updateStyles"),d.prototype._update_container_height=i(d.prototype._updateContainerHeight,"_update_container_height","_updateContainerHeight"),d.prototype._is_one_column_mode=i(d.prototype._isOneColumnMode,"_is_one_column_mode","_isOneColumnMode"),d.prototype._prepare_element=i(d.prototype._prepareElement,"_prepare_element","_prepareElement"),d.prototype.set_animation=i(d.prototype.setAnimation,"set_animation","setAnimation"),d.prototype.add_widget=i(d.prototype.addWidget,"add_widget","addWidget"),d.prototype.make_widget=i(d.prototype.makeWidget,"make_widget","makeWidget"),d.prototype.will_it_fit=i(d.prototype.willItFit,"will_it_fit","willItFit"),d.prototype.remove_widget=i(d.prototype.removeWidget,"remove_widget","removeWidget"),d.prototype.remove_all=i(d.prototype.removeAll,"remove_all","removeAll"),d.prototype.min_height=i(d.prototype.minHeight,"min_height","minHeight"),d.prototype.min_width=i(d.prototype.minWidth,"min_width","minWidth"),d.prototype._update_element=i(d.prototype._updateElement,"_update_element","_updateElement"),d.prototype.cell_height=i(d.prototype.cellHeight,"cell_height","cellHeight"),d.prototype.cell_width=i(d.prototype.cellWidth,"cell_width","cellWidth"),d.prototype.get_cell_from_pixel=i(d.prototype.getCellFromPixel,"get_cell_from_pixel","getCellFromPixel"),d.prototype.batch_update=i(d.prototype.batchUpdate,"batch_update","batchUpdate"),d.prototype.is_area_empty=i(d.prototype.isAreaEmpty,"is_area_empty","isAreaEmpty"),d.prototype.set_static=i(d.prototype.setStatic,"set_static","setStatic"),
d.prototype._set_static_class=i(d.prototype._setStaticClass,"_set_static_class","_setStaticClass"),n.GridStackUI=d,n.GridStackUI.Utils=o,n.GridStackUI.Engine=s,e.fn.gridstack=function(t){return this.each(function(){var n=e(this);n.data("gridstack")||n.data("gridstack",new d(this,t))})},n.GridStackUI}),function(){"use strict";angular.module("c8y.parts.dashboard2",[])}();var _slicedToArray=function(){function e(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){"use strict";function e(t,n,i,a,o,r,s,d,l,c,h,p,u,g,m,f){function b(e){return _.map(e,function(e){return _.assign(_.get(e,De,{}),{id:e.id})})}function v(e){var t=e||{},n=_.assign(_.get(t,De,{}),{id:t.id},x(t));return _.set(n,"global",!!_.get(t,"c8y_Global")),A(n).then(y)}function y(e){return e.children?w(e.children).then(function(t){return e.children=t,e}):e}function C(e,t,n){var i=_.cloneDeep(e),a=_.find(t,function(e){var t=e.name&&e.name===i.name,n=e.templateUrl&&e.templateUrl===i.templateUrl;return t||n});if(a){var o=a,s=o.replaceWith;return s&&(i.config=r.invoke(s.config,void 0,{oldConfig:i.config}),a=_.find(t,{name:s.component})),i.name=a.name,a.transformConfigWithContext&&(i.componentTransformConfigWithContext=a.transformConfigWithContext),a.widgetComponent?(i.widgetComponent=a.widgetComponent,delete i.templateUrl):i.templateUrl=a.templateUrl,a.configComponent?(i.configComponent=a.configComponent,delete i.configTemplateUrl):i.configTemplateUrl=a.configTemplateUrl,i}return n?null:i}function w(e){return c.list().then(function(t){return _(e).mapValues(function(e){return C(e,t,!1)}).value()})}function x(e){var t=/^c8y_Dashboard!(.+)$/;return _.pickBy(e,function(e,n){return t.test(n)})}function k(e){var t={icon:e.icon||"th",name:e.name||g.getString("Dashboard")},n=D(e),i=s.getPluginService("c8yReports");if(n){var a=Se[n];a&&(t.icon=a.icon||t.icon,t.name=a.name||t.name)}return"report"===n&&i&&(t=i.getReportFromDashboard(e).then(function(e){return _.pick(e,["icon","name"])})),o.resolve(t)}function D(e){var t=/^c8y_Dashboard!name!(.+?)[-_].+$/,n=_.pickBy(e,function(e,n){return t.test(n)}),i=_.keys(n);if(i.length>0){var a=i[0].match(t);return a[1]}return null}function W(e){return h.canAdminMOs([e]).then(function(t){return t||(e.isFrozen=!t),e.readOnly=!t,e})}function S(e){return _.get(e,"isFrozen")}function M(e){return S(e)?R(e):N(e)}function N(e){return T(e,!0)}function R(e){return T(e,!1)}function T(t,n){return t.isFrozen=n,Ee.saveAndWait(t).then(e.clearCacheList)}function A(e){var t=["templateUrl","configTemplateUrl"],n=_.map(e.children,function(e){return o.all(_.map(t,_.partial(H,e)))});return o.all(n).then(function(){return e})}function H(e,t){var n=e[t];return p.verifyPluginViewPath(n).then(function(n){return e[t]=n,e})}function E(e){return function(t){var n=_.isObjectLike(t)?t.id:t;return[De,e,n].join(We)}}function $(e){return xe.put(z(e),_.cloneDeep(e))}function z(e){return _.isObjectLike(e)?e.id:e}function U(e,t){var n=_.assign(e||{},{fragmentType:t||De}),i=d.list(n).then(b),a=void 0;return t&&!e&&(a=ke.get(t),i.then(function(e){e.length>0&&ke.put(t,e)})),a?o.when(a):i}function O(){ke.removeAll()}function I(e,t,n){var i=xe.get(z(e)),a=n&&i,r=!a&&d.detail(e).then(s.getResData).then(v).then(W).then($),l=i?o.when(i):r;return l.then(L).then(F(t))}function F(e){return function(t){var n=t;return(n.deviceType||e)&&(n=q(_.cloneDeep(n))),n}}function P(e,t){return o.all(_.map(e.children,function(e){return j(t,e.config)})).then(_.constant(e))}function j(e,t){var n=function(t){t.__target={id:e.id,name:e.name}};return t&&(t.device={id:e.id,name:e.name},t.datapoints&&_.forEach(t.datapoints,n),t.alarmsEventsConfigs&&_.forEach(t.alarmsEventsConfigs,n),t.options&&t.options.dataPoints&&_.forEach(t.options.dataPoints,n),t.datapointsGauge&&_.forEach(t.datapointsGauge,n),t.datapointsLabels&&_.forEach(t.datapointsLabels,n)),t}function L(e){return fe().then(function(t){return o.all(_.map(e.children,function(n){return B(t,e,n)}))}).then(_.constant(e))}function B(e,t,n){var i=n.config||{},a=_.compact([n.transformConfigWithContext,n.componentTransformConfigWithContext]);return _.reduce(a,function(n,i){return n.then(function(n){return r.invoke(i,null,{config:n,context:e,dashboard:t})})},o.resolve(i)).then(function(e){return _.assign(n,{config:e})})}function q(e){return fe().then(_.partial(P,e))}function G(e){return c.list().then(function(t){return _(e).map(function(e){return C(e,t,!0)}).compact().value()})}function V(e,t){var n={children:{},isFrozen:!0,readOnly:!0};return G(e).then(function(e){return _.forEach(e,function(e){ue(n.children,e)}),n}).then(L).then(F(t))}function Y(e,t,n){var i=function(t){return K(t).then(_.partial(te,Re,e)).then(s.getResData).then(function(e){return I(e,n)})},a=function(){var e=["ROLE_INVENTORY_ADMIN","ROLE_INVENTORY_CREATE"];return h.hasAnyRole(e).then(function(e){return!!e||o.reject()})};return U(null,Re(e)).then(function(e){var o=void 0;if(e.length)o=I(_.head(e).id,n);else{var r={children:{}};o=G(t).then(function(e){return _.forEach(e,function(e){ue(r.children,e)}),a().then(_.partial(i,r)).catch(_.partial(_.identity,r))})}return o})}function X(e){return _.some(_.keys(e),function(e){return/^c8y_Dashboard!name!/.test(e)})}function Q(e,t,n){return G(t).then(function(t){var i=e.children;return _.forEach(_.keys(i),function(e){ue(i,i[e],!0)}),_.forEach(t,function(e){ue(i,e)}),K(e).then(function(e){return I(e,n)})})}function J(e,t,n){var i=_.reduce(e.children,function(e,i){var a=i.id,o=i.config,r={device:function(e){return e.id===n.id&&_.assign(e,_.pick(t,["id","name"])),e},datapoints:function(e){return _.forEach(e,function(e){var i=e.__target;i&&i.id===n.id&&_.assign(i,_.pick(t,["id","name"]))}),e}};return o&&_.forEach(r,function(e,t){o[t]&&(o[t]=e(o[t]))}),e[a]=i,e},{});return e.children=i,e}function K(e){var t=["id","creationContext","readOnly"],n=/^c8y_Dashboard!/,i=_.cloneDeep(e),a=i.id,o={id:a},r=a?"update":"createConfirm",l=void 0;return o[De]=_.pickBy(i,function(e,i){return!n.test(i)&&!_.includes(t,i)}),Z(o),l=d[r](o,i.creationContext),"update"===r&&(l=l.then(function(){return e})),"createConfirm"===r&&(l=l.then(s.getResData).then(v)),l.then($)}function Z(e){e[De].global?_.assign(e,{c8y_Global:{}}):e[De].global||_.assign(e,{c8y_Global:null})}function ee(e){return xe.remove(z(e)),d.remove(e)}function te(e,t,n,i){var a={id:n.id},o=e(t);return a[o]=i?null:{},xe.get(o)&&xe.remove(o),d.save(a)}function ne(e,t){return U(null,e(t))}function ie(){var e=["report","device","group"],t=null,i=null;return _.forEach(e,function(e){var a=_.get(n,e+"Id");a&&(t=e,i=a)}),{context:t,id:i}}function ae(){var e=ie(),t="";return"group"===e.context&&(t="/group/"+e.id),"device"===e.context&&(t="/device/"+e.id),t}function oe(e,t){var n={templateUrl:"core_dashboard2/dashboardWidget/config.html",controller:"DashboardWidgetConfigController",size:"lg",resolve:{dashboard:function(){return t||{}},component:function(){return e||{}},hideTarget:function(){return t&&t.deviceType}}};return i.open(n).result}function re(e,t){var n='<div ng-include="\'core_dashboard2/dashboard/new.html\'" ng-controller="DashboardEditCtrl"></div>',a={template:n,controller:["$scope","$uibModalInstance","config",function(e,n,i){e.dashboardId="new",e.modalInstance=n,e.config=i||{},e.creationContext=t}],size:"lg",resolve:{config:_.constant(e)}};return i.open(a).result}function se(e){var t={templateUrl:"core_dashboard2/dashboard/select.html",controller:"DashboardSelectController",size:"lg",resolve:{config:_.constant(e)}};return i.open(t).result}function de(e,t){var n=angular.extend({title:u("Select dashboard"),preventNew:!0,selectLabel:u("Select"),useReports:!0},t);return se(n).then(function(t){return e.templateUrl?pe(t,e):G([e]).then(function(e){var n=_slicedToArray(e,1),i=n[0];return pe(t,i)})})}function le(e){return de(e,{inContext:!0,preventCreate:!0,useReports:!1})}function ce(e){return de(e,{onlyReports:!0,useReports:!0,title:u("Select report"),preventCreate:!0})}function he(e){var t='<div ng-include="\'core_dashboard2/dashboard/new.html\'" ng-controller="DashboardEditCtrl"></div>',n={template:t,controller:["$scope","$uibModalInstance",function(t,n){t.modalInstance=n,t.dashboardId=_.get(e,"dashboardId")}],size:"lg"};return i.open(n).result}function pe(e,t,n){var i=e.id||e;Ae[i]=Ae[i]||{children:[]};var r=Ae[i],s=r.promise;return r.children.push({child:t,remove:n}),s||(r.promise=a(function(){var t=!1,n=!0;return o.all({dashboard:I(e,t,n),contextObject:fe()}).then(function(e){var t=e.dashboard,n=e.contextObject;return o.all(_.map(r.children,function(e){var i=e.remove?o.resolve(e.child):B(n,t,e.child);return i.then(function(n){t.children=ue(t.children||{},n,e.remove)})})).then(_.constant(t))}).then(K)}),s=r.promise,s.finally(function(){delete Ae[i]})),s}function ue(e,t,n){return t.id||(t.id=String(Math.random()).substr(2)),n?delete e[t.id]:e[t.id]=t,ge(e)}function ge(e){var t=0;return _(e).sortBy("position").forEach(function(e){e.position=t,t+=1}),_.cloneDeep(e)}function me(e){return o.all([ne(Me,e.id),ne(Te,e.type)]).then(_.flattenDeep)}function fe(){var e=ie();return e.id?l.detailCached(e.id).then(s.getResData).then(function(t){return t||{id:e.id}}):o.when({})}function be(e){var t=ve(e),n=void 0;if(t)return void m.warning(t);He=[];var i=ie();He.push({dashboard:_.cloneDeep(e),context:i}),"device"===i.context&&(n=u('Dashboard copied. Navigate to the desired device and select "Paste dashboard"')),"group"===i.context&&(n=u('Dashboard copied. Navigate to the desired group and select "Paste dashboard"')),m.success(n)}function ve(e){function t(e){return e.__target.id!==i}var n=ie(),i=n.id;if("device"!==n.context&&"group"!==n.context)return u("Only dashboards from devices or groups can be copied");var a=_.every(e.children,function(e){var n=e.config||{},a=!0;return n.device&&n.device.id!==i&&(a=!1),n.datapoints&&_.some(n.datapoints,t)&&(a=!1),a});if(!a){if("device"===n.context)return u("Only dashboards with widgets referencing the current device can be copied.");if("group"===n.context)return u("Only dashboards with widgets referencing the current group can be copied.")}return!1}function ye(){var e=He&&He[0];return e&&e.dashboard}function _e(e){var t=ie(),n=void 0,i=e.context.context;return t.context!==i&&("device"===i&&(n=u("Device dashboards can only be copied into a device.")),"group"===i&&(n=u("Group dashboards can only be copied into a group."))),n&&m.warning(n),!n}function Ce(){if(He&&He.length){if(!_e(_.last(He)))return!1;var e=He.pop(),t=e.dashboard,n=ie(),i=Ee[n.context+"Add"];O(),_.forEach(t,function(e,n){n.match(/!/)&&delete t[n]});var a=n.context,o=n.context===e.context.context,r=["device","group"];return o&&r.includes(a)&&(t=J(t,n,e.context)),t.creationContext=n,delete t.id,K(t).then(function(e){return i(n.id,e)})}}function we(e){var t=void 0,n=["ROLE_INVENTORY_ADMIN","ROLE_INVENTORY_CREATE"];return t=s.hasId(e)?h.canAdminMOs([e]):h.hasAnyRole(n)}var xe=t("dashboards"),ke=t("dashboardLists"),De="c8y_Dashboard",We="!",Se={welcome:{icon:"cloud",name:g.getString("Welcome")},home:{icon:"home",name:g.getString("Home")}},Me=E("device"),Ne=E("group"),Re=E("name"),Te=E("type"),Ae={},He=[],Ee={list:U,save:K,saveAndWait:_.partialRight(K,!0),detail:I,detailPredefinedReadOnly:V,named:Y,isNamed:X,remove:ee,isLocked:S,toggleLock:M,lock:N,unlock:R,deviceAdd:_.partial(te,Me),deviceRemove:_.partialRight(_.partial(te,Me),!0),deviceList:_.partial(ne,Me),deviceTypeAdd:_.partial(te,Te),deviceTypeRemove:_.partialRight(_.partial(te,Te),!0),deviceTypeList:me,groupAdd:_.partial(te,Ne),groupRemove:_.partialRight(_.partial(te,Ne),!0),groupList:_.partial(ne,Ne),getContextObject:fe,addDashboard:re,copyDashboard:be,pasteDashboard:Ce,dashboardToPaste:ye,selectDashboard:re,editCurrentDashboard:he,editChildUI:oe,addChildUI:_.partial(oe,null),restoreDefaultChildren:Q,getContext:ie,getContextPath:ae,appendChild:_.partialRight(pe,!1),updateChild:_.partialRight(pe,!1),removeChild:_.partialRight(pe,!0),clearCacheList:O,addWidgetToSelectedDashboard:de,addWidgetToSelectedDashboardInContext:le,addWidgetToSelectedReport:ce,getIconNameObj:k,hasWritePermissions:we,VERSION:2};return _.assign(Ee,f)}e.$inject=["$cacheFactory","$routeParams","$uibModal","$timeout","$q","$injector","c8yBase","dashboardInventorySvc","c8yInventory","c8yComponents","c8yPermissions","c8yUiUtil","gettext","gettextCatalog","c8yAlert","c8yDashboardStyle"],angular.module("c8y.parts.dashboard2").factory("dashboardSvc",e)}(),function(){"use strict";function e(e){function t(e){H[e]=!0}function n(e){_.unset(H,e)}function i(e){E.push(e)}function a(e){_.remove(E,e)}function o(e){$.push(e)}function r(e){_.remove($,e)}function s(){return _.cloneDeep($)}function d(e){return _.transform([(e||{}).classes||{},H],function(e,t){_.forOwn(t,function(t,n){var i=l(n);c(e,i)||(e[n]=t)})},{})}function l(e){return _.find(E,function(t){return t.test(e)})}function c(e,t){return t&&_.some(_.keys(e),function(e){return t.test(e)})}function h(e){return _.defaults(p(e),(e||{}).styles||{},A)}function p(e){var t=(e||{}).widgetMargin,n=_.find([t,z.margin],_.isFinite);return{margin:-n+"px"}}function u(e){O[e]=!0}function g(e){_.unset(O,e)}function m(e){I.push(e)}function f(e){_.remove(I,e)}function b(e){F.push(e)}function v(e){_.remove(F,e)}function y(){return _.cloneDeep(F)}function C(e){P.push(e)}function w(e){_.remove(P,e)}function x(){return _.cloneDeep(P)}function k(e,t){return _.transform([(e||{}).classes||{},(t||{}).widgetClasses||{},O],function(e,t){_.forOwn(t,function(t,n){var i=D(n);c(e,i)||(e[n]=t)})},{})}function D(e){return _.find(I,function(t){return t.test(e)})}function W(e,t){return _.defaults(S(e,t),(e||{}).styles||{},(t||{}).widgetStyles||{},U)}function S(e,t){var n=M(e,t);return{"margin-top":n.top+"px","margin-bottom":n.bottom+"px","margin-left":n.left+"px","margin-right":n.right+"px"}}function M(e,t){var n=N(e,t),i=(e||{}).margins||{};return{top:_.find([i.top,n.top],_.isFinite),bottom:_.find([i.bottom,n.bottom],_.isFinite),left:_.find([i.left,n.left],_.isFinite),right:_.find([i.right,n.right],_.isFinite)}}function N(e,t){var n=(t||{}).widgetMargin;return{top:_.find([n,z.top],_.isFinite),bottom:_.find([n,z.bottom],_.isFinite),left:_.find([n,z.left],_.isFinite),right:_.find([n,z.right],_.isFinite)}}function R(){return z.margin}function T(e,t){var n=M(e,t);return{bottom:10+n.bottom+"px",right:5+n.right+"px"}}var A={},H={"dashboard-theme-light":!0},E=[/^dashboard-theme-.*$/],$=[{label:e("Light"),default:!0,class:"dashboard-theme-light"},{label:e("Dark"),class:"dashboard-theme-dark"},{label:e("Transparent"),class:"dashboard-theme-transparent"},{label:e("Branded"),class:"dashboard-theme-branded"}],z={margin:12,top:12,bottom:12,left:12,right:12},U={},O={},I=[/^panel-title-.*$/,/^panel-content-.*$/],F=[{label:e("Regular"),default:!0,class:"panel-title-regular"},{label:e("Border"),class:"panel-title-border"},{label:e("Overlay"),class:"panel-title-overlay"},{label:e("Hidden"),class:"panel-title-hidden"}],P=[{label:e("Light"),default:!0,class:"panel-content-light"},{label:e("Dark"),class:"panel-content-dark"},{label:e("Transparent"),class:"panel-content-transparent"},{label:e("Branded"),class:"panel-content-branded"}];return{addDefaultDashboardClass:t,removeDefaultDashboardClass:n,addDashboardClassesGroup:i,removeDashboardClassesGroup:a,addDashboardThemeClass:o,removeDashboardThemeClass:r,getDashboardThemeClasses:s,getApplicableDashboardClasses:d,getApplicableDashboardStyles:h,addDefaultWidgetClass:u,removeDefaultWidgetClass:g,addWidgetClassesGroup:m,removeWidgetClassesGroup:f,addWidgetHeaderClass:b,removeWidgetHeaderClass:v,getWidgetHeaderClasses:y,addWidgetContentClass:C,removeWidgetContentClass:w,getWidgetContentClasses:x,getApplicableWidgetClasses:k,getApplicableWidgetStyles:W,getDefaultWidgetMargins:N,getDefaultDashboardWidgetMargin:R,getApplicableWidgetHandleStyles:T}}e.$inject=["gettext"],angular.module("c8y.parts.dashboard2").factory("c8yDashboardStyle",e)}(),function(){"use strict";function e(e){function t(t,n){var i,a=_.get(n,"id");return i=a?e.createChildAddition(t,a):e.create(t)}return{createConfirm:t,update:e.update,save:e.save,detail:e.detail,list:e.list,remove:e.remove}}angular.module("c8y.parts.dashboard2").factory("dashboardInventorySvc",["c8yInventory",e])}(),function(){"use strict";function e(){this.widgets={},this.dashboards={}}angular.module("c8y.parts.dashboard2").service("dashboardCommunicationSvc",[e]),e.prototype.addDashboard=function(e){this.dashboards[e.$id]=e.dashboard},e.prototype.removeDashboard=function(e){delete this.dashboards[e.$id]},e.prototype.getDashboards=function(){return _.values(this.dashboards)},e.prototype.addWidget=function(e){this.widgets[e.$id]=e.child},e.prototype.removeWidget=function(e){delete this.widgets[e.$id]},e.prototype.getWidgets=function(){return _.assign({},this.widgets)}}(),function(){"use strict";function e(e,t,n,i,a,o,r,s,d){function l(){return c().then(h(p)).then(h(u))}function c(){return s.isAvailable({name:"feature-dashboard-mailer"})}function h(e){return function(t){return!!t&&e()}}function p(){return o.shouldShowSmartRules()}function u(){var t=e.when(!1),n=g();return n&&(t=n.mustBeAvailable(f).then(_.constant(!0),_.constant(!1))),t}function g(){var e="smartRuleTemplatesSvc";return t.has(e)&&t.get(e)}function m(e,o,s){var l=e?r.detail(o.id).then(a.getResData).then(_.partialRight(_.pick,["name","icon"])):d.getIconNameObj(s);l.then(function(e){var a=t.get("smartRulesSvc"),o={config:{dashboard:e,url:n.absUrl(),subject:i.getString("Print screen of {{name}}",e)}};a.createInstanceWithUIByName(f,o)})}var f="sendDashboardsViaEmail";return{isAvailable:l,send:m}}e.$inject=["$q","$injector","$location","gettextCatalog","c8yBase","c8yUiUtil","c8yInventory","c8yApplication","dashboardSvc"],angular.module("c8y.parts.dashboard2").factory("c8yDashboardViaEmail",e)}(),function(){"use strict";function e(e,t,n,i,a){function o(o,d){function l(i){var a=void 0,r=t(s);_.isObjectLike(i)&&(a=_.map(i,function(t){var n=g[t.id],i=void 0,a=e.defer();return n?(n.scope.child=t,a.resolve(n)):(i=o.$new(),i.child=t,r(i,function(e){g[t.id]={el:e,scope:i},n=g[t.id],a.resolve(n)})),a.promise}),p.off("change",h),e.all(a).then(function(){var e=_(g);e.map(function(e,t){return t}).filter(function(e){return!i[e]}).forEach(function(e){var t=g[e];u.remove_widget(t.widget_el),t.scope.$destroy(),delete g[e]}),e.filter(function(e){return!e.widget_el}).sortBy(function(e){return[e.scope.child._y,e.scope.child._x]}).forEach(function(e){var t=$("<div></div>"),i=e.scope.child,a=!!_.isUndefined(i._x);"Twitter news"===i.name&&t.addClass("grid-floater"),t.html(e.el),e.widget_el=t,u.addWidget(t,i._x,i._y,i._width||4,i._height||4,a),c(o.isFrozen||i._isFrozen,t),t.find(".ui-resizable-handle").css(n.getApplicableWidgetHandleStyles(i,o.dashboard))}),p.on("change",h)}))}function c(e,t){e&&(u.locked(t,!0),u.movable(t,!1),u.resizable(t,!1))}function h(e,t){o.$broadcast("dashboard-change"),_(t).map(function(e){var t=_.find(g,function(t){return t.widget_el&&t.widget_el.is(e.el)}),n=t&&t.scope;return o&&n.$broadcast("dashboardResize"),{child:n&&n.child,widgetData:e}}).map(function(e){var t=e.widgetData;return e.child&&(e.child._x=t.x,e.child._y=t.y,e.child._width=t.width,e.child._height=t.height),e.child}).forEach(function(e){e&&o.editChildDirect(e)})}var p=$(d).find(".dashboard-container");p.gridstack(_.clone(r));var u=p.data("gridstack"),g={};o.$watch("dashboard",function(e){e&&(o.setPageTitle&&n.getIconNameObj(e).then(function(e){return a.changeTitle({title:e.name})}),i.addDashboard(o),o.$on("$destroy",function(){i.removeDashboard(o)}))}),o.$watch("children",l,!0)}var r={cellHeight:80,verticalMargin:0,handle:".drag-handle",draggable:{handle:".drag-handle",scroll:!1,appendTo:"body"}},s='<c8y-dashboard-child config="child"></c8y-dashboard-child>';return{scope:{id:"=",name:"@",setPageTitle:"=",predefinedReadOnly:"=",defaultChildren:"=",isFrozenDirective:"=?isFrozen",useContext:"&",setGlobal:"<"},transclude:{actions:"?actionBarMore",edit:"?editButton"},restrict:"E",templateUrl:"core_dashboard2/dashboard/dashboard.html",link:o,controller:"DashboardCtrl"}}e.$inject=["$q","$compile","dashboardSvc","dashboardCommunicationSvc","c8yTitle"],angular.module("c8y.parts.dashboard2").directive("c8yDashboardGridstack",e)}(),function(){"use strict";function e(e,t,n,i,a,o,r,s,d,l){function c(t){t&&i.detail(t,e.useContext()).then(h)}function h(t){t&&(e.dashboard=t,e.children=t.children||{},e.nochildren=!_.keys(e.children).length,e.isFrozen=e.isFrozenDirective||t.isFrozen,e.dashboardLocked=i.isLocked(t),i.hasWritePermissions(t).then(function(n){e.canUnlock=n,n?e.setGlobal&&!t.global&&d.update({id:t.id,c8y_Global:{}}):t.isFrozen=e.isFrozen=!0}),i.getContextObject().then(function(t){e.dashboardContext=t}))}function p(t){t&&(e.isNamed=!0,i.named(t,e.defaultChildren,e.useContext()).then(h))}function u(t){t&&(e.isPredefinedReadOnly=!0,i.detailPredefinedReadOnly(e.defaultChildren,e.useContext()).then(h))}function g(t){i.appendChild(e.dashboard,t).then(h)}function m(t){i.updateChild(e.dashboard,t).then(h)}function f(){return e.dashboard&&!e.isFrozenDirective&&!e.isInMemory}function b(t){var n=i.editChildUI(t,e.dashboard);return n.then(m),n}function v(t){i.updateChild(e.dashboard,t).then(h)}function y(t){i.removeChild(e.dashboard,t).then(h)}function C(){var t=e.defaultChildren;t&&i.restoreDefaultChildren(e.dashboard,t,e.useContext()).then(h)}function w(){i.addChildUI(e.dashboard).then(g)}function x(){return!i.isLocked(e.dashboard)&&!e.isFrozenDirective}function k(){l.send(O,U,e.dashboard)}function D(){return x()&&!_.get(e,"dashboard.readOnly")}function W(){var n=i.isLocked(e.dashboard),a=r(n?"Your dashboard is unlocked now.":"Your dashboard is locked now."),o=_.partial(_.unary(s.success),a);return e.changingLock=!0,i.toggleLock(e.dashboard).then(t.reload).then(o)}function S(){return r(e.dashboardLocked?"Unlock":"Lock")}function M(){return e.isNamed&&e.defaultChildren}function N(){var n=e.isNamed?{dashboardId:e.dashboard.id}:void 0;i.editCurrentDashboard(n).then(t.reload)}function R(){var t=e.isNamed,n=t&&!O;return x()&&(t||n)}function T(){var t=e.dashboard,s=t.deviceType&&t.deviceTypeValue?o.getString('Do you want to remove the dashboard named "{{name}}" from all devices of the type "{{deviceTypeValue}}"?',t):o.getString('Do you want to remove the dashboard named "{{name}}"?',t),d={title:r("Are you sure?"),body:s,status:"danger"},l=_.partial(i.remove,t),c=function(){n.path(i.getContextPath())};U.id&&a(d).then(l).then(i.clearCacheList).then(c)}function A(){i.copyDashboard(e.dashboard)}function H(e){return e.translateTitle?o.getString(e.title):e.title}function E(){l.isAvailable().then(function(t){e.showSendViaEmail=t})}function $(){return!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)}function z(){var e=document.body;$()?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}var U=i.getContext(),O="report"===U.context;e.$watch("id",c),e.$watch("config",h),e.$watch("name",p),e.$watch("predefinedReadOnly",u),e.$on("c8yResetDefaultChildren",C),_.assign(e,{removeChild:y,editChild:b,editChildDirect:v,addChild:w,editDashboard:N,canEdit:R,canWriteToDashboard:x,canLock:D,toggleLock:W,isRestorable:M,sendViaEmail:k,copyDashboard:A,removeDashboard:T,showBar:f,lockTooltip:S,restoreDefault:C,fullScreen:$,toggleFullscreen:z,isLocked:i.isLocked,getTranslatedChildTitle:H,getApplicableDashboardClasses:i.getApplicableDashboardClasses,getApplicableDashboardStyles:i.getApplicableDashboardStyles,getApplicableWidgetClasses:i.getApplicableWidgetClasses,getApplicableWidgetStyles:i.getApplicableWidgetStyles,getApplicableWidgetHandleStyles:i.getApplicableWidgetHandleStyles}),E()}e.$inject=["$scope","$route","$location","dashboardSvc","c8yModal","gettextCatalog","gettext","c8yAlert","c8yInventory","c8yDashboardViaEmail"],angular.module("c8y.parts.dashboard2").controller("DashboardCtrl",e)}(),function(){"use strict";function e(e,t,n,i,a,o,r,s,d){function l(t){e.dashboards=t}function c(){delete e.dashboards;var t="list",d=r.getContext(),c=[];if(d.context&&s.inContext&&(t=("device"===d.context?"deviceType":d.context)+"List"),!s.onlyReports){var p;p=d.id&&"device"===d.context?o.detail(d.id).then(a.getResData).then(r[t]):d.id&&"list"!==t?r[t](d.id):r[t](),c.push(p)}try{var u=n.get("c8yReports");(s.onlyReports||s.useReports)&&u&&c.push(u.list())}catch(e){}return i.all(c).then(_.flattenDeep).then(h).then(l)}function h(e){return _.filter(e,function(e){return e.name})}function p(e){e.c8y_Report?r.named("report_"+e.id).then(t.close):t.close(e)}function u(){t.dismiss()}function g(){return s.title||d("Select dashboard")}function m(){return s.selectLabel||d("Add")}s=s||{},e.cancel=u,e.select=p,e.config=s,e.getConfigTitle=g,e.getConfigSelectLabel=m,c()}e.$inject=["$scope","$uibModalInstance","$injector","$q","c8yBase","c8yDevices","dashboardSvc","config","gettext"],angular.module("c8y.parts.dashboard2").controller("DashboardSelectController",e)}(),function(){"use strict";function e(e,t,n,i,a,o,r,s,d,l,c){function h(){var t=e.dashboardId||n.dashboardId,a={name:"Dashboard",priority:1e4,icon:"th",global:!0};"new"===t&&(t=null),f(t),t?i.detail(t).then(p):p(a)}function p(t){e.dashboard=_.cloneDeep(t),e.isNamedDashboard=i.isNamed(e.dashboard)}function u(t){_.assign(e.dashboard,t),e.saved=!0,i.clearCacheList(),_.get(e,"dashboard.id")||l.redirectToDashboard(t),m("saved",t)}function g(){var t=e.dashboard;e.creationContext&&(t=_.merge(t,{creationContext:e.creationContext})),i.saveAndWait(t).then(u)}function m(t,n){if(e.modalInstance){var i=t?"close":"dismiss";e.modalInstance[i](n||e.dashboard)}}function f(t){e.title=c(t?"Edit dashboard":"Create dashboard")}e.save=g,e.cancel=m,e.icons=a,e.beta=o.beta,h()}e.$inject=["$scope","$location","$routeParams","dashboardSvc","iconList","info","c8yUiUtil","c8yUserGroup","c8yPermissions","c8yDashboardUi","gettext"],angular.module("c8y.parts.dashboard2").controller("DashboardEditCtrl",e)}(),function(){"use strict";function e(e,t,n,i,a){function o(){var t=i.getContext(),n=t.context;"device"===n&&i.getContextObject().then(r),a.waitForPropertyResolve(e,"forms.newDashboard").then(function(t){_.has(e.dashboard,"id")||t.$setDirty()})}function r(t){e.dashboard.deviceTypeValue=e.deviceType=t.type}function s(e){return _.merge(i.getApplicableDashboardClasses(e),i.getApplicableWidgetClasses(null,e))}e.forms={},e.defaultDashboardWidgetMargin=i.getDefaultDashboardWidgetMargin(),e.dashboardThemeClasses=i.getDashboardThemeClasses(),e.widgetHeaderClasses=i.getWidgetHeaderClasses(),e.getApplicableDashboardClasses=i.getApplicableDashboardClasses,e.getApplicableDashboardStyles=i.getApplicableDashboardStyles,e.getApplicableWidgetClasses=i.getApplicableWidgetClasses,e.getApplicableWidgetStyles=i.getApplicableWidgetStyles,e.getPreviewClasses=s,o()}e.$inject=["$scope","c8yBase","c8yPermissions","dashboardSvc","c8yUiUtil"],angular.module("c8y.parts.dashboard2").controller("newDashboardCtrl",e)}(),function(){"use strict";function e(e,t,n,i){function a(e){m.dashboard&&n.getFlag("deprecated")&&o(),e.saved&&m.saved&&g&&t.setMOPermissions(m.dashboard,m.permissions)}function o(){t.mustHaveAllRoles(b).then(function(){e.show(),g=!0,r(m.dashboard),s()})}function r(e){t.getMOPermissions(e).then(l)}function s(){i.list().then(function(e){m.groups=d(e)})}function d(e){var t=["id","name"];return _.map(e,function(e){return _.reduce(t,function(t,n){return t[n]=e[n],t},{})})}function l(e){m.permissions=e}function c(){h()&&m.permissions.groups.push(_.cloneDeep(f))}function h(){var e=_.last(_.get(m,"permissions.groups"));return!e||e.group&&e.access}function p(e){_.remove(_.get(m,"permissions.groups"),function(t){return t===e})}function u(){m.dashboard.global&&(m.permissions.groups=[])}var g,m=this,f={source:null,type:"*",scope:"MANAGED_OBJECT",access:null},b=["ROLE_USER_MANAGEMENT_ADMIN","ROLE_INVENTORY_ADMIN"];_.assign(m,{$onChanges:a,clearPermissions:u,removePermission:p,addPermission:c,canAddPermission:h,accessTypes:t.getAccessTypes()}),e.hide()}e.$inject=["$element","c8yPermissions","c8yBase","c8yUserGroup"],angular.module("c8y.parts.dashboard2").component("c8yDashboardPermissions",{templateUrl:"core_dashboard2/dashboard/dashboardPermissions.html",controllerAs:"vm",controller:e,bindings:{dashboard:"<",saved:"<"}})}(),function(){"use strict";function e(e,t){function n(n){t.addWidget(n),n.$on("$destroy",function(){t.removeWidget(n)}),n.editChild=function(t){n.$parent.editChild(t).then(function(t){e.verifyPluginViewPath(t.templateUrl).then(function(e){t.templateUrl=e,n.child=t})})}}return{replace:!0,restrict:"E",templateUrl:"core_dashboard2/dashboardWidget/dashboardChild.html",link:n}}e.$inject=["c8yUiUtil","dashboardCommunicationSvc"],angular.module("c8y.parts.dashboard2").directive("c8yDashboardChild",e)}(),function(){"use strict";function e(e,t,n,i,a,o,r,s,d){function l(t){e.components=t,e.data.cmp=h(o)}function c(t){_.isObjectLike(t)&&(e.config.device={id:t.id,name:t.name,idPath:t.idPath})}function h(t){return _.find(e.components,function(e){return e.name===t.name})}function p(t,n){if(t){t=t||{},n=n||{};var i=t.name,a=n.name,o=d.getString(t.nameDisplay||i),r=d.getString(n.nameDisplay||a);N.name=i,N.templateUrl=t.templateUrl,N.widgetComponent=t.widgetComponent,N.configTemplateUrl=t.configTemplateUrl,N.configComponent=t.configComponent,N.componentTransformConfigWithContext=t.transformConfigWithContext,e.componentOptions=t.options||{},e.componentOptions.widgetDefaults&&_.assign(N,e.componentOptions.widgetDefaults),N.title&&N.title!==r||(N.title=o),_.isUndefined(N.col)&&(N.col=S),e.forms.componentForm.$error={}}}function u(){n.list().then(l)}function g(){N.config=e.config,e.$broadcast("saveWidget"),t.close(N)}function m(){e.$broadcast("cancelWidget"),t.dismiss()}function f(){var t=i.getContext(),n=["device","group"];_.includes(n,t.context)&&(e[t.context+"Id"]=t.id,e.rootId=W=t.id)}function b(e){return!(e.options&&e.options.noNewWidgets)}function v(e){return e.nameDisplay||e.name}function y(){return!(_.get(e,"componentOptions.noDeviceTarget")||_.get(e,"componentOptions.deviceTargetNotRequired")||_.get(e,"config.device"))}function C(e){return e.description||s("no description")}function w(e,t){return _.merge(i.getApplicableDashboardClasses(t),i.getApplicableWidgetClasses(e,t))}function x(){var t=_.keys(M.widgetClasses);e.dashboardWidgetHeaderOption=_.find(e.widgetHeaderClasses,function(e){return _.includes(t,e.class)});var n=_.keys(M.classes);e.dashboardWidgetContentOption=_.find(e.widgetContentClasses,function(e){return _.includes(n,e.class.replace("panel-content-","dashboard-theme-"))}),e.showVisualConfig=k()}function k(){var e=i.getContext(),t="report"===e.context;return!t}function D(e){e&&$('[name="forms.componentForm"]').find('input[type="search"]').focus()}var W,S=6,M=_.cloneDeep(a),N=_.cloneDeep(o);e.cancel=m,e.save=g,e.data={},e.component=N,e.dashboard=M,e.config=N.config||{},e.title=s(N.id?"Edit widget":"Create widget"),e.noNewWidgets=b,e.orderWidgets=v,e.hideTarget=r,e.targetNotSelectedValidation=y,e.$watch("data.cmp",p),e.$watch("_config.device",c),e._config={device:e.config.device},e.getItemDescription=C,e.widgetHeaderClasses=i.getWidgetHeaderClasses(),e.widgetContentClasses=i.getWidgetContentClasses(),e.getApplicableDashboardClasses=i.getApplicableDashboardClasses,
e.getApplicableDashboardStyles=i.getApplicableDashboardStyles,e.getApplicableWidgetClasses=i.getApplicableWidgetClasses,e.getApplicableWidgetStyles=i.getApplicableWidgetStyles,e.defaultWidgetMargins=i.getDefaultWidgetMargins(N,M),e.dashboardThemeClasses=i.getDashboardThemeClasses(),e.getPreviewClasses=w,e.onOpenClose=D,u(),f(),x()}e.$inject=["$scope","$uibModalInstance","c8yComponents","dashboardSvc","dashboard","component","hideTarget","gettext","gettextCatalog"],angular.module("c8y.parts.dashboard2").controller("DashboardWidgetConfigController",e)}(),function(){"use strict";function e(e){return{restrict:"A",link:function(t,n){var i=n.parent(".card-dashboard");if(!i.length){var a=n.parents(".card-dashboard"),o=a.find(".card-inner-scroll");if(n.addClass("card-footer separator"),o.length){o.addClass("has-footer");var r=angular.element(n[0].outerHTML);a.append(r),e(r)(t),n.remove(),t.$on("$destroy",function(){o.removeClass("has-footer"),r.remove()})}}}}}e.$inject=["$compile"],angular.module("c8y.parts.dashboard2").directive("c8yWidgetFooter",e)}(),function(){"use strict";function e(){function e(){l.ngModel.$render=t}function t(){l.classes=_.cloneDeep(l.ngModel.$modelValue||{}),n()}function n(){l.selectedOption=i(l.classes)||a()}function i(e){var t=_.keys(e);return _.find(l.options,function(e){return _.includes(t,e.class)})}function a(){return l.placeholderOption||_.find(l.options,{default:!0})||_.find(l.options,{class:""})}function o(e){r(l.classes),l.selectedOption===e?l.selectedOption=a():(l.selectedOption=e,s(l.classes,e)),d(l.classes)}function r(e){_.forEach(_.map(l.options,"class"),function(t){_.unset(e,t)})}function s(e,t){_.isEmpty(t.class)||(e[t.class]=!0)}function d(e){l.ngModel.$setViewValue(e),l.ngModel.$render()}var l=this;_.assign(l,{$onInit:e,onOptionClicked:o})}angular.module("c8y.parts.dashboard2").component("c8yClassSelector",{require:{ngModel:"ngModel"},bindings:{label:"<",placeholder:"<",options:"<",placeholderOption:"<"},templateUrl:"core_dashboard2/visualConfig/classSelector.html",controller:e,controllerAs:"vm"})}(),function(){"use strict";function e(e){function t(){o.ngModel.$render=n}function n(){o.margins=o.singleValue?{margin:o.ngModel.$modelValue}:_.cloneDeep(o.ngModel.$modelValue||{})}function i(e){return o.placeholders&&o.placeholders[e]||o.placeholder}function a(){o.ngModel.$setViewValue(o.singleValue?o.margins.margin:o.margins),o.ngModel.$render()}var o=this,r={single:e("Margin"),top:e("Top margin"),bottom:e("Bottom margin"),left:e("Left margin"),right:e("Right margin")};_.assign(o,{defaultLabels:r,$onInit:t,getPlaceholder:i,onMarginsChanged:a})}e.$inject=["gettext"],angular.module("c8y.parts.dashboard2").component("c8yMarginsEditor",{require:{ngModel:"ngModel"},bindings:{label:"<",labels:"<",placeholder:"<",placeholders:"<",singleValue:"<"},templateUrl:"core_dashboard2/visualConfig/marginsEditor.html",controller:e,controllerAs:"vm"})}(),function(){"use strict";function e(e){var t;t='<div class="dashboard" ng-class="getApplicableDashboardClasses(dashboard)">\n\n  <c8y-ui-action-bar-set ng-if="showBar()">\n    <button title="{{\'Add widget to dashboard\' | translate}}" class="btn btn-link" ng-click="addChild()" ng-disabled="!canWriteToDashboard()">\n      <i c8y-icon="plus-circle"></i> <translate>Add widget</translate>\n     </button>\n\n    <li ng-transclude="edit">\n      <button title="{{\'Edit dashboard\' | translate}}" class="btn btn-link" ng-disabled="!canWriteToDashboard()" ng-click="editDashboard()">\n        <i c8y-icon="pencil"></i> <translate>Edit</translate>\n      </button>\n    </li>\n\n    <button title="{{\'Toggle full screen\' | translate}}" class="btn btn-link" ng-click="toggleFullscreen()">\n      <i c8y-icon="{{fullScreen() ? \'compress\' : \'expand\'}}"></i> <translate>Full screen</translate>\n     </button>\n\n    <li class="navbar-form">\n      <button title="{{\'Lock/unlock this dashboard\' | translate}}" class="btn btn-default" ng-model="dashboardLocked" ng-change="toggleLock()" ng-disabled="changingLock || !canUnlock" uib-btn-checkbox>\n        <i c8y-icon="{{isLocked(dashboard) ? \'lock\' : \'unlock\'}}"></i>\n      </button>\n    </li>\n\n    <button action-bar-position="more" title="{{\'Copy dashboard\' | translate}}" ng-hide="isNamed" ng-click="copyDashboard()">\n      <i c8y-icon="clone"></i> <translate>Copy dashboard</translate>\n    </button>\n\n    <button action-bar-position="more" title="{{\'Remove dashboard\' | translate}}" ng-click="removeDashboard()" ng-hide="isNamed" ng-disabled="!canWriteToDashboard()">\n      <i c8y-icon="trash"></i> <translate>Remove dashboard</translate>\n    </button>\n\n    <button action-bar-position="more" title="{{\'Restore default dashboard\' | translate}}" ng-click="restoreDefault()" ng-show="isRestorable()" ng-disabled="!canWriteToDashboard()">\n      <i c8y-icon="undo"></i> <translate>Restore dashboard</translate>\n    </button>\n\n    <button action-bar-position="more" title="{{\'Send dashboard via e-mail\' | translate}}" ng-click="sendViaEmail()" ng-show="showSendViaEmail">\n        <i c8y-icon="paper-plane"></i> <translate>Send via e-mail</translate>\n    </button>\n\n    <li action-bar-position="more" ng-transclude="actions">\n\n    </li>\n  </c8y-ui-action-bar-set>\n\n\n  <!-- empty state -->\n  <div class="c8y-empty-state text-center" ng-show="nochildren">\n    <h1 class="c8y-icon c8y-icon-device c8y-icon-duocolor"></h1>\n    <h3 translate>No widgets to display.</h3>\n    <div ng-show="canWriteToDashboard()">\n      <p translate>Please add widgets to this dashboard.</p>\n      <p><button ng-click="addChild()" class="btn btn-primary" translate>Add widget</button></p>\n      <p c8y-guide-docs><small translate>Find out more on the <a c8y-guide-href="users-guide/cockpit/#dashboards">User Guide</a>.</small></p>\n    </div>\n  </div>\n  <!-- /.empty state -->\n\n\n  <div class="dashboard-container grid-stack" ng-style="getApplicableDashboardStyles(dashboard)">\n  </div>\n</div>',e.put("dashboard2/dashboard/dashboard.html",t),e.put("core_dashboard2/dashboard/dashboard.html",t),e.put("/apps/core/dashboard2/dashboard/dashboard.html",t),t='<div class="alert alert-warning">\n  <i c8y-icon="exclamation-triangle" class="fa-2x pull-left"></i>\n  <span translate>\n    This feature is deprecated. Although it\'s still fully functional you should rather use new <a href="/apps/administration#roles">Roles</a> feature to set permissions.\n  </span>\n</div>\n\n<div class="form-group" ng-show="!vm.dashboard.global" style="margin-top: 1em">\n <a href="" class="btn btn-link" ng-click="vm.addPermission()" ng-disabled="!vm.canAddPermission()">\n   <i c8y-icon="plus"></i> <translate>Add permission</translate>\n </a>\n</div>\n\n<div style="clear: both" class="row" ng-show="!dashboard.global && permissions.groups.length">\n  <label style="text-transform: capitalize" class="col-sm-6">\n    <translate>Group</translate>\n  </label>\n  <label class="col-sm-6">\n    <translate>Permission</translate> *\n  </label>\n</div>\n\n<div class="form-group" ng-show="!vm.dashboard.global">\n  <div class="row" ng-repeat="permission in vm.permissions.groups">\n    <div class="col-sm-6">\n      <ui-select required ng-model="permission.group">\n        <ui-select-match placeholder="{{\'Select or search\' | translate}}">{{$select.selected.name | translate}}</ui-select-match>\n        <ui-select-choices repeat="group in vm.groups | filter: $select.search | orderBy:\'name\' track by group.id">\n          <div ng-bind-html="group.name | translate | highlight: $select.search"></div>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n    <div class="col-sm-5">\n      <ui-select required ng-model="permission.access">\n        <ui-select-match placeholder="{{\'Select or search\' | translate}}">{{$select.selected}}</ui-select-match>\n        <ui-select-choices repeat="at in vm.accessTypes | filter: $select.search">\n          <div ng-bind-html="at | translate | highlight: $select.search"></div>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n    <button class="btn btn-danger btn-xs showOnHover" ng-click="vm.removePermission(permission)">\n      <i c8y-icon="times"></i>\n    </button>\n  </div>\n</div>\n\n<div class="form-group">\n  <div class="checkbox">\n    <label>\n      <input type="checkbox" ng-model="vm.dashboard.global" ng-change="vm.clearPermissions()"/>\n      <translate>Dashboard visible to all users</translate>\n    </label>\n  </div>\n</div>\n',e.put("dashboard2/dashboard/dashboardPermissions.html",t),e.put("core_dashboard2/dashboard/dashboardPermissions.html",t),e.put("/apps/core/dashboard2/dashboard/dashboardPermissions.html",t),t='<div ng-controller="newDashboardCtrl">\n\n  <div class="modal-header">\n    <h3>{{title | translate}}</h3>\n  </div>\n\n  <div class="modal-body">\n    <form name="forms.newDashboard">\n      <div ng-if="!isNamedDashboard">\n        <h6 class="legend"><span translate>Dashboard info</span></h6>\n        <div class="row">\n          <div class="col-sm-6">\n            <div class="form-group">\n              <label>\n                <span translate>Menu label</span>\n                <i c8y-icon="question-circle-o" class="text-primary" uib-tooltip="{{\'Menu label to display in submenu when dashboard is attached\' | translate}}" tooltip-append-to-body="true"></i>\n              </label>\n              <input class="form-control" name="name" ng-model="dashboard.name" placeholder="{{\'e.g. My dashboard\' | translate}}" required>\n              <c8y-error-feedback field="forms.newDashboard.name"></c8y-error-feedback>\n            </div>\n          </div>\n          <div class="col-sm-3">\n            <div class="form-group">\n              <label>\n                <span translate>Location in navigation</span>\n                <i c8y-icon="question-circle-o" class="text-primary" uib-tooltip="{{\'Order in navigation menu (10000 first, -10000 last)\' | translate}}" tooltip-append-to-body="true">\n                </i>\n              </label>\n              <input type="number" class="form-control" name="priority" ng-model="dashboard.priority" ng-max="10000" ng-min="-10000" placeholder="{{\'e.g.\' | translate}} 500" required>\n              <c8y-error-feedback field="forms.newDashboard.priority"></c8y-error-feedback>\n            </div>\n          </div>\n          <div class="col-sm-3">\n            <div class="form-group">\n              <label translate>Icon</label>\n              <ui-select ng-model="dashboard.icon">\n                <ui-select-match placeholder="{{\'Select or search icon\' | translate}}">\n                  <i c8y-icon="{{$select.selected}}"></i>\n                  {{$select.selected}}\n                </ui-select-match>\n                <ui-select-choices repeat="item in icons | filter: $select.search">\n                  <div>\n                    <i c8y-icon="{{item}}"></i> {{item}}\n                  </div>\n                </ui-select-choices>\n              </ui-select>\n            </div>\n          </div>\n        </div>\n\n        <div class="row" style="position: relative">\n          <div class="col-sm-7">\n\n            <c8y-dashboard-permissions saved="saved" dashboard="dashboard"></c8y-dashboard-permissions>\n\n            <div class="form-group" ng-show="!dashboard.id && deviceType">\n              <div class="checkbox">\n                <label>\n                  <input type="checkbox" ng-model="dashboard.deviceType">\n                  <translate>Apply dashboard to all devices of type <i>{{dashboard.deviceTypeValue}}</i></translate>\n                </label>\n              </div>\n            </div>\n\n            <div class="alert alert-info" ng-show="dashboard.deviceType && dashboard.deviceTypeValue">\n              <i c8y-icon="info"></i>\n              <translate>This dashboard is shared between all devices of the type <i>{{dashboard.deviceTypeValue}}</i></translate>\n            </div>\n\n          </div>\n        </div>\n      </div>\n\n      <div>\n        <h6 class="legend"><span translate>Dashboard layout</span></h6>\n\n        <div class="row">\n          <div class="col-sm-6">\n            <c8y-class-selector label="\'Dashboard theme\' | translate" placeholder="\'Select theme\' | translate" options="dashboardThemeClasses" ng-model="dashboard.classes">\n            </c8y-class-selector>\n\n\n            <c8y-class-selector label="\'Default widget header style\' | translate" placeholder="\'Select header style\' | translate" options="widgetHeaderClasses" ng-model="dashboard.widgetClasses">\n            </c8y-class-selector>\n          </div>\n          <div class="col-sm-6">\n            <label><small translate>Preview</small></label>\n            <div class="dashboard-preview-slot" ng-class="getPreviewClasses(dashboard)">\n              <div class="card card-dashboard" ng-style="getApplicableWidgetStyles(null, dashboard)">\n                <div class="card-header-actions" style="z-index: 8">\n                  <div class="card-title">\n                    <span translate>Widget title</span>\n                  </div>\n                  <div class="header-actions">\n                    <div class="optionsBtn dropdown">\n                      <a href="" class="dropdown-toggle c8y-dropdown">\n                        <i c8y-icon="cog"></i>\n                      </a>\n                    </div>\n                  </div>\n                </div>\n                <div class="card-inner-scroll">\n                  <p style="padding: 15px" translate>Widget example content.</p>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class="clearfix"></div>\n          <div class="col-sm-5">\n            <c8y-margins-editor label="\'Default widget margin\' | translate" single-value="true" ng-model="dashboard.widgetMargin" placeholder="defaultDashboardWidgetMargin">\n            </c8y-margins-editor>\n          </div>\n        </div>\n      </div>\n    </form>\n  </div>\n\n  <div class="modal-footer">\n    <button class="btn btn-default" ng-click="cancel()" translate>Cancel</button>\n    <button class="btn btn-primary" ng-click="save()" ng-disabled="forms.newDashboard.$invalid || forms.newDashboard.$pristine" translate>Save</button>\n  </div>\n</div>\n',e.put("dashboard2/dashboard/new.html",t),e.put("core_dashboard2/dashboard/new.html",t),e.put("/apps/core/dashboard2/dashboard/new.html",t),t='<div class="modal-header">\n  <h3>\n    {{getConfigTitle() | translate}}\n  </h3>\n</div>\n\n<div class="modal-body">\n\n  <div class="alert alert-warning top-m" ng-show="dashboards.length === 0">\n    <translate>There are no dashboards available</translate>\n  </div>\n\n  <ul class="list-group">\n    <li class="list-group-item item-list-row" ng-repeat="dashboard in dashboards track by dashboard.id">\n      <div class="col-sm-9 text-truncate">\n        <i c8y-icon="{{dashboard.icon}}"></i>\n        {{dashboard.name}}\n      </div>\n      <div class="col-sm-1">\n        <span class="label label-success" ng-show="dashboard.c8y_Report"> <translate>REPORT</translate></span>\n      </div>\n      <div class="col-sm-1 showOnHover">\n        <a href="" ng-click="select(dashboard)" class="btn btn-xs btn-primary">\n          <i c8y-icon="plus"></i> {{getConfigSelectLabel() | translate}}\n        </a>\n      </div>\n    </li>\n  </ul>\n</div>\n\n<div class="modal-footer">\n  <button class="btn btn-default" ng-click="cancel()" translate>Cancel</button>\n</div>\n',e.put("dashboard2/dashboard/select.html",t),e.put("core_dashboard2/dashboard/select.html",t),e.put("/apps/core/dashboard2/dashboard/select.html",t),t='<div class="modal-header">\n  <h3>{{title | translate}}</h3>\n</div>\n\n<div class="modal-inner-scroll">\n  <div class="modal-body" ng-init="forms = {}">\n    <form name="forms.componentForm" novalidate style="min-height: 300px">\n      <div class="form-group" style="position:relative;z-index:1000">\n        <label translate>Widget</label>\n        <ui-select ng-model="data.cmp" uis-open-close="onOpenClose(isOpen)">\n          <ui-select-match placeholder="{{\'Select widget\' | translate}}">\n            {{($select.selected.nameDisplay || $select.selected.name) | translate}}\n          </ui-select-match>\n          <ui-select-choices position="down" repeat="item in components | orderBy:orderWidgets | filter:noNewWidgets | filterByFields:$select.search:[\'name\',\'nameDisplay\',\'description\']:true">\n            <div>\n              <strong>{{(item.nameDisplay || item.name) | translate}}</strong>\n              <p>\n                <small class="text-muted">\n                  {{getItemDescription(item) | translate}}\n                </small>\n              </p>\n            </div>\n          </ui-select-choices>\n        </ui-select>\n      </div>\n\n      <div class="form-group" ng-show="data.cmp">\n        <label translate>Title</label>\n        <input class="form-control" ng-model="component.title" placeholder="{{\'e.g.\' | translate}} {{(data.cmp.nameDisplay || data.cmp.name) | translate}}" required>\n      </div>\n\n      <div class="form-group" ng-if="data.cmp && !componentOptions.noDeviceTarget" ng-style="{height: hideTarget && \'0\', overflow: \'hidden\'}">\n        <label translate>Target assets or devices</label>\n        <c8y-device-selector-combo parent="rootId" selected-child-device="_config.device" groups-selectable="componentOptions.groupsSelectable">\n        </c8y-device-selector-combo>\n      </div>\n\n      <div ng-if="data.cmp.configTemplateUrl" ng-include="data.cmp.configTemplateUrl">\n      </div>\n\n      <div ng-if="data.cmp.configComponent">\n        <c8y-ui-component component-name="data.cmp.configComponent" config="config">\n        </c8y-ui-component>\n      </div>\n\n      <div ng-if="showVisualConfig">\n        <hr>\n        <button type="button" class="btn-toggle-panel" ng-click="styleCollapsed = !styleCollapsed" ng-class="{\'open\': styleCollapsed}">\n          {{\'Customize widget style\' | translate}} <i c8y-icon="chevron-down"></i>\n        </button>\n\n        <div uib-collapse="!styleCollapsed">\n          <hr>\n          <div class="row">\n            <div class="col-sm-6">\n              <c8y-class-selector label="\'Content style\' | translate" placeholder="\'Select content style\' | translate" options="widgetContentClasses" placeholder-option="dashboardWidgetContentOption" ng-model="component.classes">\n              </c8y-class-selector>\n\n              <c8y-class-selector label="\'Header style\' | translate" placeholder="\'Select header style\' | translate" options="widgetHeaderClasses" placeholder-option="dashboardWidgetHeaderOption" ng-model="component.classes">\n              </c8y-class-selector>\n            </div>\n\n            <div class="col-sm-6">\n              <label><small translate>Preview</small></label>\n              <div class="dashboard-preview-slot" ng-class="getPreviewClasses(component, dashboard)">\n                <div class="card card-dashboard" ng-style="getApplicableWidgetStyles(component, dashboard)">\n                  <div class="card-header-actions" style="z-index: 8">\n                    <div class="card-title">\n                      <span translate>Widget title</span>\n                    </div>\n                    <div class="header-actions">\n                      <div class="optionsBtn dropdown">\n                        <a href="" class="dropdown-toggle c8y-dropdown">\n                          <i c8y-icon="cog"></i>\n                        </a>\n                      </div>\n                    </div>\n                  </div>\n                  <div class="card-inner-scroll">\n                    <p style="padding: 15px" translate>Widget example content.</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <button class="btn btn-default" ng-click="cancel()" translate>Cancel</button>\n  <button class="btn btn-primary" ng-click="save()" ng-disabled="forms.componentForm.$pristine || forms.componentForm.$invalid || targetNotSelectedValidation()" translate>\n    Save\n  </button>\n</div>\n',e.put("dashboard2/dashboardWidget/config.html",t),e.put("core_dashboard2/dashboardWidget/config.html",t),e.put("/apps/core/dashboard2/dashboardWidget/config.html",t),t='<div class="card card-dashboard grid-stack-item-content" ng-class="getApplicableWidgetClasses(child, $parent.dashboard)" ng-style="getApplicableWidgetStyles(child, $parent.dashboard)">\n  <div class="card-header-actions" ng-class="{\'draggableCursor drag-handle \': !$parent.isFrozen && !child._isFrozen}">\n    <div class="card-title">\n      <!-- <div ng-show="!$parent.isFrozen && !child._isFrozen"><i c8y-icon="ellipsis-v"></i></div> -->\n      <span ng-bind-html="getTranslatedChildTitle(child)" title="{{getTranslatedChildTitle(child)}}"></span>\n    </div>\n    <div class="header-actions">\n      <div class="optionsBtn dropdown" ng-if="!$parent.isFrozen && !child._isFrozen && !child._hideOptions" uib-dropdown>\n\n        <a href="" class="btnIcon dropdown-toggle c8y-dropdown" uib-dropdown-toggle>\n          <i c8y-icon="cog"></i>\n        </a>\n\n        <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n          <li>\n            <a href="" ng-click="editChild(child)">\n              <i c8y-icon="pencil"></i> <translate>Edit</translate>\n            </a>\n          </li>\n          <li>\n            <a href="" ng-click="removeChild(child)">\n              <i c8y-icon="trash"></i> <translate>Remove</translate>\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if="child.templateUrl" class="card-inner-scroll" ng-include="child.templateUrl">\n  </div>\n\n  <div ng-if="child.widgetComponent" class="card-inner-scroll">\n    <c8y-ui-component component-name="child.widgetComponent" config="child.config" context="dashboardContext">\n    </c8y-ui-component>\n  </div>\n</div>\n',e.put("dashboard2/dashboardWidget/dashboardChild.html",t),e.put("core_dashboard2/dashboardWidget/dashboardChild.html",t),e.put("/apps/core/dashboard2/dashboardWidget/dashboardChild.html",t),t='<label><small ng-bind="vm.label | translate"></small></label>\n<div class="dashboard-preview-list">\n  <label class="dashboard-preview-item list-group-item" ng-repeat="option in vm.options">\n    <input type="radio" ng-checked="option.class === vm.selectedOption.class" ng-click="vm.onOptionClicked(option)">\n\n    <div class="preview-label">\n      <span ng-bind-html="option.label | translate"></span>&nbsp;\n      <small ng-show="option === vm.placeholderOption" class="text-muted">\n        <em translate>Dashboard default</em>\n      </small>&nbsp;\n      <small ng-show="option.description" ng-bind-html="option.description">\n      </small>\n    </div>\n  </label>\n</div>\n',e.put("dashboard2/visualConfig/classSelector.html",t),e.put("core_dashboard2/visualConfig/classSelector.html",t),e.put("/apps/core/dashboard2/visualConfig/classSelector.html",t),t='<form name="marginsForm" novalidate>\n  <div ng-if="vm.singleValue">\n    <div class="form-group">\n      <label for="margin" ng-bind="(vm.label || vm.defaultLabels.single) | translate"></label>\n      <div class="input-group">\n        <input id="margin" name="margin" type="number" class="form-control" ng-model="vm.margins.margin" ng-change="vm.onMarginsChanged()" placeholder="{{vm.getPlaceholder()}}" ng-min="0" ng-max="50">\n        <span class="input-group-addon">px</span>\n      </div>\n      <c8y-error-feedback field="marginsForm.margin"></c8y-error-feedback>\n    </div>\n  </div>\n  <div ng-if="!vm.singleValue">\n    <label>\n      <small translate>Widget margins</small>\n    </label>\n    <div class="row">\n      <div class="form-group col-md-6">\n        <label for="topMargin" ng-bind="(vm.labels.top || vm.defaultLabels.top) | translate"></label>\n        <div class="input-group">\n          <input id="topMargin" name="topMargin" type="number" class="form-control" ng-model="vm.margins.top" ng-change="vm.onMarginsChanged()" placeholder="{{vm.getPlaceholder(\'top\')}}" ng-min="0" ng-max="50">\n          <span class="input-group-addon">px</span>\n        </div>\n        <c8y-error-feedback field="marginsForm.topMargin"></c8y-error-feedback>\n      </div>\n      <div class="form-group col-md-6">\n        <label for="bottomMargin" ng-bind="(vm.labels.bottom || vm.defaultLabels.bottom) | translate"></label>\n        <div class="input-group">\n          <input id="bottomMargin" name="bottomMargin" type="number" class="form-control" ng-model="vm.margins.bottom" ng-change="vm.onMarginsChanged()" placeholder="{{vm.getPlaceholder(\'bottom\')}}" ng-min="0" ng-max="50">\n          <span class="input-group-addon">px</span>\n        </div>\n        <c8y-error-feedback field="marginsForm.bottomMargin"></c8y-error-feedback>\n      </div>\n    </div>\n    <div class="row">\n      <div class="form-group col-md-6">\n        <label for="leftMargin" ng-bind="(vm.labels.left || vm.defaultLabels.left) | translate"></label>\n        <div class="input-group">\n          <input id="leftMargin" name="leftMargin" type="number" class="form-control" ng-model="vm.margins.left" ng-change="vm.onMarginsChanged()" placeholder="{{vm.getPlaceholder(\'left\')}}" ng-min="0" ng-max="50">\n          <span class="input-group-addon">px</span>\n        </div>\n        <c8y-error-feedback field="marginsForm.leftMargin"></c8y-error-feedback>\n      </div>\n      <div class="form-group col-md-6">\n        <label for="rightMargin" ng-bind="(vm.labels.right || vm.defaultLabels.right) | translate"></label>\n        <div class="input-group">\n          <input id="rightMargin" name="rightMargin" type="number" class="form-control" ng-model="vm.margins.right" ng-change="vm.onMarginsChanged()" placeholder="{{vm.getPlaceholder(\'right\')}}" ng-min="0" ng-max="50">\n          <span class="input-group-addon">px</span>\n        </div>\n        <c8y-error-feedback field="marginsForm.rightMargin"></c8y-error-feedback>\n      </div>\n    </div>\n  </div>\n</form>\n',e.put("dashboard2/visualConfig/marginsEditor.html",t),e.put("core_dashboard2/visualConfig/marginsEditor.html",t),e.put("/apps/core/dashboard2/visualConfig/marginsEditor.html",t)}angular.module("c8y.parts.dashboard2").run(["$templateCache",e])}();